# Testing tools

This file contains the outputs from various testing tools.

Testing tools available:

- Slither: (vee) https://ethereum.org/en/developers/tutorials/how-to-use-slither-to-find-smart-contract-bugs/
- Mythril: https://github.com/ConsenSys/mythril
- Echidna: https://ethereum.org/en/developers/tutorials/how-to-use-echidna-to-test-smart-contracts/
- Manticore: https://github.com/trailofbits/manticore
- Octopus: https://github.com/pventuzelo/octopus
- Vertigo: https://github.com/JoranHonig/vertigo

# Testing tools

I have pulled out the important Slither issues here, but you can [view the full list of issues in the slither output.](./automated-testing/slither-output.md)

| Tool    | Issue                                                 | Location                                                                                                                                                                                                                                                                          | Status                                                                                                                                                                                                                                         |
| :------ | :---------------------------------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Slither | sends eth to arbitrary user.                          | Proposals.execute(uint256) /governance/Proposals.sol#215-229                                                                                                                                                                                                                      | voted proposal execution, it is fine to be arbitrary and optionally send eth                                                                                                                                                                   |
| Slither | ignores return value by IERC20                        | DirectLoanBase.\_renegotiateLoan() /loans/direct/loanTypes/DirectLoanBase.sol#640-699)                                                                                                                                                                                            | Not all ERC20's return true on successful execution.                                                                                                                                                                                           |
| Slither | performs a multiplication on the result of a division | DirectLoanProRated.\_computeInterestDue() contracts/loans/direct/loanTypes/DirectLoanProRated.sol#322-323 /loans/direct/loanTypes/DirectLoanProRated.sol#320-321                                                                                                                  | Acknowledge, can't change the order                                                                                                                                                                                                            |
| Slither | uses a dangerous strict equality                      | Token.\_writeCheckpoint() /governance/votingImplementations/Token.sol#334-350                                                                                                                                                                                                     | This code is from compound                                                                                                                                                                                                                     |
| Slither | Reentrancy                                            | DirectLoanBase.\_renegotiateLoan() /loans/direct/loanTypes/DirectLoanBase.sol#640-699 </br> DirectLoanBase.liquidateOverdueLoan() /loans/direct/loanTypes/DirectLoanBase.sol#469-510 </br> DirectLoanBase.payBackLoan(uint256) /loans/direct/loanTypes/DirectLoanBase.sol#394-453 | internal function, only used externally with nonReentrant modifier </br> DirectLoanBase.payBackLoan: has nonReentrant                                                                                                                          |
| Slither | ignores return value by childContracts                | ERC9981155Extension.\_receive1155Child() ERC998TopDown.rootOwnerOfChild() ERC998TopDown.\_removeChild()                                                                                                                                                                           | Acknowledged                                                                                                                                                                                                                                   |
| Slither | lacks a zero-check on                                 | Timelock.constructor() /governance/Timelock.sol#87 Timelock.setPendingAdmin() /governance/Timelock.sol#136 Timelock.executeTransaction() Governable.setOwner()                                                                                                                    | - Timelock.constructor -> I think we should add a check </br> - Timelock.setPendingAdmin -> I think we should add a check </br> - Timelock.executeTransaction -> We could add a check to fail earlier </br> - Governable -> is a Test contract |
| Slither | has external calls inside a loop                      | NftfiBundler.decomposeBundle() /composable/NftfiBundler.sol#54-84                                                                                                                                                                                                                 | This method may run out of gas if the list of children is too big. In that case, children can be removed individually.                                                                                                                         |
| Slither | potentially used before declaration                   | ERC998TopDown.rootOwnerOfChild()                                                                                                                                                                                                                                                  | The variable is defined as the result of the external call on the try                                                                                                                                                                          |
| Slither | Reentrancy                                            | DirectLoanBase.\_createLoan() ImmutableBundle.\_mintImmutableBundle() DirectLoanBase.\_renegotiateLoan() DirectLoanBase.liquidateOverdueLoan() ImmutableBundle.mintBundle() DirectLoanCoordinator.registerLoan()                                                                  | Internal calls checks reentrancy when called. Other functions have reentrancy guards.                                                                                                                                                          |
| Mythril | No issues were detected.                              | eth.nftfi git:(testing/mythril) âœ— myth analyze contracts/\*.sol --solv 0.8.4                                                                                                                                                                                                      | The analysis was completed successfully.                                                                                                                                                                                                       |
