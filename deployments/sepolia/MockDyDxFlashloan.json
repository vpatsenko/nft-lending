{
  "address": "0x8feB96b6b2f75181030Cb7E9c0be571dE31B2E7e",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "_erc20s",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "_marketIds",
          "type": "uint256[]"
        },
        {
          "internalType": "address",
          "name": "_admin",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "acceptTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "cancelTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_tokenAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_receiver",
          "type": "address"
        }
      ],
      "name": "drainERC20",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "getMarketTokenAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "name": "markets",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "address",
              "name": "owner",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "number",
              "type": "uint256"
            }
          ],
          "internalType": "struct IFlashloan.AccountInfo[]",
          "name": "accountInfo",
          "type": "tuple[]"
        },
        {
          "components": [
            {
              "internalType": "enum IFlashloan.ActionType",
              "name": "actionType",
              "type": "uint8"
            },
            {
              "internalType": "uint256",
              "name": "accountId",
              "type": "uint256"
            },
            {
              "components": [
                {
                  "internalType": "bool",
                  "name": "sign",
                  "type": "bool"
                },
                {
                  "internalType": "enum IFlashloan.AssetDenomination",
                  "name": "denomination",
                  "type": "uint8"
                },
                {
                  "internalType": "enum IFlashloan.AssetReference",
                  "name": "ref",
                  "type": "uint8"
                },
                {
                  "internalType": "uint256",
                  "name": "value",
                  "type": "uint256"
                }
              ],
              "internalType": "struct IFlashloan.AssetAmount",
              "name": "amount",
              "type": "tuple"
            },
            {
              "internalType": "uint256",
              "name": "primaryMarketId",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "secondaryMarketId",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "otherAddress",
              "type": "address"
            },
            {
              "internalType": "uint256",
              "name": "otherAccountId",
              "type": "uint256"
            },
            {
              "internalType": "bytes",
              "name": "data",
              "type": "bytes"
            }
          ],
          "internalType": "struct IFlashloan.ActionArgs[]",
          "name": "actions",
          "type": "tuple[]"
        }
      ],
      "name": "operate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "rejectTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newOwnerCandidate",
          "type": "address"
        }
      ],
      "name": "requestTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_erc20",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_marketId",
          "type": "uint256"
        }
      ],
      "name": "setMarket",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "_erc20s",
          "type": "address[]"
        },
        {
          "internalType": "uint256[]",
          "name": "_marketIds",
          "type": "uint256[]"
        }
      ],
      "name": "setMarkets",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x79f972ce3d768543b39549a147c7d60f1fa20d3f4d80734a709c97f618f98cb8",
  "receipt": {
    "to": null,
    "from": "0x02e037F56728E947e92Af2c05baF7FeF387Ddd06",
    "contractAddress": "0x8feB96b6b2f75181030Cb7E9c0be571dE31B2E7e",
    "transactionIndex": 14,
    "gasUsed": "1060884",
    "logsBloom": "0x00000000800400000000000000000000000000000000000000800000000000000000000000000800000000000000000000000000000000080000000000000000000000000000000000000000000000000001000000000000000000000000000000000000020000000000000000000800000000000000000000000000000000400002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0x38c26cbd054ea1b0fbb639b2289d70b0fdef7816b15ed521ac2bdd5900e41fb0",
    "transactionHash": "0x79f972ce3d768543b39549a147c7d60f1fa20d3f4d80734a709c97f618f98cb8",
    "logs": [
      {
        "transactionIndex": 14,
        "blockNumber": 6769052,
        "transactionHash": "0x79f972ce3d768543b39549a147c7d60f1fa20d3f4d80734a709c97f618f98cb8",
        "address": "0x8feB96b6b2f75181030Cb7E9c0be571dE31B2E7e",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x000000000000000000000000beebcd47b8315b9ffc949318269a329aeb7d97b4"
        ],
        "data": "0x",
        "logIndex": 15,
        "blockHash": "0x38c26cbd054ea1b0fbb639b2289d70b0fdef7816b15ed521ac2bdd5900e41fb0"
      }
    ],
    "blockNumber": 6769052,
    "cumulativeGasUsed": "2529157",
    "status": 1,
    "byzantium": true
  },
  "args": [
    [
      "0x7b79995e5f793a07bc00c21412e50ecae098e7f9",
      "0x1c7d4b196cb0c7b01d743fbc6116a902379c7238",
      "0x53844f9577c2334e541aec7df7174ece5df1fcf0"
    ],
    [
      0,
      1,
      2
    ],
    "0xbeEBCD47B8315B9fFC949318269A329AEb7D97b4"
  ],
  "numDeployments": 1,
  "solcInputHash": "bab281e5640fb4f8a58586b3f548739e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_erc20s\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"_marketIds\",\"type\":\"uint256[]\"},{\"internalType\":\"address\",\"name\":\"_admin\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"acceptTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cancelTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"amount\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_receiver\",\"type\":\"address\"}],\"name\":\"drainERC20\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_marketId\",\"type\":\"uint256\"}],\"name\":\"getMarketTokenAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"name\":\"markets\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"number\",\"type\":\"uint256\"}],\"internalType\":\"struct IFlashloan.AccountInfo[]\",\"name\":\"accountInfo\",\"type\":\"tuple[]\"},{\"components\":[{\"internalType\":\"enum IFlashloan.ActionType\",\"name\":\"actionType\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"accountId\",\"type\":\"uint256\"},{\"components\":[{\"internalType\":\"bool\",\"name\":\"sign\",\"type\":\"bool\"},{\"internalType\":\"enum IFlashloan.AssetDenomination\",\"name\":\"denomination\",\"type\":\"uint8\"},{\"internalType\":\"enum IFlashloan.AssetReference\",\"name\":\"ref\",\"type\":\"uint8\"},{\"internalType\":\"uint256\",\"name\":\"value\",\"type\":\"uint256\"}],\"internalType\":\"struct IFlashloan.AssetAmount\",\"name\":\"amount\",\"type\":\"tuple\"},{\"internalType\":\"uint256\",\"name\":\"primaryMarketId\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"secondaryMarketId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"otherAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"otherAccountId\",\"type\":\"uint256\"},{\"internalType\":\"bytes\",\"name\":\"data\",\"type\":\"bytes\"}],\"internalType\":\"struct IFlashloan.ActionArgs[]\",\"name\":\"actions\",\"type\":\"tuple[]\"}],\"name\":\"operate\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rejectTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newOwnerCandidate\",\"type\":\"address\"}],\"name\":\"requestTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_erc20\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_marketId\",\"type\":\"uint256\"}],\"name\":\"setMarket\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_erc20s\",\"type\":\"address[]\"},{\"internalType\":\"uint256[]\",\"name\":\"_marketIds\",\"type\":\"uint256[]\"}],\"name\":\"setMarkets\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"NFTfi\",\"details\":\"This contract is a mock of the dYdX flash loan system for testing purposes. It implements the ISoloMargin interface to mimic the behavior of dYdX flash loans on a local network.\",\"kind\":\"dev\",\"methods\":{\"constructor\":{\"details\":\"Contract constructor that sets the ERC20 markets.\",\"params\":{\"_erc20s\":\"The address of the ERC20 tokens\",\"_marketIds\":\"The id of the markets\"}},\"drainERC20(address,uint256,address)\":{\"params\":{\"_receiver\":\"- receiver of the token\",\"_tokenAddress\":\"- address of the token contract for the token to be sent out\"}},\"getMarketTokenAddress(uint256)\":{\"details\":\"Returns the address of the ERC20 token. This mocks the function in the real dYdX contract which returns the address of the token for a given market id.\",\"params\":{\"\":\"*_marketId The id of the market (not used in this mock contract).\"},\"returns\":{\"_0\":\"The address of the ERC20 token.\"}},\"operate((address,uint256)[],(uint8,uint256,(bool,uint8,uint8,uint256),uint256,uint256,address,uint256,bytes)[])\":{\"details\":\"Mocks a flash loan operation. It transfers the loan amount to the borrower, calls the function on the borrower's contract, and then transfers the repayment from the borrower.\",\"params\":{\"accountInfo\":\"Information about the account.\",\"actions\":\"Actions to be performed during the flash loan operation.\"}},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"requestTransferOwnership(address)\":{\"details\":\"Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`). Can only be called by the current owner.\"},\"setMarket(address,uint256)\":{\"details\":\"Updates the ERC20 token address.\",\"params\":{\"_erc20\":\"The new address of the ERC20 token.\"}}},\"title\":\"MockDyDxFlashloan\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"drainERC20(address,uint256,address)\":{\"notice\":\"used by the owner account to be able to drain sturck ERC20 tokens for revenue share for the locked  collateral NFT-s\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/test/MockDyDxFlashloan.sol\":\"MockDyDxFlashloan\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":900},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `from` to `to` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\\n}\\n\",\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/Context.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0xe2e337e6dde9ef6b680e07338c493ebea1b5fd09b43424112868e9cc1706bca7\",\"license\":\"MIT\"},\"contracts/refinancing/flashloan/IFlashloan.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title IFlashloan\\n * @author NFTfi\\n * @dev This is an interface for the Flashloan contract.\\n * It includes the definitions for data types and function used in the flashloan operations.\\n */\\ninterface IFlashloan {\\n    /**\\n     * @dev Enum representing the denomination of an asset.\\n     * Assets can be denominated in Wei or Par.\\n     */\\n    enum AssetDenomination {\\n        Wei,\\n        Par\\n    }\\n\\n    /**\\n     * @dev Enum representing the reference of an asset amount.\\n     * Assets can be referenced by a delta (change in value) or target (final value).\\n     */\\n    enum AssetReference {\\n        Delta,\\n        Target\\n    }\\n\\n    /**\\n     * @dev Enum representing the type of action to be performed.\\n     * This can be any one among several options including Deposit, Withdraw, Transfer, etc.\\n     */\\n    enum ActionType {\\n        Deposit,\\n        Withdraw,\\n        Transfer,\\n        Buy,\\n        Sell,\\n        Trade,\\n        Liquidate,\\n        Vaporize,\\n        Call\\n    }\\n\\n    /**\\n     * @dev Struct representing an asset amount for an action.\\n     * It includes information about the sign (positive/negative),\\n     * denomination (Wei/Par), reference (Delta/Target), and the value.\\n     */\\n    struct AssetAmount {\\n        bool sign;\\n        AssetDenomination denomination;\\n        AssetReference ref;\\n        uint256 value;\\n    }\\n\\n    /**\\n     * @dev Struct representing an action.\\n     * It includes information about the type of action, the accountId,\\n     * the amount of the asset, market ids, address of the other party,\\n     * the other account's id, and any additional data.\\n     */\\n    struct ActionArgs {\\n        ActionType actionType;\\n        uint256 accountId;\\n        AssetAmount amount;\\n        uint256 primaryMarketId;\\n        uint256 secondaryMarketId;\\n        address otherAddress;\\n        uint256 otherAccountId;\\n        bytes data;\\n    }\\n\\n    /**\\n     * @dev Struct representing the account information.\\n     * It includes the owner's address and the account number.\\n     */\\n    struct AccountInfo {\\n        address owner;\\n        uint256 number;\\n    }\\n\\n    /**\\n     * @dev Function that is called after a flash loan operation.\\n     * @param sender The address initiating the call.\\n     * @param accountInfo Account related information.\\n     * @param data The data passed in the call.\\n     */\\n    function callFunction(address sender, AccountInfo memory accountInfo, bytes memory data) external;\\n}\\n\",\"keccak256\":\"0xc831dbc53083b2ff0421e43a5014a9e38ae9e7cbed303af56a9d017732934d79\",\"license\":\"BUSL-1.1\"},\"contracts/refinancing/flashloan/ISoloMargin.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {IFlashloan} from \\\"./IFlashloan.sol\\\";\\n\\n/**\\n * @title ISoloMargin\\n * @author NFTfi\\n * @dev Interface for dYdX's SoloMargin contract.\\n * It includes essential methods needed to interact with the SoloMargin contract.\\n * These methods are used for initiating flash loans and getting token address of the market.\\n */\\ninterface ISoloMargin {\\n    /**\\n     * @dev Function to bundle multiple operations in a single transaction.\\n     * The operations are executed atomically and the state is maintained to ensure protocol's solvency.\\n     * @param accounts An array of AccountInfo objects, which contains the address and number of each account involved.\\n     * @param actions An array of ActionArgs objects, representing the actions to be executed.\\n     */\\n    function operate(IFlashloan.AccountInfo[] memory accounts, IFlashloan.ActionArgs[] memory actions) external;\\n\\n    /**\\n     * @dev Function to get the token address of the market based on the given marketId.\\n     * @param marketId The ID of the market to get the token address for.\\n     * @return Address of the token for the specified market.\\n     */\\n    function getMarketTokenAddress(uint256 marketId) external view returns (address);\\n}\\n\",\"keccak256\":\"0x0506fe45e28d161f1849c3fb836161373d812c97d5d2a6f3ddf477db9d096b5d\",\"license\":\"BUSL-1.1\"},\"contracts/test/MockDyDxFlashloan.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {ISoloMargin, IFlashloan} from \\\"../refinancing/flashloan/ISoloMargin.sol\\\";\\nimport {Ownable} from \\\"../utils/Ownable.sol\\\";\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\n\\n/**\\n * @title MockDyDxFlashloan\\n * @author NFTfi\\n * @dev This contract is a mock of the dYdX flash loan system for testing purposes.\\n * It implements the ISoloMargin interface to mimic the behavior of dYdX flash loans on a local network.\\n */\\ncontract MockDyDxFlashloan is ISoloMargin, Ownable {\\n    mapping(uint256 => address) public markets;\\n\\n    /**\\n     * @dev Contract constructor that sets the ERC20 markets.\\n     * @param _erc20s The address of the ERC20 tokens\\n     * @param _marketIds The id of the markets\\n     */\\n    constructor(address[] memory _erc20s, uint256[] memory _marketIds, address _admin) Ownable(_admin) {\\n        _setMarkets(_erc20s, _marketIds);\\n    }\\n\\n    /**\\n     * @dev Updates the ERC20 token address.\\n     * @param _erc20 The new address of the ERC20 token.\\n     */\\n    function setMarket(address _erc20, uint256 _marketId) public onlyOwner {\\n        _setMarket(_erc20, _marketId);\\n    }\\n\\n    function setMarkets(address[] memory _erc20s, uint256[] memory _marketIds) public onlyOwner {\\n        _setMarkets(_erc20s, _marketIds);\\n    }\\n\\n    /**\\n     * @dev Updates the ERC20 token address.\\n     * @param _erc20 The new address of the ERC20 token.\\n     */\\n    function _setMarket(address _erc20, uint256 _marketId) internal {\\n        markets[_marketId] = _erc20;\\n    }\\n\\n    function _setMarkets(address[] memory _erc20s, uint256[] memory _marketIds) internal {\\n        // solhint-disable-next-line custom-errors\\n        require(_erc20s.length == _marketIds.length, \\\"setMarkets function information arity mismatch\\\");\\n        for (uint256 i; i < _erc20s.length; ++i) {\\n            _setMarket(_erc20s[i], _marketIds[i]);\\n        }\\n    }\\n\\n    /**\\n     * @dev Mocks a flash loan operation. It transfers the loan amount to the borrower,\\n     * calls the function on the borrower's contract, and then transfers the repayment from the borrower.\\n     * @param accountInfo Information about the account.\\n     * @param actions Actions to be performed during the flash loan operation.\\n     */\\n    function operate(\\n        IFlashloan.AccountInfo[] memory accountInfo,\\n        IFlashloan.ActionArgs[] memory actions\\n    ) external override {\\n        IERC20(markets[actions[0].primaryMarketId]).transfer(msg.sender, actions[0].amount.value);\\n        IFlashloan(msg.sender).callFunction(msg.sender, accountInfo[0], actions[1].data);\\n        IERC20(markets[actions[2].primaryMarketId]).transferFrom(msg.sender, address(this), actions[2].amount.value);\\n    }\\n\\n    /**\\n     * @dev Returns the address of the ERC20 token. This mocks the function in the real dYdX contract which\\n     * returns the address of the token for a given market id.\\n     * @param *_marketId The id of the market (not used in this mock contract).\\n     * @return The address of the ERC20 token.\\n     */\\n    function getMarketTokenAddress(uint256 _marketId) external view override returns (address) {\\n        return markets[_marketId];\\n    }\\n\\n    /**\\n     * @notice used by the owner account to be able to drain sturck ERC20 tokens for revenue share\\n     * for the locked  collateral NFT-s\\n     * @param _tokenAddress - address of the token contract for the token to be sent out\\n     * @param _receiver - receiver of the token\\n     */\\n    function drainERC20(address _tokenAddress, uint256 amount, address _receiver) external onlyOwner {\\n        IERC20 tokenContract = IERC20(_tokenAddress);\\n        tokenContract.transfer(_receiver, amount);\\n    }\\n}\\n\",\"keccak256\":\"0x351b4a9fa702e7c6e9ebe6585bc417b76a3c7e9ba6a9328dfe9db2cdd28d58af\",\"license\":\"BUSL-1.1\"},\"contracts/utils/Ownable.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {Context} from \\\"@openzeppelin/contracts/utils/Context.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * By default, the owner account will be the one that deploys the contract. This\\n * can later be changed with {transferOwnership}.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n *\\n * Modified version from openzeppelin/contracts/access/Ownable.sol that allows to\\n * initialize the owner using a parameter in the constructor\\n */\\nabstract contract Ownable is Context {\\n    address private _owner;\\n\\n    address private _ownerCandidate;\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        // solhint-disable-next-line custom-errors\\n        require(owner() == _msgSender(), \\\"Ownable: caller is not the owner\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Initializes the contract setting the deployer as the initial owner.\\n     */\\n    constructor(address _initialOwner) {\\n        _setOwner(_initialOwner);\\n    }\\n\\n    /**\\n     * @dev Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`).\\n     * Can only be called by the current owner.\\n     */\\n    function requestTransferOwnership(address _newOwnerCandidate) public virtual onlyOwner {\\n        // solhint-disable-next-line custom-errors\\n        require(_newOwnerCandidate != address(0), \\\"Ownable: new owner is the zero address\\\");\\n        _ownerCandidate = _newOwnerCandidate;\\n    }\\n\\n    function acceptTransferOwnership() public virtual {\\n        // solhint-disable-next-line custom-errors\\n        require(_ownerCandidate == _msgSender(), \\\"Ownable: not owner candidate\\\");\\n        _setOwner(_ownerCandidate);\\n        delete _ownerCandidate;\\n    }\\n\\n    function cancelTransferOwnership() public virtual onlyOwner {\\n        delete _ownerCandidate;\\n    }\\n\\n    function rejectTransferOwnership() public virtual {\\n        // solhint-disable-next-line custom-errors\\n        require(_ownerCandidate == _msgSender(), \\\"Ownable: not owner candidate\\\");\\n        delete _ownerCandidate;\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view virtual returns (address) {\\n        return _owner;\\n    }\\n\\n    /**\\n     * @dev Sets the owner.\\n     */\\n    function _setOwner(address _newOwner) internal {\\n        address oldOwner = _owner;\\n        _owner = _newOwner;\\n        emit OwnershipTransferred(oldOwner, _newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0x4f1dc29ae64fcd354c09865ae56d8a3612541ebfc9db9b87b7af6f18ca36cf65\",\"license\":\"BUSL-1.1\"}},\"version\":1}",
  "bytecode": "0x60806040523480156200001157600080fd5b5060405162001421380380620014218339810160408190526200003491620002af565b80620000408162000056565b506200004d8383620000a6565b505050620003cf565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b8051825114620001135760405162461bcd60e51b815260206004820152602e60248201527f7365744d61726b6574732066756e6374696f6e20696e666f726d6174696f6e2060448201526d0c2e4d2e8f240dad2e6dac2e8c6d60931b606482015260840160405180910390fd5b60005b82518110156200017d576200016a83828151811062000139576200013962000391565b602002602001015183838151811062000156576200015662000391565b60200260200101516200018260201b60201c565b6200017581620003a7565b905062000116565b505050565b600090815260026020526040902080546001600160a01b0319166001600160a01b0392909216919091179055565b634e487b7160e01b600052604160045260246000fd5b604051601f8201601f191681016001600160401b0381118282101715620001f157620001f1620001b0565b604052919050565b60006001600160401b03821115620002155762000215620001b0565b5060051b60200190565b80516001600160a01b03811681146200023757600080fd5b919050565b600082601f8301126200024e57600080fd5b81516020620002676200026183620001f9565b620001c6565b82815260059290921b840181019181810190868411156200028757600080fd5b8286015b84811015620002a457805183529183019183016200028b565b509695505050505050565b600080600060608486031215620002c557600080fd5b83516001600160401b0380821115620002dd57600080fd5b818601915086601f830112620002f257600080fd5b81516020620003056200026183620001f9565b82815260059290921b8401810191818101908a8411156200032557600080fd5b948201945b838610156200034e576200033e866200021f565b825294820194908201906200032a565b918901519197509093505050808211156200036857600080fd5b5062000377868287016200023c565b92505062000388604085016200021f565b90509250925092565b634e487b7160e01b600052603260045260246000fd5b600060018201620003c857634e487b7160e01b600052601160045260246000fd5b5060010190565b61104280620003df6000396000f3fe608060405234801561001057600080fd5b50600436106100c95760003560e01c806392fede0011610081578063a67a6a451161005b578063a67a6a4514610177578063b1283e771461018a578063c39df9d3146101b357600080fd5b806392fede00146101495780639d6fa61814610151578063a39473231461016457600080fd5b80635f992fdd116100b25780635f992fdd146101285780637b371107146101305780638da5cb5b1461013857600080fd5b8063062bd3e9146100ce5780632eab662b14610113575b600080fd5b6100f76100dc3660046109b5565b6000908152600260205260409020546001600160a01b031690565b6040516001600160a01b03909116815260200160405180910390f35b6101266101213660046109ea565b6101c6565b005b6101266102bb565b610126610327565b6000546001600160a01b03166100f7565b610126610396565b61012661015f366004610a26565b6103f0565b610126610172366004610a48565b6104e8565b610126610185366004610d71565b610571565b6100f76101983660046109b5565b6002602052600090815260409020546001600160a01b031681565b6101266101c1366004610eb0565b610808565b6000546001600160a01b031633146102255760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b0382811660048301526024820184905284919082169063a9059cbb906044016020604051808303816000875af1158015610290573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102b49190610f66565b5050505050565b6001546001600160a01b031633146103155760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e64696461746500000000604482015260640161021c565b600180546001600160a01b0319169055565b6001546001600160a01b031633146103815760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e64696461746500000000604482015260640161021c565b600154610315906001600160a01b031661086c565b6000546001600160a01b031633146103155760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b6000546001600160a01b0316331461044a5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b6001600160a01b0381166104c65760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f6464726573730000000000000000000000000000000000000000000000000000606482015260840161021c565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146105425760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b600081815260026020526040902080546001600160a01b0319166001600160a01b0384161790555050565b5050565b600260008260008151811061058857610588610f83565b602002602001015160600151815260200190815260200160002060009054906101000a90046001600160a01b03166001600160a01b031663a9059cbb33836000815181106105d8576105d8610f83565b602002602001015160400151606001516040518363ffffffff1660e01b81526004016106199291906001600160a01b03929092168252602082015260400190565b6020604051808303816000875af1158015610638573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061065c9190610f66565b50336001600160a01b0316638b418713338460008151811061068057610680610f83565b60200260200101518460018151811061069b5761069b610f83565b602002602001015160e001516040518463ffffffff1660e01b81526004016106c593929190610f99565b600060405180830381600087803b1580156106df57600080fd5b505af11580156106f3573d6000803e3d6000fd5b50505050600260008260028151811061070e5761070e610f83565b602002602001015160600151815260200190815260200160002060009054906101000a90046001600160a01b03166001600160a01b03166323b872dd33308460028151811061075f5761075f610f83565b60209081029190910101516040908101516060015190517fffffffff0000000000000000000000000000000000000000000000000000000060e086901b1681526001600160a01b03938416600482015292909116602483015260448201526064016020604051808303816000875af11580156107df573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108039190610f66565b505050565b6000546001600160a01b031633146108625760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b61056d82826108bc565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b80518251146109335760405162461bcd60e51b815260206004820152602e60248201527f7365744d61726b6574732066756e6374696f6e20696e666f726d6174696f6e2060448201527f6172697479206d69736d61746368000000000000000000000000000000000000606482015260840161021c565b60005b8251811015610803576109a583828151811061095457610954610f83565b602002602001015183838151811061096e5761096e610f83565b6020026020010151600090815260026020526040902080546001600160a01b039092166001600160a01b0319909216919091179055565b6109ae8161100e565b9050610936565b6000602082840312156109c757600080fd5b5035919050565b80356001600160a01b03811681146109e557600080fd5b919050565b6000806000606084860312156109ff57600080fd5b610a08846109ce565b925060208401359150610a1d604085016109ce565b90509250925092565b600060208284031215610a3857600080fd5b610a41826109ce565b9392505050565b60008060408385031215610a5b57600080fd5b610a64836109ce565b946020939093013593505050565b634e487b7160e01b600052604160045260246000fd5b604051610100810167ffffffffffffffff81118282101715610aac57610aac610a72565b60405290565b6040805190810167ffffffffffffffff81118282101715610aac57610aac610a72565b604051601f8201601f1916810167ffffffffffffffff81118282101715610afe57610afe610a72565b604052919050565b600067ffffffffffffffff821115610b2057610b20610a72565b5060051b60200190565b8035600981106109e557600080fd5b8015158114610b4757600080fd5b50565b60028110610b4757600080fd5b600060808284031215610b6957600080fd5b6040516080810181811067ffffffffffffffff82111715610b8c57610b8c610a72565b6040529050808235610b9d81610b39565b81526020830135610bad81610b4a565b60208201526040830135610bc081610b4a565b6040820152606092830135920191909152919050565b600082601f830112610be757600080fd5b813567ffffffffffffffff811115610c0157610c01610a72565b610c14601f8201601f1916602001610ad5565b818152846020838601011115610c2957600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f830112610c5757600080fd5b81356020610c6c610c6783610b06565b610ad5565b82815260059290921b84018101918181019086841115610c8b57600080fd5b8286015b84811015610d6657803567ffffffffffffffff80821115610cb05760008081fd5b90880190610160828b03601f1901811315610ccb5760008081fd5b610cd3610a88565b610cde888501610b2a565b8152604080850135898301526060610cf88e828801610b57565b8284015260e091508186013581840152506101008501356080830152610d2161012086016109ce565b60a083015261014085013560c0830152918401359183831115610d445760008081fd5b610d528d8a85880101610bd6565b908201528652505050918301918301610c8f565b509695505050505050565b6000806040808486031215610d8557600080fd5b833567ffffffffffffffff80821115610d9d57600080fd5b818601915086601f830112610db157600080fd5b81356020610dc1610c6783610b06565b82815260069290921b8401810191818101908a841115610de057600080fd5b948201945b83861015610e275786868c031215610dfd5760008081fd5b610e05610ab2565b610e0e876109ce565b8152868401358482015282529486019490820190610de5565b97505087013593505080831115610e3d57600080fd5b5050610e4b85828601610c46565b9150509250929050565b600082601f830112610e6657600080fd5b81356020610e76610c6783610b06565b82815260059290921b84018101918181019086841115610e9557600080fd5b8286015b84811015610d665780358352918301918301610e99565b60008060408385031215610ec357600080fd5b823567ffffffffffffffff80821115610edb57600080fd5b818501915085601f830112610eef57600080fd5b81356020610eff610c6783610b06565b82815260059290921b84018101918181019089841115610f1e57600080fd5b948201945b83861015610f4357610f34866109ce565b82529482019490820190610f23565b96505086013592505080821115610f5957600080fd5b50610e4b85828601610e55565b600060208284031215610f7857600080fd5b8151610a4181610b39565b634e487b7160e01b600052603260045260246000fd5b60006001600160a01b03808616835260208186511681850152808601516040850152608060608501528451915081608085015260005b82811015610feb5785810182015185820160a001528101610fcf565b5050600060a0828501015260a0601f19601f830116840101915050949350505050565b60006001820161102e57634e487b7160e01b600052601160045260246000fd5b506001019056fea164736f6c6343000813000a",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100c95760003560e01c806392fede0011610081578063a67a6a451161005b578063a67a6a4514610177578063b1283e771461018a578063c39df9d3146101b357600080fd5b806392fede00146101495780639d6fa61814610151578063a39473231461016457600080fd5b80635f992fdd116100b25780635f992fdd146101285780637b371107146101305780638da5cb5b1461013857600080fd5b8063062bd3e9146100ce5780632eab662b14610113575b600080fd5b6100f76100dc3660046109b5565b6000908152600260205260409020546001600160a01b031690565b6040516001600160a01b03909116815260200160405180910390f35b6101266101213660046109ea565b6101c6565b005b6101266102bb565b610126610327565b6000546001600160a01b03166100f7565b610126610396565b61012661015f366004610a26565b6103f0565b610126610172366004610a48565b6104e8565b610126610185366004610d71565b610571565b6100f76101983660046109b5565b6002602052600090815260409020546001600160a01b031681565b6101266101c1366004610eb0565b610808565b6000546001600160a01b031633146102255760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6040517fa9059cbb0000000000000000000000000000000000000000000000000000000081526001600160a01b0382811660048301526024820184905284919082169063a9059cbb906044016020604051808303816000875af1158015610290573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102b49190610f66565b5050505050565b6001546001600160a01b031633146103155760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e64696461746500000000604482015260640161021c565b600180546001600160a01b0319169055565b6001546001600160a01b031633146103815760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e64696461746500000000604482015260640161021c565b600154610315906001600160a01b031661086c565b6000546001600160a01b031633146103155760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b6000546001600160a01b0316331461044a5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b6001600160a01b0381166104c65760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f6464726573730000000000000000000000000000000000000000000000000000606482015260840161021c565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b6000546001600160a01b031633146105425760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b600081815260026020526040902080546001600160a01b0319166001600160a01b0384161790555050565b5050565b600260008260008151811061058857610588610f83565b602002602001015160600151815260200190815260200160002060009054906101000a90046001600160a01b03166001600160a01b031663a9059cbb33836000815181106105d8576105d8610f83565b602002602001015160400151606001516040518363ffffffff1660e01b81526004016106199291906001600160a01b03929092168252602082015260400190565b6020604051808303816000875af1158015610638573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061065c9190610f66565b50336001600160a01b0316638b418713338460008151811061068057610680610f83565b60200260200101518460018151811061069b5761069b610f83565b602002602001015160e001516040518463ffffffff1660e01b81526004016106c593929190610f99565b600060405180830381600087803b1580156106df57600080fd5b505af11580156106f3573d6000803e3d6000fd5b50505050600260008260028151811061070e5761070e610f83565b602002602001015160600151815260200190815260200160002060009054906101000a90046001600160a01b03166001600160a01b03166323b872dd33308460028151811061075f5761075f610f83565b60209081029190910101516040908101516060015190517fffffffff0000000000000000000000000000000000000000000000000000000060e086901b1681526001600160a01b03938416600482015292909116602483015260448201526064016020604051808303816000875af11580156107df573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108039190610f66565b505050565b6000546001600160a01b031633146108625760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e6572604482015260640161021c565b61056d82826108bc565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b80518251146109335760405162461bcd60e51b815260206004820152602e60248201527f7365744d61726b6574732066756e6374696f6e20696e666f726d6174696f6e2060448201527f6172697479206d69736d61746368000000000000000000000000000000000000606482015260840161021c565b60005b8251811015610803576109a583828151811061095457610954610f83565b602002602001015183838151811061096e5761096e610f83565b6020026020010151600090815260026020526040902080546001600160a01b039092166001600160a01b0319909216919091179055565b6109ae8161100e565b9050610936565b6000602082840312156109c757600080fd5b5035919050565b80356001600160a01b03811681146109e557600080fd5b919050565b6000806000606084860312156109ff57600080fd5b610a08846109ce565b925060208401359150610a1d604085016109ce565b90509250925092565b600060208284031215610a3857600080fd5b610a41826109ce565b9392505050565b60008060408385031215610a5b57600080fd5b610a64836109ce565b946020939093013593505050565b634e487b7160e01b600052604160045260246000fd5b604051610100810167ffffffffffffffff81118282101715610aac57610aac610a72565b60405290565b6040805190810167ffffffffffffffff81118282101715610aac57610aac610a72565b604051601f8201601f1916810167ffffffffffffffff81118282101715610afe57610afe610a72565b604052919050565b600067ffffffffffffffff821115610b2057610b20610a72565b5060051b60200190565b8035600981106109e557600080fd5b8015158114610b4757600080fd5b50565b60028110610b4757600080fd5b600060808284031215610b6957600080fd5b6040516080810181811067ffffffffffffffff82111715610b8c57610b8c610a72565b6040529050808235610b9d81610b39565b81526020830135610bad81610b4a565b60208201526040830135610bc081610b4a565b6040820152606092830135920191909152919050565b600082601f830112610be757600080fd5b813567ffffffffffffffff811115610c0157610c01610a72565b610c14601f8201601f1916602001610ad5565b818152846020838601011115610c2957600080fd5b816020850160208301376000918101602001919091529392505050565b600082601f830112610c5757600080fd5b81356020610c6c610c6783610b06565b610ad5565b82815260059290921b84018101918181019086841115610c8b57600080fd5b8286015b84811015610d6657803567ffffffffffffffff80821115610cb05760008081fd5b90880190610160828b03601f1901811315610ccb5760008081fd5b610cd3610a88565b610cde888501610b2a565b8152604080850135898301526060610cf88e828801610b57565b8284015260e091508186013581840152506101008501356080830152610d2161012086016109ce565b60a083015261014085013560c0830152918401359183831115610d445760008081fd5b610d528d8a85880101610bd6565b908201528652505050918301918301610c8f565b509695505050505050565b6000806040808486031215610d8557600080fd5b833567ffffffffffffffff80821115610d9d57600080fd5b818601915086601f830112610db157600080fd5b81356020610dc1610c6783610b06565b82815260069290921b8401810191818101908a841115610de057600080fd5b948201945b83861015610e275786868c031215610dfd5760008081fd5b610e05610ab2565b610e0e876109ce565b8152868401358482015282529486019490820190610de5565b97505087013593505080831115610e3d57600080fd5b5050610e4b85828601610c46565b9150509250929050565b600082601f830112610e6657600080fd5b81356020610e76610c6783610b06565b82815260059290921b84018101918181019086841115610e9557600080fd5b8286015b84811015610d665780358352918301918301610e99565b60008060408385031215610ec357600080fd5b823567ffffffffffffffff80821115610edb57600080fd5b818501915085601f830112610eef57600080fd5b81356020610eff610c6783610b06565b82815260059290921b84018101918181019089841115610f1e57600080fd5b948201945b83861015610f4357610f34866109ce565b82529482019490820190610f23565b96505086013592505080821115610f5957600080fd5b50610e4b85828601610e55565b600060208284031215610f7857600080fd5b8151610a4181610b39565b634e487b7160e01b600052603260045260246000fd5b60006001600160a01b03808616835260208186511681850152808601516040850152608060608501528451915081608085015260005b82811015610feb5785810182015185820160a001528101610fcf565b5050600060a0828501015260a0601f19601f830116840101915050949350505050565b60006001820161102e57634e487b7160e01b600052601160045260246000fd5b506001019056fea164736f6c6343000813000a",
  "devdoc": {
    "author": "NFTfi",
    "details": "This contract is a mock of the dYdX flash loan system for testing purposes. It implements the ISoloMargin interface to mimic the behavior of dYdX flash loans on a local network.",
    "kind": "dev",
    "methods": {
      "constructor": {
        "details": "Contract constructor that sets the ERC20 markets.",
        "params": {
          "_erc20s": "The address of the ERC20 tokens",
          "_marketIds": "The id of the markets"
        }
      },
      "drainERC20(address,uint256,address)": {
        "params": {
          "_receiver": "- receiver of the token",
          "_tokenAddress": "- address of the token contract for the token to be sent out"
        }
      },
      "getMarketTokenAddress(uint256)": {
        "details": "Returns the address of the ERC20 token. This mocks the function in the real dYdX contract which returns the address of the token for a given market id.",
        "params": {
          "": "*_marketId The id of the market (not used in this mock contract)."
        },
        "returns": {
          "_0": "The address of the ERC20 token."
        }
      },
      "operate((address,uint256)[],(uint8,uint256,(bool,uint8,uint8,uint256),uint256,uint256,address,uint256,bytes)[])": {
        "details": "Mocks a flash loan operation. It transfers the loan amount to the borrower, calls the function on the borrower's contract, and then transfers the repayment from the borrower.",
        "params": {
          "accountInfo": "Information about the account.",
          "actions": "Actions to be performed during the flash loan operation."
        }
      },
      "owner()": {
        "details": "Returns the address of the current owner."
      },
      "requestTransferOwnership(address)": {
        "details": "Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`). Can only be called by the current owner."
      },
      "setMarket(address,uint256)": {
        "details": "Updates the ERC20 token address.",
        "params": {
          "_erc20": "The new address of the ERC20 token."
        }
      }
    },
    "title": "MockDyDxFlashloan",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "drainERC20(address,uint256,address)": {
        "notice": "used by the owner account to be able to drain sturck ERC20 tokens for revenue share for the locked  collateral NFT-s"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 25956,
        "contract": "contracts/test/MockDyDxFlashloan.sol:MockDyDxFlashloan",
        "label": "_owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 25958,
        "contract": "contracts/test/MockDyDxFlashloan.sol:MockDyDxFlashloan",
        "label": "_ownerCandidate",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 22285,
        "contract": "contracts/test/MockDyDxFlashloan.sol:MockDyDxFlashloan",
        "label": "markets",
        "offset": 0,
        "slot": "2",
        "type": "t_mapping(t_uint256,t_address)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_mapping(t_uint256,t_address)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => address)",
        "numberOfBytes": "32",
        "value": "t_address"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      }
    }
  }
}