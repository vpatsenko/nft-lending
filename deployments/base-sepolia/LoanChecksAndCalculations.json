{
  "address": "0x7609BaBeD95fbf29410915a0E0e74635037bf1eF",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        },
        {
          "internalType": "contract INftfiHub",
          "name": "_hub",
          "type": "INftfiHub"
        }
      ],
      "name": "checkLoanIdValidity",
      "outputs": [],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_interestDue",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_adminFeeInBasisPoints",
          "type": "uint256"
        }
      ],
      "name": "computeAdminFee",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "pure",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        },
        {
          "internalType": "contract INftfiHub",
          "name": "_hub",
          "type": "INftfiHub"
        }
      ],
      "name": "payBackChecks",
      "outputs": [],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "loanPrincipalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "maximumRepaymentAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "nftCollateralId",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "loanERC20Denomination",
              "type": "address"
            },
            {
              "internalType": "uint32",
              "name": "loanDuration",
              "type": "uint32"
            },
            {
              "internalType": "uint16",
              "name": "loanInterestRateForDurationInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint16",
              "name": "loanAdminFeeInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint256",
              "name": "originationFee",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "nftCollateralWrapper",
              "type": "address"
            },
            {
              "internalType": "uint64",
              "name": "loanStartTime",
              "type": "uint64"
            },
            {
              "internalType": "address",
              "name": "nftCollateralContract",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "borrower",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "lender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "escrow",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isProRata",
              "type": "bool"
            }
          ],
          "internalType": "struct LoanData.LoanTerms",
          "name": "_loan",
          "type": "tuple"
        },
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        },
        {
          "internalType": "uint32",
          "name": "_newLoanDuration",
          "type": "uint32"
        },
        {
          "internalType": "uint256",
          "name": "_newMaximumRepaymentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_lenderNonce",
          "type": "uint256"
        },
        {
          "internalType": "contract INftfiHub",
          "name": "_hub",
          "type": "INftfiHub"
        }
      ],
      "name": "renegotiationChecks",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0x45f8961ec5645991722fed51d1ed066c9973c6236af1d54e826bd495ec4f2596",
  "receipt": {
    "to": null,
    "from": "0x02e037F56728E947e92Af2c05baF7FeF387Ddd06",
    "contractAddress": "0x7609BaBeD95fbf29410915a0E0e74635037bf1eF",
    "transactionIndex": 8,
    "gasUsed": "972683",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xa848b00181b44ba8c57df4732e6fd1d4c62ffba99b029550fba60a1765a3987b",
    "transactionHash": "0x45f8961ec5645991722fed51d1ed066c9973c6236af1d54e826bd495ec4f2596",
    "logs": [],
    "blockNumber": 16651355,
    "cumulativeGasUsed": "1239269",
    "status": 1,
    "byzantium": true
  },
  "args": [],
  "numDeployments": 2,
  "solcInputHash": "bab281e5640fb4f8a58586b3f548739e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"},{\"internalType\":\"contract INftfiHub\",\"name\":\"_hub\",\"type\":\"INftfiHub\"}],\"name\":\"checkLoanIdValidity\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_interestDue\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_adminFeeInBasisPoints\",\"type\":\"uint256\"}],\"name\":\"computeAdminFee\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"pure\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"},{\"internalType\":\"contract INftfiHub\",\"name\":\"_hub\",\"type\":\"INftfiHub\"}],\"name\":\"payBackChecks\",\"outputs\":[],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"loanERC20Denomination\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"loanDuration\",\"type\":\"uint32\"},{\"internalType\":\"uint16\",\"name\":\"loanInterestRateForDurationInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"loanAdminFeeInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint256\",\"name\":\"originationFee\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nftCollateralWrapper\",\"type\":\"address\"},{\"internalType\":\"uint64\",\"name\":\"loanStartTime\",\"type\":\"uint64\"},{\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"escrow\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isProRata\",\"type\":\"bool\"}],\"internalType\":\"struct LoanData.LoanTerms\",\"name\":\"_loan\",\"type\":\"tuple\"},{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"},{\"internalType\":\"uint32\",\"name\":\"_newLoanDuration\",\"type\":\"uint32\"},{\"internalType\":\"uint256\",\"name\":\"_newMaximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lenderNonce\",\"type\":\"uint256\"},{\"internalType\":\"contract INftfiHub\",\"name\":\"_hub\",\"type\":\"INftfiHub\"}],\"name\":\"renegotiationChecks\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"NFTfi\",\"kind\":\"dev\",\"methods\":{\"computeAdminFee(uint256,uint256)\":{\"params\":{\"_adminFeeInBasisPoints\":\"- The percent (measured in basis points) of the interest earned that will be taken as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest earned.\",\"_interestDue\":\"- The amount of interest due, measured in the smallest quantity of the ERC20 currency being used to pay the interest.\"},\"returns\":{\"_0\":\"The quantity of ERC20 currency (measured in smalled units of that ERC20 currency) that is due as an admin fee.\"}},\"payBackChecks(uint32,INftfiHub)\":{\"details\":\"Function that performs some validation checks before trying to repay a loan\",\"params\":{\"_loanId\":\"- The id of the loan being repaid\"}},\"renegotiationChecks(LoanData.LoanTerms,uint32,uint32,uint256,uint256,INftfiHub)\":{\"details\":\"Performs some validation checks before trying to renegotiate a loan. Needed to avoid stack too deep.\",\"params\":{\"_lenderNonce\":\"- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.\",\"_loan\":\"- The main Loan Terms struct.\",\"_loanId\":\"- The unique identifier for the loan to be renegotiated\",\"_newLoanDuration\":\"- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.\",\"_newMaximumRepaymentAmount\":\"- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early.\"},\"returns\":{\"_0\":\"Borrower and Lender addresses\"}}},\"title\":\"LoanChecksAndCalculations\",\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"computeAdminFee(uint256,uint256)\":{\"notice\":\"A convenience function computing the adminFee taken from a specified quantity of interest.\"}},\"notice\":\"Helper library for LoanBase\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/loans/loanTypes/LoanChecksAndCalculations.sol\":\"LoanChecksAndCalculations\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":900},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/token/ERC721/IERC721.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC721/IERC721.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721 is IERC165 {\\n    /**\\n     * @dev Emitted when `tokenId` token is transferred from `from` to `to`.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.\\n     */\\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.\\n     */\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Returns the number of tokens in ``owner``'s account.\\n     */\\n    function balanceOf(address owner) external view returns (uint256 balance);\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId, bytes calldata data) external;\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must have been allowed to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Transfers `tokenId` token from `from` to `to`.\\n     *\\n     * WARNING: Note that the caller is responsible to confirm that the recipient is capable of receiving ERC721\\n     * or else they may be permanently lost. Usage of {safeTransferFrom} prevents loss, though the caller must\\n     * understand this adds an external call which potentially creates a reentrancy vulnerability.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Gives permission to `to` to transfer `tokenId` token to another account.\\n     * The approval is cleared when the token is transferred.\\n     *\\n     * Only a single account can be approved at a time, so approving the zero address clears previous approvals.\\n     *\\n     * Requirements:\\n     *\\n     * - The caller must own the token or be an approved operator.\\n     * - `tokenId` must exist.\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Approve or remove `operator` as an operator for the caller.\\n     * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.\\n     *\\n     * Requirements:\\n     *\\n     * - The `operator` cannot be the caller.\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function setApprovalForAll(address operator, bool approved) external;\\n\\n    /**\\n     * @dev Returns the account approved for `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n    /**\\n     * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.\\n     *\\n     * See {setApprovalForAll}\\n     */\\n    function isApprovedForAll(address owner, address operator) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x5bce51e11f7d194b79ea59fe00c9e8de9fa2c5530124960f29a24d4c740a3266\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/introspection/IERC165.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\"},\"contracts/interfaces/ILoanCoordinator.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title ILoanCoordinator\\n * @author NFTfi\\n * @dev LoanCoordinator interface.\\n */\\ninterface ILoanCoordinator {\\n    enum StatusType {\\n        NOT_EXISTS,\\n        NEW,\\n        REPAID,\\n        LIQUIDATED\\n    }\\n\\n    /**\\n     * @notice This struct contains data related to a loan\\n     *\\n     * @param smartNftId - The id of both the promissory note and obligation receipt.\\n     * @param status - The status in which the loan currently is.\\n     * @param loanContract - Address of the contract that created the loan.\\n     */\\n    struct Loan {\\n        address loanContract;\\n        uint64 smartNftId;\\n        StatusType status;\\n    }\\n\\n    function registerLoan() external returns (uint32);\\n\\n    function resetSmartNfts(uint32 _loanId) external;\\n\\n    function mintObligationReceipt(uint32 _loanId, address _borrower) external;\\n\\n    function mintPromissoryNote(uint32 _loanId, address _lender) external;\\n\\n    function resolveLoan(uint32 _loanId, bool liquidated) external;\\n\\n    function promissoryNoteToken() external view returns (address);\\n\\n    function obligationReceiptToken() external view returns (address);\\n\\n    function getLoanData(uint32 _loanId) external view returns (Loan memory);\\n\\n    function isValidLoanId(uint32 _loanId, address _loanContract) external view returns (bool);\\n\\n    function getDefaultLoanContractForOfferType(bytes32 _offerType) external view returns (address);\\n\\n    function getTypeOfLoanContract(address _loanContract) external view returns (bytes32);\\n\\n    function checkNonce(address _user, uint256 _nonce) external view;\\n\\n    function checkAndInvalidateNonce(address _user, uint256 _nonce) external;\\n}\\n\",\"keccak256\":\"0xf407ba508babdbe4ef3bdda3278240cf30c7bba1b49e8cf202a80b77c949d6c0\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/INftfiHub.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title INftfiHub\\n * @author NFTfi\\n * @dev NftfiHub interface\\n */\\ninterface INftfiHub {\\n    function setContract(string calldata _contractKey, address _contractAddress) external;\\n\\n    function getContract(bytes32 _contractKey) external view returns (address);\\n}\\n\",\"keccak256\":\"0x65320571d7049eefd4bfd6dcff48b752a4a01c56a23ae7acf0f3b7183b9b08db\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/ILoanBase.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {LoanData} from \\\"./LoanData.sol\\\";\\n\\ninterface ILoanBase {\\n    function maximumLoanDuration() external view returns (uint256);\\n\\n    function adminFeeInBasisPoints() external view returns (uint16);\\n\\n    // solhint-disable-next-line func-name-mixedcase\\n    function LOAN_COORDINATOR() external view returns (bytes32);\\n\\n    function getLoanTerms(uint32) external view returns (LoanData.LoanTerms memory);\\n\\n    function loanRepaidOrLiquidated(uint32) external view returns (bool);\\n\\n    function getWhetherRenegotiationNonceHasBeenUsedForUser(address _user, uint256 _nonce) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x39ce15955256ecff9277a34e4346e8a505f32ebaf1a50026a183bd5a22e1dd86\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/LoanChecksAndCalculations.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {ILoanBase} from \\\"./ILoanBase.sol\\\";\\nimport {LoanData} from \\\"./LoanData.sol\\\";\\nimport {ILoanCoordinator} from \\\"../../interfaces/ILoanCoordinator.sol\\\";\\nimport {INftfiHub} from \\\"../../interfaces/INftfiHub.sol\\\";\\n\\nimport {IERC721} from \\\"@openzeppelin/contracts/token/ERC721/IERC721.sol\\\";\\n\\n/**\\n * @title  LoanChecksAndCalculations\\n * @author NFTfi\\n * @notice Helper library for LoanBase\\n */\\nlibrary LoanChecksAndCalculations {\\n    uint16 private constant HUNDRED_PERCENT = 10000;\\n\\n    /**\\n     * @dev Function that performs some validation checks before trying to repay a loan\\n     *\\n     * @param _loanId - The id of the loan being repaid\\n     */\\n    function payBackChecks(uint32 _loanId, INftfiHub _hub) external view {\\n        checkLoanIdValidity(_loanId, _hub);\\n        // Sanity check that payBackLoan() and liquidateOverdueLoan() have never been called on this loanId.\\n        // Depending on how the rest of the code turns out, this check may be unnecessary.\\n        // solhint-disable-next-line custom-errors\\n        require(!ILoanBase(address(this)).loanRepaidOrLiquidated(_loanId), \\\"Loan already repaid/liquidated\\\");\\n        // Fetch loan details from storage, but store them in memory for the sake of saving gas.\\n\\n        LoanData.LoanTerms memory lt = ILoanBase(address(this)).getLoanTerms(_loanId);\\n        // When a loan exceeds the loan term, it is expired. At this stage the Lender can call Liquidate Loan to resolve\\n        // the loan.\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= (uint256(lt.loanStartTime) + uint256(lt.loanDuration)), \\\"Loan is expired\\\");\\n    }\\n\\n    function checkLoanIdValidity(uint32 _loanId, INftfiHub _hub) public view {\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            ILoanCoordinator(_hub.getContract(ILoanBase(address(this)).LOAN_COORDINATOR())).isValidLoanId(\\n                _loanId,\\n                address(this)\\n            ),\\n            \\\"invalid loanId\\\"\\n        );\\n    }\\n\\n    /**\\n     * @dev Performs some validation checks before trying to renegotiate a loan.\\n     * Needed to avoid stack too deep.\\n     *\\n     * @param _loan - The main Loan Terms struct.\\n     * @param _loanId - The unique identifier for the loan to be renegotiated\\n     * @param _newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param _newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param _lenderNonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are\\n     * referring instead to nonces that are used by both the lender and the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @return Borrower and Lender addresses\\n     */\\n    function renegotiationChecks(\\n        LoanData.LoanTerms memory _loan,\\n        uint32 _loanId,\\n        uint32 _newLoanDuration,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _lenderNonce,\\n        INftfiHub _hub\\n    ) external view returns (address, address) {\\n        checkLoanIdValidity(_loanId, _hub);\\n        ILoanCoordinator loanCoordinator = ILoanCoordinator(\\n            _hub.getContract(ILoanBase(address(this)).LOAN_COORDINATOR())\\n        );\\n        uint256 smartNftId = loanCoordinator.getLoanData(_loanId).smartNftId;\\n\\n        address borrower;\\n\\n        if (_loan.borrower != address(0)) {\\n            borrower = _loan.borrower;\\n        } else {\\n            borrower = IERC721(loanCoordinator.obligationReceiptToken()).ownerOf(smartNftId);\\n        }\\n\\n        // solhint-disable-next-line custom-errors\\n        require(msg.sender == borrower, \\\"Only borrower can initiate\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= (uint256(_loan.loanStartTime) + _newLoanDuration), \\\"New duration already expired\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            uint256(_newLoanDuration) <= ILoanBase(address(this)).maximumLoanDuration(),\\n            \\\"New duration exceeds maximum loan duration\\\"\\n        );\\n        // solhint-disable-next-line custom-errors\\n        require(!ILoanBase(address(this)).loanRepaidOrLiquidated(_loanId), \\\"Loan already repaid/liquidated\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            _newMaximumRepaymentAmount >= _loan.loanPrincipalAmount,\\n            \\\"Negative interest rate loans are not allowed.\\\"\\n        );\\n\\n        // Fetch current owner of loan promissory note.\\n\\n        address lender;\\n        if (_loan.lender != address(0)) {\\n            lender = _loan.lender;\\n        } else {\\n            lender = IERC721(loanCoordinator.promissoryNoteToken()).ownerOf(smartNftId);\\n        }\\n\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            !ILoanBase(address(this)).getWhetherRenegotiationNonceHasBeenUsedForUser(lender, _lenderNonce),\\n            \\\"Lender nonce invalid\\\"\\n        );\\n\\n        return (borrower, lender);\\n    }\\n\\n    /**\\n     * @notice A convenience function computing the adminFee taken from a specified quantity of interest.\\n     *\\n     * @param _interestDue - The amount of interest due, measured in the smallest quantity of the ERC20 currency being\\n     * used to pay the interest.\\n     * @param _adminFeeInBasisPoints - The percent (measured in basis points) of the interest earned that will be taken\\n     * as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an\\n     * attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest\\n     * earned.\\n     *\\n     * @return The quantity of ERC20 currency (measured in smalled units of that ERC20 currency) that is due as an admin\\n     * fee.\\n     */\\n    function computeAdminFee(uint256 _interestDue, uint256 _adminFeeInBasisPoints) external pure returns (uint256) {\\n        return (_interestDue * _adminFeeInBasisPoints) / HUNDRED_PERCENT;\\n    }\\n}\\n\",\"keccak256\":\"0x06a60c1d336793407881d1aca891b4e49226f6e9a311c70c244b80e36e3d448a\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/LoanData.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title  LoanData\\n * @author NFTfi\\n * @notice An interface containg the main Loan struct shared by Direct Loans types.\\n */\\ninterface LoanData {\\n    /* ********** */\\n    /* DATA TYPES */\\n    /* ********** */\\n\\n    /**\\n     * @notice The main Loan Terms struct. This data is saved upon loan creation.\\n     *\\n     * @param loanERC20Denomination - The address of the ERC20 contract of the currency being used as principal/interest\\n     * for this loan.\\n     * @param loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param maximumRepaymentAmount - The maximum amount of money that the borrower would be required to retrieve their\\n     * collateral, measured in the smallest units of the ERC20 currency used for the loan.\\n     * @param nftCollateralContract - The address of the the NFT collateral contract.\\n     * @param nftCollateralWrapper - The NFTfi wrapper of the NFT collateral contract.\\n     * @param nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param loanStartTime - The block.timestamp when the loan first began (measured in seconds).\\n     * @param loanDuration - The amount of time (measured in seconds) that can elapse before the lender can liquidate\\n     * the loan and seize the underlying collateral NFT.\\n     * @param loanAdminFee - The percent (measured in basis points) of the interest earned that will be\\n     * taken as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an\\n     * attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest\\n     * earned.\\n     * @param originationFee - The amount of tokens which will stay in lender's wallet as origination fee\\n     * @param borrower\\n     * @param lender\\n     * @param escrow - address of the escrow contract the collateral is stored in\\n     * @param isProRata - indicates if a loan is pro-rata or not\\n     */\\n\\n    struct LoanTerms {\\n        uint256 loanPrincipalAmount;\\n        uint256 maximumRepaymentAmount;\\n        uint256 nftCollateralId;\\n        address loanERC20Denomination;\\n        uint32 loanDuration;\\n        uint16 loanInterestRateForDurationInBasisPoints;\\n        uint16 loanAdminFeeInBasisPoints;\\n        uint256 originationFee;\\n        address nftCollateralWrapper;\\n        uint64 loanStartTime;\\n        address nftCollateralContract;\\n        address borrower;\\n        address lender;\\n        address escrow;\\n        bool isProRata;\\n    }\\n\\n    /**\\n     * @notice The offer made by the lender. Used as parameter on both acceptOffer (initiated by the borrower)\\n     *\\n     * @param loanERC20Denomination - The address of the ERC20 contract of the currency being used as principal/interest\\n     * for this loan.\\n     * @param loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param maximumRepaymentAmount - The maximum amount of money that the borrower would be required to retrieve their\\n     * collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always\\n     * have to pay this amount to retrieve their collateral, regardless of whether they repay early.\\n     * @param nftCollateralContract - The address of the ERC721 contract of the NFT collateral.\\n     * @param nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param loanDuration - The amount of time (measured in seconds) that can elapse before the lender can liquidate\\n     * the loan and seize the underlying collateral NFT.\\n     * @param isProRata - indicates if a loan is pro-rata or not\\n     * @param originationFee - amount which will stay in lender's wallet\\n     */\\n    struct Offer {\\n        uint256 loanPrincipalAmount;\\n        uint256 maximumRepaymentAmount;\\n        uint256 nftCollateralId;\\n        address nftCollateralContract;\\n        uint32 loanDuration;\\n        address loanERC20Denomination;\\n        bool isProRata;\\n        uint256 originationFee;\\n    }\\n\\n    /**\\n     * @notice Signature related params. Used as parameter on both acceptOffer (containing borrower signature)\\n     *\\n     * @param signer - The address of the signer. The borrower for `acceptOffer`\\n     * @param nonce - The nonce referred here is not the same as an Ethereum account's nonce.\\n     * We are referring instead to a nonce that is used by the lender or the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonce can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per\\u00a0user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @param expiry - Date when the signature expires\\n     * @param signature - The ECDSA signature of the borrower or the lender, obtained off-chain ahead of time, signing\\n     * the following combination of parameters:\\n     * - Lender:\\n     *   - Offer.loanERC20Denomination\\n     *   - Offer.loanPrincipalAmount\\n     *   - Offer.maximumRepaymentAmount\\n     *   - Offer.nftCollateralContract\\n     *   - Offer.nftCollateralId\\n     *   - Offer.loanDuration\\n     *   - Offer.isProRata\\n     *   - Signature.signer,\\n     *   - Signature.nonce,\\n     *   - Signature.expiry,\\n     *   - address of the loan type contract\\n     *   - chainId\\n     */\\n    struct Signature {\\n        uint256 nonce;\\n        uint256 expiry;\\n        address signer;\\n        bytes signature;\\n    }\\n\\n    /**\\n     * inclusive min and max Id ranges for collection offers on collections,\\n     * like ArtBlocks, where multiple collections are defined on one contract differentiated by id-ranges\\n     */\\n    struct CollectionIdRange {\\n        uint256 minId;\\n        uint256 maxId;\\n    }\\n}\\n\",\"keccak256\":\"0x9c67fc99d5c6c4adbab438823a798c7751c6421470a5f11744f0630effb32145\",\"license\":\"BUSL-1.1\"}},\"version\":1}",
  "bytecode": "0x6110ab61003a600b82828239805160001a60731461002d57634e487b7160e01b600052600060045260246000fd5b30600052607381538281f3fe73000000000000000000000000000000000000000030146080604052600436106100565760003560e01c80632ad659af1461005b5780636c9a157614610081578063b5ec526314610096578063b7fa1f62146100c9575b600080fd5b61006e610069366004610b90565b6100dc565b6040519081526020015b60405180910390f35b61009461008f366004610bf7565b6100fe565b005b6100a96100a4366004610cbd565b6102bc565b604080516001600160a01b03938416815292909116602083015201610078565b6100946100d7366004610bf7565b6109e1565b60006127106100eb8385610e37565b6100f59190610e4e565b90505b92915050565b61010882826109e1565b60405163038bf9d560e11b815263ffffffff831660048201523090630717f3aa90602401602060405180830381865afa158015610149573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061016d9190610e7b565b156101bf5760405162461bcd60e51b815260206004820152601e60248201527f4c6f616e20616c7265616479207265706169642f6c697175696461746564000060448201526064015b60405180910390fd5b6040517f0316abd200000000000000000000000000000000000000000000000000000000815263ffffffff831660048201526000903090630316abd2906024016101e060405180830381865afa15801561021d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102419190610ecb565b9050806080015163ffffffff1681610120015167ffffffffffffffff166102689190610fd1565b4211156102b75760405162461bcd60e51b815260206004820152600f60248201527f4c6f616e2069732065787069726564000000000000000000000000000000000060448201526064016101b6565b505050565b6000806102c987846109e1565b6000836001600160a01b031663e16c7d98306001600160a01b03166377cfa9916040518163ffffffff1660e01b8152600401602060405180830381865afa158015610318573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061033c9190610fe4565b6040518263ffffffff1660e01b815260040161035a91815260200190565b602060405180830381865afa158015610377573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039b9190610ffd565b6040517fe6c5a54100000000000000000000000000000000000000000000000000000000815263ffffffff8a1660048201529091506000906001600160a01b0383169063e6c5a54190602401606060405180830381865afa158015610404573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610428919061101a565b6020015167ffffffffffffffff1690506000806001600160a01b03168b61016001516001600160a01b03161461046457506101608a0151610537565b826001600160a01b0316638208e76c6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104a2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104c69190610ffd565b6001600160a01b0316636352211e836040518263ffffffff1660e01b81526004016104f391815260200190565b602060405180830381865afa158015610510573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105349190610ffd565b90505b336001600160a01b0382161461058f5760405162461bcd60e51b815260206004820152601a60248201527f4f6e6c7920626f72726f7765722063616e20696e69746961746500000000000060448201526064016101b6565b8863ffffffff168b610120015167ffffffffffffffff166105b09190610fd1565b4211156105ff5760405162461bcd60e51b815260206004820152601c60248201527f4e6577206475726174696f6e20616c726561647920657870697265640000000060448201526064016101b6565b306001600160a01b031663192b355d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561063d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106619190610fe4565b8963ffffffff1611156106dc5760405162461bcd60e51b815260206004820152602a60248201527f4e6577206475726174696f6e2065786365656473206d6178696d756d206c6f6160448201527f6e206475726174696f6e0000000000000000000000000000000000000000000060648201526084016101b6565b60405163038bf9d560e11b815263ffffffff8b1660048201523090630717f3aa90602401602060405180830381865afa15801561071d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107419190610e7b565b1561078e5760405162461bcd60e51b815260206004820152601e60248201527f4c6f616e20616c7265616479207265706169642f6c697175696461746564000060448201526064016101b6565b8a518810156108055760405162461bcd60e51b815260206004820152602d60248201527f4e6567617469766520696e7465726573742072617465206c6f616e732061726560448201527f206e6f7420616c6c6f7765642e0000000000000000000000000000000000000060648201526084016101b6565b6101808b01516000906001600160a01b03161561082857506101808b01516108fb565b836001600160a01b0316634fbe68a06040518163ffffffff1660e01b8152600401602060405180830381865afa158015610866573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061088a9190610ffd565b6001600160a01b0316636352211e846040518263ffffffff1660e01b81526004016108b791815260200190565b602060405180830381865afa1580156108d4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f89190610ffd565b90505b6040517fe7b029290000000000000000000000000000000000000000000000000000000081526001600160a01b038216600482015260248101899052309063e7b0292990604401602060405180830381865afa15801561095f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109839190610e7b565b156109d05760405162461bcd60e51b815260206004820152601460248201527f4c656e646572206e6f6e636520696e76616c696400000000000000000000000060448201526064016101b6565b909b909a5098505050505050505050565b806001600160a01b031663e16c7d98306001600160a01b03166377cfa9916040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a2e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a529190610fe4565b6040518263ffffffff1660e01b8152600401610a7091815260200190565b602060405180830381865afa158015610a8d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ab19190610ffd565b6040517f52a067e500000000000000000000000000000000000000000000000000000000815263ffffffff841660048201523060248201526001600160a01b0391909116906352a067e590604401602060405180830381865afa158015610b1c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b409190610e7b565b610b8c5760405162461bcd60e51b815260206004820152600e60248201527f696e76616c6964206c6f616e496400000000000000000000000000000000000060448201526064016101b6565b5050565b60008060408385031215610ba357600080fd5b50508035926020909101359150565b63ffffffff81168114610bc457600080fd5b50565b8035610bd281610bb2565b919050565b6001600160a01b0381168114610bc457600080fd5b8035610bd281610bd7565b60008060408385031215610c0a57600080fd5b8235610c1581610bb2565b91506020830135610c2581610bd7565b809150509250929050565b6040516101e0810167ffffffffffffffff81118282101715610c6257634e487b7160e01b600052604160045260246000fd5b60405290565b61ffff81168114610bc457600080fd5b8035610bd281610c68565b67ffffffffffffffff81168114610bc457600080fd5b8035610bd281610c83565b8015158114610bc457600080fd5b8035610bd281610ca4565b600080600080600080868803610280811215610cd857600080fd5b6101e080821215610ce857600080fd5b610cf0610c30565b9150883582526020890135602083015260408901356040830152610d1660608a01610bec565b6060830152610d2760808a01610bc7565b6080830152610d3860a08a01610c78565b60a0830152610d4960c08a01610c78565b60c083015260e089013560e0830152610100610d66818b01610bec565b90830152610120610d788a8201610c99565b90830152610140610d8a8a8201610bec565b90830152610160610d9c8a8201610bec565b90830152610180610dae8a8201610bec565b908301526101a0610dc08a8201610bec565b908301526101c0610dd28a8201610cb2565b8184015250819750610de5818a01610bc7565b96505050610df66102008801610bc7565b935061022087013592506102408701359150610e156102608801610bec565b90509295509295509295565b634e487b7160e01b600052601160045260246000fd5b80820281158282048414176100f8576100f8610e21565b600082610e6b57634e487b7160e01b600052601260045260246000fd5b500490565b8051610bd281610ca4565b600060208284031215610e8d57600080fd5b8151610e9881610ca4565b9392505050565b8051610bd281610bd7565b8051610bd281610bb2565b8051610bd281610c68565b8051610bd281610c83565b60006101e08284031215610ede57600080fd5b610ee6610c30565b825181526020830151602082015260408301516040820152610f0a60608401610e9f565b6060820152610f1b60808401610eaa565b6080820152610f2c60a08401610eb5565b60a0820152610f3d60c08401610eb5565b60c082015260e083015160e0820152610100610f5a818501610e9f565b90820152610120610f6c848201610ec0565b90820152610140610f7e848201610e9f565b90820152610160610f90848201610e9f565b90820152610180610fa2848201610e9f565b908201526101a0610fb4848201610e9f565b908201526101c0610fc6848201610e70565b908201529392505050565b808201808211156100f8576100f8610e21565b600060208284031215610ff657600080fd5b5051919050565b60006020828403121561100f57600080fd5b8151610e9881610bd7565b60006060828403121561102c57600080fd5b6040516060810181811067ffffffffffffffff8211171561105d57634e487b7160e01b600052604160045260246000fd5b604052825161106b81610bd7565b8152602083015161107b81610c83565b602082015260408301516004811061109257600080fd5b6040820152939250505056fea164736f6c6343000813000a",
  "deployedBytecode": "0x73000000000000000000000000000000000000000030146080604052600436106100565760003560e01c80632ad659af1461005b5780636c9a157614610081578063b5ec526314610096578063b7fa1f62146100c9575b600080fd5b61006e610069366004610b90565b6100dc565b6040519081526020015b60405180910390f35b61009461008f366004610bf7565b6100fe565b005b6100a96100a4366004610cbd565b6102bc565b604080516001600160a01b03938416815292909116602083015201610078565b6100946100d7366004610bf7565b6109e1565b60006127106100eb8385610e37565b6100f59190610e4e565b90505b92915050565b61010882826109e1565b60405163038bf9d560e11b815263ffffffff831660048201523090630717f3aa90602401602060405180830381865afa158015610149573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061016d9190610e7b565b156101bf5760405162461bcd60e51b815260206004820152601e60248201527f4c6f616e20616c7265616479207265706169642f6c697175696461746564000060448201526064015b60405180910390fd5b6040517f0316abd200000000000000000000000000000000000000000000000000000000815263ffffffff831660048201526000903090630316abd2906024016101e060405180830381865afa15801561021d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102419190610ecb565b9050806080015163ffffffff1681610120015167ffffffffffffffff166102689190610fd1565b4211156102b75760405162461bcd60e51b815260206004820152600f60248201527f4c6f616e2069732065787069726564000000000000000000000000000000000060448201526064016101b6565b505050565b6000806102c987846109e1565b6000836001600160a01b031663e16c7d98306001600160a01b03166377cfa9916040518163ffffffff1660e01b8152600401602060405180830381865afa158015610318573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061033c9190610fe4565b6040518263ffffffff1660e01b815260040161035a91815260200190565b602060405180830381865afa158015610377573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061039b9190610ffd565b6040517fe6c5a54100000000000000000000000000000000000000000000000000000000815263ffffffff8a1660048201529091506000906001600160a01b0383169063e6c5a54190602401606060405180830381865afa158015610404573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610428919061101a565b6020015167ffffffffffffffff1690506000806001600160a01b03168b61016001516001600160a01b03161461046457506101608a0151610537565b826001600160a01b0316638208e76c6040518163ffffffff1660e01b8152600401602060405180830381865afa1580156104a2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104c69190610ffd565b6001600160a01b0316636352211e836040518263ffffffff1660e01b81526004016104f391815260200190565b602060405180830381865afa158015610510573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105349190610ffd565b90505b336001600160a01b0382161461058f5760405162461bcd60e51b815260206004820152601a60248201527f4f6e6c7920626f72726f7765722063616e20696e69746961746500000000000060448201526064016101b6565b8863ffffffff168b610120015167ffffffffffffffff166105b09190610fd1565b4211156105ff5760405162461bcd60e51b815260206004820152601c60248201527f4e6577206475726174696f6e20616c726561647920657870697265640000000060448201526064016101b6565b306001600160a01b031663192b355d6040518163ffffffff1660e01b8152600401602060405180830381865afa15801561063d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106619190610fe4565b8963ffffffff1611156106dc5760405162461bcd60e51b815260206004820152602a60248201527f4e6577206475726174696f6e2065786365656473206d6178696d756d206c6f6160448201527f6e206475726174696f6e0000000000000000000000000000000000000000000060648201526084016101b6565b60405163038bf9d560e11b815263ffffffff8b1660048201523090630717f3aa90602401602060405180830381865afa15801561071d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107419190610e7b565b1561078e5760405162461bcd60e51b815260206004820152601e60248201527f4c6f616e20616c7265616479207265706169642f6c697175696461746564000060448201526064016101b6565b8a518810156108055760405162461bcd60e51b815260206004820152602d60248201527f4e6567617469766520696e7465726573742072617465206c6f616e732061726560448201527f206e6f7420616c6c6f7765642e0000000000000000000000000000000000000060648201526084016101b6565b6101808b01516000906001600160a01b03161561082857506101808b01516108fb565b836001600160a01b0316634fbe68a06040518163ffffffff1660e01b8152600401602060405180830381865afa158015610866573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061088a9190610ffd565b6001600160a01b0316636352211e846040518263ffffffff1660e01b81526004016108b791815260200190565b602060405180830381865afa1580156108d4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108f89190610ffd565b90505b6040517fe7b029290000000000000000000000000000000000000000000000000000000081526001600160a01b038216600482015260248101899052309063e7b0292990604401602060405180830381865afa15801561095f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109839190610e7b565b156109d05760405162461bcd60e51b815260206004820152601460248201527f4c656e646572206e6f6e636520696e76616c696400000000000000000000000060448201526064016101b6565b909b909a5098505050505050505050565b806001600160a01b031663e16c7d98306001600160a01b03166377cfa9916040518163ffffffff1660e01b8152600401602060405180830381865afa158015610a2e573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a529190610fe4565b6040518263ffffffff1660e01b8152600401610a7091815260200190565b602060405180830381865afa158015610a8d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610ab19190610ffd565b6040517f52a067e500000000000000000000000000000000000000000000000000000000815263ffffffff841660048201523060248201526001600160a01b0391909116906352a067e590604401602060405180830381865afa158015610b1c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b409190610e7b565b610b8c5760405162461bcd60e51b815260206004820152600e60248201527f696e76616c6964206c6f616e496400000000000000000000000000000000000060448201526064016101b6565b5050565b60008060408385031215610ba357600080fd5b50508035926020909101359150565b63ffffffff81168114610bc457600080fd5b50565b8035610bd281610bb2565b919050565b6001600160a01b0381168114610bc457600080fd5b8035610bd281610bd7565b60008060408385031215610c0a57600080fd5b8235610c1581610bb2565b91506020830135610c2581610bd7565b809150509250929050565b6040516101e0810167ffffffffffffffff81118282101715610c6257634e487b7160e01b600052604160045260246000fd5b60405290565b61ffff81168114610bc457600080fd5b8035610bd281610c68565b67ffffffffffffffff81168114610bc457600080fd5b8035610bd281610c83565b8015158114610bc457600080fd5b8035610bd281610ca4565b600080600080600080868803610280811215610cd857600080fd5b6101e080821215610ce857600080fd5b610cf0610c30565b9150883582526020890135602083015260408901356040830152610d1660608a01610bec565b6060830152610d2760808a01610bc7565b6080830152610d3860a08a01610c78565b60a0830152610d4960c08a01610c78565b60c083015260e089013560e0830152610100610d66818b01610bec565b90830152610120610d788a8201610c99565b90830152610140610d8a8a8201610bec565b90830152610160610d9c8a8201610bec565b90830152610180610dae8a8201610bec565b908301526101a0610dc08a8201610bec565b908301526101c0610dd28a8201610cb2565b8184015250819750610de5818a01610bc7565b96505050610df66102008801610bc7565b935061022087013592506102408701359150610e156102608801610bec565b90509295509295509295565b634e487b7160e01b600052601160045260246000fd5b80820281158282048414176100f8576100f8610e21565b600082610e6b57634e487b7160e01b600052601260045260246000fd5b500490565b8051610bd281610ca4565b600060208284031215610e8d57600080fd5b8151610e9881610ca4565b9392505050565b8051610bd281610bd7565b8051610bd281610bb2565b8051610bd281610c68565b8051610bd281610c83565b60006101e08284031215610ede57600080fd5b610ee6610c30565b825181526020830151602082015260408301516040820152610f0a60608401610e9f565b6060820152610f1b60808401610eaa565b6080820152610f2c60a08401610eb5565b60a0820152610f3d60c08401610eb5565b60c082015260e083015160e0820152610100610f5a818501610e9f565b90820152610120610f6c848201610ec0565b90820152610140610f7e848201610e9f565b90820152610160610f90848201610e9f565b90820152610180610fa2848201610e9f565b908201526101a0610fb4848201610e9f565b908201526101c0610fc6848201610e70565b908201529392505050565b808201808211156100f8576100f8610e21565b600060208284031215610ff657600080fd5b5051919050565b60006020828403121561100f57600080fd5b8151610e9881610bd7565b60006060828403121561102c57600080fd5b6040516060810181811067ffffffffffffffff8211171561105d57634e487b7160e01b600052604160045260246000fd5b604052825161106b81610bd7565b8152602083015161107b81610c83565b602082015260408301516004811061109257600080fd5b6040820152939250505056fea164736f6c6343000813000a",
  "devdoc": {
    "author": "NFTfi",
    "kind": "dev",
    "methods": {
      "computeAdminFee(uint256,uint256)": {
        "params": {
          "_adminFeeInBasisPoints": "- The percent (measured in basis points) of the interest earned that will be taken as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest earned.",
          "_interestDue": "- The amount of interest due, measured in the smallest quantity of the ERC20 currency being used to pay the interest."
        },
        "returns": {
          "_0": "The quantity of ERC20 currency (measured in smalled units of that ERC20 currency) that is due as an admin fee."
        }
      },
      "payBackChecks(uint32,INftfiHub)": {
        "details": "Function that performs some validation checks before trying to repay a loan",
        "params": {
          "_loanId": "- The id of the loan being repaid"
        }
      },
      "renegotiationChecks(LoanData.LoanTerms,uint32,uint32,uint256,uint256,INftfiHub)": {
        "details": "Performs some validation checks before trying to renegotiate a loan. Needed to avoid stack too deep.",
        "params": {
          "_lenderNonce": "- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.",
          "_loan": "- The main Loan Terms struct.",
          "_loanId": "- The unique identifier for the loan to be renegotiated",
          "_newLoanDuration": "- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.",
          "_newMaximumRepaymentAmount": "- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early."
        },
        "returns": {
          "_0": "Borrower and Lender addresses"
        }
      }
    },
    "title": "LoanChecksAndCalculations",
    "version": 1
  },
  "userdoc": {
    "kind": "user",
    "methods": {
      "computeAdminFee(uint256,uint256)": {
        "notice": "A convenience function computing the adminFee taken from a specified quantity of interest."
      }
    },
    "notice": "Helper library for LoanBase",
    "version": 1
  },
  "storageLayout": {
    "storage": [],
    "types": null
  }
}