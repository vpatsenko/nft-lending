{
  "address": "0xc458E095F8B38CfE0a17A1870B9B65336017709D",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_admin",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_nftfiHub",
          "type": "address"
        },
        {
          "internalType": "address[]",
          "name": "_permittedErc20s",
          "type": "address[]"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [],
      "name": "BasisPointsTooHigh",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "CurrencyDenominationNotPermitted",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "DelegationExists",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ERC20ZeroAddress",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "FunctionInformationArityMismatch",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidLenderSignature",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidNonce",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "LoanAlreadyRepaidOrLiquidated",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "LoanDurationCannotBeZero",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "LoanDurationExceedsMaximum",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "LoanDurationOverflow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "LoanNotOverdueYet",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NFTCollateralContractNotPermitted",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NegativeInterestRate",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NoTokensInEscrow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "NoTokensOwned",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "OnlyLenderCanLiquidate",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "OriginationFeeIsTooHigh",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "RenegotiationSignatureInvalid",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SenderNotBorrower",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "SenderNotLender",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "TokenIsCollateral",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroPrincipal",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint16",
          "name": "newAdminFee",
          "type": "uint16"
        }
      ],
      "name": "AdminFeeUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "erc20Contract",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isPermitted",
          "type": "bool"
        }
      ],
      "name": "ERC20Permit",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "nftCollateralContract",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "nftCollateralId",
          "type": "uint256"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "recipient",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "loanId",
          "type": "uint256"
        }
      ],
      "name": "LoanCreated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint32",
          "name": "loanId",
          "type": "uint32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "loanPrincipalAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "nftCollateralId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "loanMaturityDate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "loanLiquidationDate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "nftCollateralContract",
          "type": "address"
        }
      ],
      "name": "LoanLiquidated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint32",
          "name": "loanId",
          "type": "uint32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint32",
          "name": "newLoanDuration",
          "type": "uint32"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newMaximumRepaymentAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "renegotiationFee",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "renegotiationAdminFee",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "bool",
          "name": "isProRata",
          "type": "bool"
        }
      ],
      "name": "LoanRenegotiated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint32",
          "name": "loanId",
          "type": "uint32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "loanPrincipalAmount",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "nftCollateralId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amountPaidToLender",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "adminFee",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "nftCollateralContract",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "address",
          "name": "loanERC20Denomination",
          "type": "address"
        }
      ],
      "name": "LoanRepaid",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "uint32",
          "name": "loanId",
          "type": "uint32"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "borrower",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "lender",
          "type": "address"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "loanPrincipalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "maximumRepaymentAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "nftCollateralId",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "loanERC20Denomination",
              "type": "address"
            },
            {
              "internalType": "uint32",
              "name": "loanDuration",
              "type": "uint32"
            },
            {
              "internalType": "uint16",
              "name": "loanInterestRateForDurationInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint16",
              "name": "loanAdminFeeInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint256",
              "name": "originationFee",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "nftCollateralWrapper",
              "type": "address"
            },
            {
              "internalType": "uint64",
              "name": "loanStartTime",
              "type": "uint64"
            },
            {
              "internalType": "address",
              "name": "nftCollateralContract",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "borrower",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "lender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "escrow",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isProRata",
              "type": "bool"
            }
          ],
          "indexed": false,
          "internalType": "struct LoanData.LoanTerms",
          "name": "loanTerms",
          "type": "tuple"
        }
      ],
      "name": "LoanStarted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "newMaximumLoanDuration",
          "type": "uint256"
        }
      ],
      "name": "MaximumLoanDurationUpdated",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "previousOwner",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "address",
          "name": "newOwner",
          "type": "address"
        }
      ],
      "name": "OwnershipTransferred",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "Paused",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": false,
          "internalType": "address",
          "name": "account",
          "type": "address"
        }
      ],
      "name": "Unpaused",
      "type": "event"
    },
    {
      "inputs": [],
      "name": "HUNDRED_PERCENT",
      "outputs": [
        {
          "internalType": "uint16",
          "name": "",
          "type": "uint16"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "LOAN_COORDINATOR",
      "outputs": [
        {
          "internalType": "bytes32",
          "name": "",
          "type": "bytes32"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "loanPrincipalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "maximumRepaymentAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "nftCollateralId",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "nftCollateralContract",
              "type": "address"
            },
            {
              "internalType": "uint32",
              "name": "loanDuration",
              "type": "uint32"
            },
            {
              "internalType": "address",
              "name": "loanERC20Denomination",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isProRata",
              "type": "bool"
            },
            {
              "internalType": "uint256",
              "name": "originationFee",
              "type": "uint256"
            }
          ],
          "internalType": "struct LoanData.Offer",
          "name": "_offer",
          "type": "tuple"
        },
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "nonce",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "expiry",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "signer",
              "type": "address"
            },
            {
              "internalType": "bytes",
              "name": "signature",
              "type": "bytes"
            }
          ],
          "internalType": "struct LoanData.Signature",
          "name": "_signature",
          "type": "tuple"
        }
      ],
      "name": "acceptOffer",
      "outputs": [
        {
          "internalType": "uint32",
          "name": "",
          "type": "uint32"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "acceptTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "adminFeeInBasisPoints",
      "outputs": [
        {
          "internalType": "uint16",
          "name": "",
          "type": "uint16"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_nonce",
          "type": "uint256"
        }
      ],
      "name": "cancelRefinancingCommitment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "cancelTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "string",
          "name": "_nftType",
          "type": "string"
        },
        {
          "internalType": "address",
          "name": "_tokenAddress",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_tokenId",
          "type": "uint256"
        },
        {
          "internalType": "address",
          "name": "_receiver",
          "type": "address"
        }
      ],
      "name": "drainNFT",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_erc20",
          "type": "address"
        }
      ],
      "name": "getERC20Permit",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "getERC20TransferManagerAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_borrower",
          "type": "address"
        }
      ],
      "name": "getEscrowAddress",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "getLoanTerms",
      "outputs": [
        {
          "components": [
            {
              "internalType": "uint256",
              "name": "loanPrincipalAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "maximumRepaymentAmount",
              "type": "uint256"
            },
            {
              "internalType": "uint256",
              "name": "nftCollateralId",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "loanERC20Denomination",
              "type": "address"
            },
            {
              "internalType": "uint32",
              "name": "loanDuration",
              "type": "uint32"
            },
            {
              "internalType": "uint16",
              "name": "loanInterestRateForDurationInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint16",
              "name": "loanAdminFeeInBasisPoints",
              "type": "uint16"
            },
            {
              "internalType": "uint256",
              "name": "originationFee",
              "type": "uint256"
            },
            {
              "internalType": "address",
              "name": "nftCollateralWrapper",
              "type": "address"
            },
            {
              "internalType": "uint64",
              "name": "loanStartTime",
              "type": "uint64"
            },
            {
              "internalType": "address",
              "name": "nftCollateralContract",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "borrower",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "lender",
              "type": "address"
            },
            {
              "internalType": "address",
              "name": "escrow",
              "type": "address"
            },
            {
              "internalType": "bool",
              "name": "isProRata",
              "type": "bool"
            }
          ],
          "internalType": "struct LoanData.LoanTerms",
          "name": "",
          "type": "tuple"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "getPayoffAmount",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_user",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_nonce",
          "type": "uint256"
        }
      ],
      "name": "getWhetherRenegotiationNonceHasBeenUsedForUser",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "hub",
      "outputs": [
        {
          "internalType": "contract INftfiHub",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "liquidateOverdueLoan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "",
          "type": "uint32"
        }
      ],
      "name": "loanRepaidOrLiquidated",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "maximumLoanDuration",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "mintObligationReceipt",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "mintPromissoryNote",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "owner",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "pause",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "paused",
      "outputs": [
        {
          "internalType": "bool",
          "name": "",
          "type": "bool"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "payBackLoan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        }
      ],
      "name": "payBackLoanSafe",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "rejectTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint32",
          "name": "_loanId",
          "type": "uint32"
        },
        {
          "internalType": "uint32",
          "name": "_newLoanDuration",
          "type": "uint32"
        },
        {
          "internalType": "uint256",
          "name": "_newMaximumRepaymentAmount",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_renegotiationFee",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_lenderNonce",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "_expiry",
          "type": "uint256"
        },
        {
          "internalType": "bool",
          "name": "_isProRata",
          "type": "bool"
        },
        {
          "internalType": "bytes",
          "name": "_lenderSignature",
          "type": "bytes"
        }
      ],
      "name": "renegotiateLoan",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_newOwnerCandidate",
          "type": "address"
        }
      ],
      "name": "requestTransferOwnership",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_erc20",
          "type": "address"
        },
        {
          "internalType": "bool",
          "name": "_permit",
          "type": "bool"
        }
      ],
      "name": "setERC20Permit",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address[]",
          "name": "_erc20s",
          "type": "address[]"
        },
        {
          "internalType": "bool[]",
          "name": "_permits",
          "type": "bool[]"
        }
      ],
      "name": "setERC20Permits",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "unpause",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint16",
          "name": "_newAdminFeeInBasisPoints",
          "type": "uint16"
        }
      ],
      "name": "updateAdminFee",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "_newMaximumLoanDuration",
          "type": "uint256"
        }
      ],
      "name": "updateMaximumLoanDuration",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    }
  ],
  "transactionHash": "0x7ad162f75741c5bc3c682cb6da58449f77c16c5691fc3cc200856c8efa6a2625",
  "receipt": {
    "to": null,
    "from": "0x02e037F56728E947e92Af2c05baF7FeF387Ddd06",
    "contractAddress": "0xc458E095F8B38CfE0a17A1870B9B65336017709D",
    "transactionIndex": 4,
    "gasUsed": "4699465",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000801000000000000000000000000000000000000020000001000000000000800000000000208000000000000000000400000000000000000200000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xae7030bbdf4a5b4fb0b3982dd62993456e81f2520c945a8f93cd15386356bcf7",
    "transactionHash": "0x7ad162f75741c5bc3c682cb6da58449f77c16c5691fc3cc200856c8efa6a2625",
    "logs": [
      {
        "transactionIndex": 4,
        "blockNumber": 16651359,
        "transactionHash": "0x7ad162f75741c5bc3c682cb6da58449f77c16c5691fc3cc200856c8efa6a2625",
        "address": "0xc458E095F8B38CfE0a17A1870B9B65336017709D",
        "topics": [
          "0x8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0",
          "0x0000000000000000000000000000000000000000000000000000000000000000",
          "0x000000000000000000000000aaef615f59c3d346d4c9f8bdca78ed402ce73738"
        ],
        "data": "0x",
        "logIndex": 2,
        "blockHash": "0xae7030bbdf4a5b4fb0b3982dd62993456e81f2520c945a8f93cd15386356bcf7"
      }
    ],
    "blockNumber": 16651359,
    "cumulativeGasUsed": "4951265",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0xAAeF615f59c3d346d4c9F8bdCa78eD402ce73738",
    "0x7e4Dbdb623fBD48b01aF813aC324228575D04834",
    []
  ],
  "numDeployments": 2,
  "solcInputHash": "bab281e5640fb4f8a58586b3f548739e",
  "metadata": "{\"compiler\":{\"version\":\"0.8.19+commit.7dd6d404\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_admin\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"_nftfiHub\",\"type\":\"address\"},{\"internalType\":\"address[]\",\"name\":\"_permittedErc20s\",\"type\":\"address[]\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[],\"name\":\"BasisPointsTooHigh\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"CurrencyDenominationNotPermitted\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"DelegationExists\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ERC20ZeroAddress\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"FunctionInformationArityMismatch\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidLenderSignature\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidNonce\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"LoanAlreadyRepaidOrLiquidated\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"LoanDurationCannotBeZero\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"LoanDurationExceedsMaximum\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"LoanDurationOverflow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"LoanNotOverdueYet\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NFTCollateralContractNotPermitted\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NegativeInterestRate\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NoTokensInEscrow\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"NoTokensOwned\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OnlyLenderCanLiquidate\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"OriginationFeeIsTooHigh\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"RenegotiationSignatureInvalid\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"SenderNotBorrower\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"SenderNotLender\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"TokenIsCollateral\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"ZeroPrincipal\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"newAdminFee\",\"type\":\"uint16\"}],\"name\":\"AdminFeeUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"erc20Contract\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isPermitted\",\"type\":\"bool\"}],\"name\":\"ERC20Permit\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"recipient\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"loanId\",\"type\":\"uint256\"}],\"name\":\"LoanCreated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint32\",\"name\":\"loanId\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"loanMaturityDate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"loanLiquidationDate\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"}],\"name\":\"LoanLiquidated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint32\",\"name\":\"loanId\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint32\",\"name\":\"newLoanDuration\",\"type\":\"uint32\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newMaximumRepaymentAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"renegotiationFee\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"renegotiationAdminFee\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"bool\",\"name\":\"isProRata\",\"type\":\"bool\"}],\"name\":\"LoanRenegotiated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint32\",\"name\":\"loanId\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"amountPaidToLender\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"adminFee\",\"type\":\"uint256\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"address\",\"name\":\"loanERC20Denomination\",\"type\":\"address\"}],\"name\":\"LoanRepaid\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"uint32\",\"name\":\"loanId\",\"type\":\"uint32\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"loanERC20Denomination\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"loanDuration\",\"type\":\"uint32\"},{\"internalType\":\"uint16\",\"name\":\"loanInterestRateForDurationInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"loanAdminFeeInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint256\",\"name\":\"originationFee\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nftCollateralWrapper\",\"type\":\"address\"},{\"internalType\":\"uint64\",\"name\":\"loanStartTime\",\"type\":\"uint64\"},{\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"escrow\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isProRata\",\"type\":\"bool\"}],\"indexed\":false,\"internalType\":\"struct LoanData.LoanTerms\",\"name\":\"loanTerms\",\"type\":\"tuple\"}],\"name\":\"LoanStarted\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"newMaximumLoanDuration\",\"type\":\"uint256\"}],\"name\":\"MaximumLoanDurationUpdated\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Paused\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"}],\"name\":\"Unpaused\",\"type\":\"event\"},{\"inputs\":[],\"name\":\"HUNDRED_PERCENT\",\"outputs\":[{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"LOAN_COORDINATOR\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"loanDuration\",\"type\":\"uint32\"},{\"internalType\":\"address\",\"name\":\"loanERC20Denomination\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isProRata\",\"type\":\"bool\"},{\"internalType\":\"uint256\",\"name\":\"originationFee\",\"type\":\"uint256\"}],\"internalType\":\"struct LoanData.Offer\",\"name\":\"_offer\",\"type\":\"tuple\"},{\"components\":[{\"internalType\":\"uint256\",\"name\":\"nonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"expiry\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"signer\",\"type\":\"address\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"}],\"internalType\":\"struct LoanData.Signature\",\"name\":\"_signature\",\"type\":\"tuple\"}],\"name\":\"acceptOffer\",\"outputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"acceptTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"adminFeeInBasisPoints\",\"outputs\":[{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_nonce\",\"type\":\"uint256\"}],\"name\":\"cancelRefinancingCommitment\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"cancelTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"string\",\"name\":\"_nftType\",\"type\":\"string\"},{\"internalType\":\"address\",\"name\":\"_tokenAddress\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_tokenId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"_receiver\",\"type\":\"address\"}],\"name\":\"drainNFT\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_erc20\",\"type\":\"address\"}],\"name\":\"getERC20Permit\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"getERC20TransferManagerAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_borrower\",\"type\":\"address\"}],\"name\":\"getEscrowAddress\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"getLoanTerms\",\"outputs\":[{\"components\":[{\"internalType\":\"uint256\",\"name\":\"loanPrincipalAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"maximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nftCollateralId\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"loanERC20Denomination\",\"type\":\"address\"},{\"internalType\":\"uint32\",\"name\":\"loanDuration\",\"type\":\"uint32\"},{\"internalType\":\"uint16\",\"name\":\"loanInterestRateForDurationInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint16\",\"name\":\"loanAdminFeeInBasisPoints\",\"type\":\"uint16\"},{\"internalType\":\"uint256\",\"name\":\"originationFee\",\"type\":\"uint256\"},{\"internalType\":\"address\",\"name\":\"nftCollateralWrapper\",\"type\":\"address\"},{\"internalType\":\"uint64\",\"name\":\"loanStartTime\",\"type\":\"uint64\"},{\"internalType\":\"address\",\"name\":\"nftCollateralContract\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"borrower\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"lender\",\"type\":\"address\"},{\"internalType\":\"address\",\"name\":\"escrow\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"isProRata\",\"type\":\"bool\"}],\"internalType\":\"struct LoanData.LoanTerms\",\"name\":\"\",\"type\":\"tuple\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"getPayoffAmount\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_user\",\"type\":\"address\"},{\"internalType\":\"uint256\",\"name\":\"_nonce\",\"type\":\"uint256\"}],\"name\":\"getWhetherRenegotiationNonceHasBeenUsedForUser\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"hub\",\"outputs\":[{\"internalType\":\"contract INftfiHub\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"liquidateOverdueLoan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"\",\"type\":\"uint32\"}],\"name\":\"loanRepaidOrLiquidated\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"maximumLoanDuration\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"mintObligationReceipt\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"mintPromissoryNote\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"pause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"paused\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"payBackLoan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"}],\"name\":\"payBackLoanSafe\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"rejectTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint32\",\"name\":\"_loanId\",\"type\":\"uint32\"},{\"internalType\":\"uint32\",\"name\":\"_newLoanDuration\",\"type\":\"uint32\"},{\"internalType\":\"uint256\",\"name\":\"_newMaximumRepaymentAmount\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_renegotiationFee\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_lenderNonce\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"_expiry\",\"type\":\"uint256\"},{\"internalType\":\"bool\",\"name\":\"_isProRata\",\"type\":\"bool\"},{\"internalType\":\"bytes\",\"name\":\"_lenderSignature\",\"type\":\"bytes\"}],\"name\":\"renegotiateLoan\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_newOwnerCandidate\",\"type\":\"address\"}],\"name\":\"requestTransferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"_erc20\",\"type\":\"address\"},{\"internalType\":\"bool\",\"name\":\"_permit\",\"type\":\"bool\"}],\"name\":\"setERC20Permit\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address[]\",\"name\":\"_erc20s\",\"type\":\"address[]\"},{\"internalType\":\"bool[]\",\"name\":\"_permits\",\"type\":\"bool[]\"}],\"name\":\"setERC20Permits\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"unpause\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint16\",\"name\":\"_newAdminFeeInBasisPoints\",\"type\":\"uint16\"}],\"name\":\"updateAdminFee\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"_newMaximumLoanDuration\",\"type\":\"uint256\"}],\"name\":\"updateMaximumLoanDuration\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"}],\"devdoc\":{\"author\":\"NFTfi\",\"events\":{\"AdminFeeUpdated(uint16)\":{\"params\":{\"newAdminFee\":\"- The new admin fee measured in basis points. This is a percent of the interest paid upon a loan's completion that go to the contract admins.\"}},\"ERC20Permit(address,bool)\":{\"params\":{\"erc20Contract\":\"- Address of the ERC20 contract.\",\"isPermitted\":\"- Signals ERC20 permit.\"}},\"LoanLiquidated(uint32,address,address,uint256,uint256,uint256,uint256,address)\":{\"params\":{\"borrower\":\"- The address of the borrower.\",\"lender\":\"- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.\",\"loanId\":\"- A unique identifier for this particular loan, sourced from the Loan Coordinator.\",\"loanLiquidationDate\":\"- The unix time (measured in seconds) that liquidation occurred.\",\"loanMaturityDate\":\"- The unix time (measured in seconds) that the loan became due and was eligible for liquidation.\",\"loanPrincipalAmount\":\"- The original sum of money transferred from lender to borrower at the beginning of the loan, measured in loanERC20Denomination's smallest units.\",\"nftCollateralContract\":\"- The ERC721 contract of the NFT collateral\",\"nftCollateralId\":\"- The ID within the NFTCollateralContract for the NFT being used as collateral for this loan. The NFT is stored within this contract during the duration of the loan.\"}},\"LoanRenegotiated(uint32,address,address,uint32,uint256,uint256,uint256,bool)\":{\"params\":{\"isProRata\":\"- indicates if a renegotiated loan is pro-rata or fixed\",\"loanId\":\"- The unique identifier for the loan to be renegotiated\",\"newLoanDuration\":\"- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.\",\"newMaximumRepaymentAmount\":\"- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early.\",\"renegotiationAdminFee\":\"renegotiationFee admin portion based on determined by adminFeeInBasisPoints\",\"renegotiationFee\":\"Agreed upon fee in loan denomination that borrower pays for the lender for the renegotiation, has to be paid with an ERC20 transfer loanERC20Denomination token, uses transfer from, frontend will have to prompt an erc20 approve for this from the borrower to the lender\"}},\"LoanRepaid(uint32,address,address,uint256,uint256,uint256,uint256,address,address)\":{\"params\":{\"adminFee\":\"The amount of interest paid to the contract admins, measured in the smalled units of loanERC20Denomination and determined by adminFeeInBasisPoints. This amount never exceeds the amount of interest earned.\",\"amountPaidToLender\":\"The amount of ERC20 that the borrower paid to the lender, measured in the smalled units of loanERC20Denomination.\",\"borrower\":\"- The address of the borrower.\",\"lender\":\"- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.\",\"loanERC20Denomination\":\"- The ERC20 contract of the currency being used as principal/interest for this loan.\",\"loanId\":\"- A unique identifier for this particular loan, sourced from the Loan Coordinator.\",\"loanPrincipalAmount\":\"- The original sum of money transferred from lender to borrower at the beginning of the loan, measured in loanERC20Denomination's smallest units.\",\"nftCollateralContract\":\"- The ERC721 contract of the NFT collateral\",\"nftCollateralId\":\"- The ID within the NFTCollateralContract for the NFT being used as collateral for this loan. The NFT is stored within this contract during the duration of the loan.\"}},\"LoanStarted(uint32,address,address,(uint256,uint256,uint256,address,uint32,uint16,uint16,uint256,address,uint64,address,address,address,address,bool))\":{\"params\":{\"borrower\":\"- The address of the borrower.\",\"lender\":\"- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.\",\"loanId\":\"- A unique identifier for this particular loan, sourced from the Loan Coordinator.\"}},\"MaximumLoanDurationUpdated(uint256)\":{\"params\":{\"newMaximumLoanDuration\":\"- The new maximum duration.\"}},\"Paused(address)\":{\"details\":\"Emitted when the pause is triggered by `account`.\"},\"Unpaused(address)\":{\"details\":\"Emitted when the pause is lifted by `account`.\"}},\"kind\":\"dev\",\"methods\":{\"acceptOffer((uint256,uint256,uint256,address,uint32,address,bool,uint256),(uint256,uint256,address,bytes))\":{\"params\":{\"_offer\":\"- The offer made by the lender.\",\"_signature\":\"- The components of the lender's signature.\"},\"returns\":{\"_0\":\"The ID of the created loan.\"}},\"cancelRefinancingCommitment(uint256)\":{\"params\":{\"_nonce\":\"- User nonce\"}},\"constructor\":{\"details\":\"Sets `hub` and permitted erc20-s\",\"params\":{\"_admin\":\"- Initial admin of this contract.\",\"_nftfiHub\":\"- NFTfiHub address\",\"_permittedErc20s\":\"- list of permitted ERC20 token contract addresses\"}},\"drainNFT(string,address,uint256,address)\":{\"params\":{\"_receiver\":\"- receiver of the token\",\"_tokenAddress\":\"- address of the token contract for the token to be sent out\",\"_tokenId\":\"- id token to be sent out\"}},\"getERC20Permit(address)\":{\"params\":{\"_erc20\":\"- The address of the erc20 contract.\"},\"returns\":{\"_0\":\"Returns whether the erc20 is permitted\"}},\"getPayoffAmount(uint32)\":{\"params\":{\"_loanId\":\"A unique identifier for this particular loan, sourced from the Loan Coordinator.\"},\"returns\":{\"_0\":\"The amount of the specified ERC20 currency required to pay back this loan, measured in the smallest unit of the specified ERC20 currency.\"}},\"getWhetherRenegotiationNonceHasBeenUsedForUser(address,uint256)\":{\"params\":{\"_nonce\":\"- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.\",\"_user\":\"- The address of the user. This function works for both lenders and borrowers alike.\"},\"returns\":{\"_0\":\"A bool representing whether or not this nonce has been used for this user.\"}},\"liquidateOverdueLoan(uint32)\":{\"params\":{\"_loanId\":\"A unique identifier for this particular loan, sourced from the Loan Coordinator.\"}},\"mintObligationReceipt(uint32)\":{\"params\":{\"_loanId\":\"- The unique identifier for the loan.\"}},\"mintPromissoryNote(uint32)\":{\"params\":{\"_loanId\":\"- The unique identifier for the loan.\"}},\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"pause()\":{\"details\":\"Triggers stopped state. Requirements: - Only the owner can call this method. - The contract must not be paused.\"},\"paused()\":{\"details\":\"Returns true if the contract is paused, and false otherwise.\"},\"payBackLoan(uint32)\":{\"params\":{\"_loanId\":\"A unique identifier for this particular loan, sourced from the Loan Coordinator.\"}},\"payBackLoanSafe(uint32)\":{\"params\":{\"_loanId\":\"A unique identifier for this particular loan, sourced from the Loan Coordinator.\"}},\"renegotiateLoan(uint32,uint32,uint256,uint256,uint256,uint256,bool,bytes)\":{\"details\":\"makes possible to change loan duration and max repayment amount, loan duration even can be extended if loan was expired but not liquidated.\",\"params\":{\"_expiry\":\"- The date when the renegotiation offer expires\",\"_isProRata\":\"- indicates if a renegotiated loan is pro-rata or fixed\",\"_lenderNonce\":\"- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.\",\"_lenderSignature\":\"- The ECDSA signature of the lender, obtained off-chain ahead of time, signing the following combination of parameters: - _loanId - _newLoanDuration - _isProRata - _newMaximumRepaymentAmount - _renegotiationFee - _lender - _nonce - _expiry - address of this contract - chainId\",\"_loanId\":\"- The unique identifier for the loan to be renegotiated\",\"_newLoanDuration\":\"- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.\",\"_newMaximumRepaymentAmount\":\"- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early.\",\"_renegotiationFee\":\"Agreed upon fee in ether that borrower pays for the lender for the renegitiation\"}},\"requestTransferOwnership(address)\":{\"details\":\"Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`). Can only be called by the current owner.\"},\"setERC20Permit(address,bool)\":{\"params\":{\"_erc20\":\"- The address of the ERC20 currency whose permit list status changed.\",\"_permit\":\"- The new status of whether the currency is permitted or not.\"}},\"setERC20Permits(address[],bool[])\":{\"params\":{\"_erc20s\":\"- The addresses of the ERC20 currencies whose permit list status changed.\",\"_permits\":\"- The new statuses of whether the currency is permitted or not.\"}},\"unpause()\":{\"details\":\"Returns to normal state. Requirements: - Only the owner can call this method. - The contract must be paused.\"},\"updateAdminFee(uint16)\":{\"params\":{\"_newAdminFeeInBasisPoints\":\"- The new admin fee measured in basis points. This is a percent of the interest paid upon a loan's completion that go to the contract admins.\"}},\"updateMaximumLoanDuration(uint256)\":{\"params\":{\"_newMaximumLoanDuration\":\"- The new maximum loan duration, measured in seconds.\"}}},\"title\":\"AssetOfferLoan\",\"version\":1},\"userdoc\":{\"events\":{\"AdminFeeUpdated(uint16)\":{\"notice\":\"This event is fired whenever the admins change the percent of interest rates earned that they charge as a fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points.\"},\"ERC20Permit(address,bool)\":{\"notice\":\"This event is fired whenever the admin sets a ERC20 permit.\"},\"LoanLiquidated(uint32,address,address,uint256,uint256,uint256,uint256,address)\":{\"notice\":\"This event is fired whenever a lender liquidates an outstanding loan that is owned to them that has exceeded its duration. The lender receives the underlying NFT collateral, and the borrower no longer needs to repay the loan principal-plus-interest.\"},\"LoanRenegotiated(uint32,address,address,uint32,uint256,uint256,uint256,bool)\":{\"notice\":\"This event is fired when some of the terms of a loan are being renegotiated.\"},\"LoanRepaid(uint32,address,address,uint256,uint256,uint256,uint256,address,address)\":{\"notice\":\"This event is fired whenever a borrower successfully repays their loan, paying principal-plus-interest-minus-fee to the lender in loanERC20Denomination, paying fee to owner in loanERC20Denomination, and receiving their NFT collateral back.\"},\"LoanStarted(uint32,address,address,(uint256,uint256,uint256,address,uint32,uint16,uint16,uint256,address,uint64,address,address,address,address,bool))\":{\"notice\":\"This event is fired whenever a borrower begins a loan by calling NFTfi.beginLoan(), which can only occur after both the lender and borrower have approved their ERC721 and ERC20 contracts to use NFTfi, and when they both have signed off-chain messages that agree on the terms of the loan.\"},\"MaximumLoanDurationUpdated(uint256)\":{\"notice\":\"This event is fired whenever the admins change the maximum duration of any loan started for this loan type.\"}},\"kind\":\"user\",\"methods\":{\"acceptOffer((uint256,uint256,uint256,address,uint32,address,bool,uint256),(uint256,uint256,address,bytes))\":{\"notice\":\"This function is called by the borrower when accepting a lender's offer to begin a loan.\"},\"adminFeeInBasisPoints()\":{\"notice\":\"The percentage of interest earned by lenders on this platform that is taken by the contract admin's as a fee, measured in basis points (hundredths of a percent). The max allowed value is 10000.\"},\"cancelRefinancingCommitment(uint256)\":{\"notice\":\"This function can be called by either a lender or a borrower to cancel all off-chain orders that they have signed that contain this nonce. If the off-chain orders were created correctly, there should only be one off-chain order that contains this nonce at all. The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.\"},\"drainNFT(string,address,uint256,address)\":{\"notice\":\"used by the owner account to be able to drain stuck NFTs\"},\"getERC20Permit(address)\":{\"notice\":\"This function can be called by anyone to get the permit associated with the erc20 contract.\"},\"getPayoffAmount(uint32)\":{\"notice\":\"This function can be used to view the current quantity of the ERC20 currency used in the specified loan required by the borrower to repay their loan, measured in the smallest unit of the ERC20 currency. Note that since interest accrues every second, once a borrower calls repayLoan(), the amount will have increased slightly.\"},\"getWhetherRenegotiationNonceHasBeenUsedForUser(address,uint256)\":{\"notice\":\"This function can be used to view whether a particular nonce for a particular user has already been used, either from a successful loan or a cancelled off-chain order.\"},\"liquidateOverdueLoan(uint32)\":{\"notice\":\"This function is called by a lender once a loan has finished its duration and the borrower still has not repaid. The lender can call this function to seize the underlying NFT collateral, although the lender gives up all rights to the principal-plus-collateral by doing so. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it.\"},\"loanRepaidOrLiquidated(uint32)\":{\"notice\":\"A mapping tracking whether a loan has either been repaid or liquidated. This prevents an attacker trying to repay or liquidate the same loan twice.\"},\"maximumLoanDuration()\":{\"notice\":\"The maximum duration of any loan started for this loan type, measured in seconds. This is both a sanity-check for borrowers and an upper limit on how long admins will have to support v1 of this contract if they eventually deprecate it, as well as a check to ensure that the loan duration never exceeds the space alotted for it in the loan struct.\"},\"mintObligationReceipt(uint32)\":{\"notice\":\"Mints the obligation receipt for the borrower\"},\"mintPromissoryNote(uint32)\":{\"notice\":\"Mints the promissory note for the lender\"},\"payBackLoan(uint32)\":{\"notice\":\"This function is called by a anyone to repay a loan. It can be called at any time after the loan has begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off early and the loan is pro-rated type, but the complete repayment amount if it is fixed type. The the borrower (current owner of the obligation note) will get the collaterl NFT back. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it.\"},\"payBackLoanSafe(uint32)\":{\"notice\":\"This function is called by a anyone to repay a loan. It can be called at any time after the loan has begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off early and the loan is pro-rated type, but the complete repayment amount if it is fixed type. The the borrower (current owner of the obligation note) will get the collaterl NFT back. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it.\"},\"setERC20Permit(address,bool)\":{\"notice\":\"This function can be called by admins to change the permitted status of an ERC20 currency. This includes both adding an ERC20 currency to the permitted list and removing it.\"},\"setERC20Permits(address[],bool[])\":{\"notice\":\"This function can be called by admins to change the permitted status of a batch of ERC20 currency. This includes both adding an ERC20 currency to the permitted list and removing it.\"},\"updateAdminFee(uint16)\":{\"notice\":\"This function can be called by admins to change the percent of interest rates earned that they charge as a fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points.\"},\"updateMaximumLoanDuration(uint256)\":{\"notice\":\"This function can be called by admins to change the maximumLoanDuration. Note that they can never change maximumLoanDuration to be greater than UINT32_MAX, since that's the maximum space alotted for the duration in the loan struct.\"}},\"notice\":\"Main contract for NFTfi Loans Type. This contract manages the ability to create NFT-backed peer-to-peer loans of type Fixed (agreed to be a fixed-repayment loan) where the borrower pays the maximumRepaymentAmount regardless of whether they repay early or not. There are two ways to commence an NFT-backed loan: a. The borrower accepts a lender's offer by calling `acceptOffer`.   1. the borrower calls nftContract.approveAll(NFTfi), approving the NFTfi contract to move their NFT's on their behalf.   2. the lender calls erc20Contract.approve(NFTfi), allowing NFTfi to move the lender's ERC20 tokens on their behalf.   3. the lender signs an off-chain message, proposing its offer terms.   4. the borrower calls `acceptOffer` to accept these terms and enter into the loan. The NFT is stored in the contract, the borrower receives the loan principal in the specified ERC20 currency, the lender can mint an NFTfi promissory note (in ERC721 form) that represents the rights to either the principal-plus-interest, or the underlying NFT collateral if the borrower does not pay back in time, and the borrower can mint an obligation receipt (in ERC721 form) that gives them the right to pay back the loan and get the collateral back. The lender can freely transfer and trade this ERC721 promissory note as they wish, with the knowledge that transferring the ERC721 promissory note tranfers the rights to principal-plus-interest and/or collateral, and that they will no longer have a claim on the loan. The ERC721 promissory note itself represents that claim. The borrower can freely transfer and trade this ERC721 obligation receipt as they wish, with the knowledge that transferring the ERC721 obligation receipt tranfers the rights right to pay back the loan and get the collateral back. A loan may end in one of two ways: - First, a borrower may call NFTfi.payBackLoan() and pay back the loan plus interest at any time, in which case they receive their NFT back in the same transaction. - Second, if the loan's duration has passed and the loan has not been paid back yet, a lender can call NFTfi.liquidateOverdueLoan(), in which case they receive the underlying NFT collateral and forfeit the rights to the principal-plus-interest, which the borrower now keeps.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/loans/loanTypes/AssetOfferLoan.sol\":\"AssetOfferLoan\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"none\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":900},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts/access/AccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (access/AccessControl.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IAccessControl.sol\\\";\\nimport \\\"../utils/Context.sol\\\";\\nimport \\\"../utils/Strings.sol\\\";\\nimport \\\"../utils/introspection/ERC165.sol\\\";\\n\\n/**\\n * @dev Contract module that allows children to implement role-based access\\n * control mechanisms. This is a lightweight version that doesn't allow enumerating role\\n * members except through off-chain means by accessing the contract event logs. Some\\n * applications may benefit from on-chain enumerability, for those cases see\\n * {AccessControlEnumerable}.\\n *\\n * Roles are referred to by their `bytes32` identifier. These should be exposed\\n * in the external API and be unique. The best way to achieve this is by\\n * using `public constant` hash digests:\\n *\\n * ```solidity\\n * bytes32 public constant MY_ROLE = keccak256(\\\"MY_ROLE\\\");\\n * ```\\n *\\n * Roles can be used to represent a set of permissions. To restrict access to a\\n * function call, use {hasRole}:\\n *\\n * ```solidity\\n * function foo() public {\\n *     require(hasRole(MY_ROLE, msg.sender));\\n *     ...\\n * }\\n * ```\\n *\\n * Roles can be granted and revoked dynamically via the {grantRole} and\\n * {revokeRole} functions. Each role has an associated admin role, and only\\n * accounts that have a role's admin role can call {grantRole} and {revokeRole}.\\n *\\n * By default, the admin role for all roles is `DEFAULT_ADMIN_ROLE`, which means\\n * that only accounts with this role will be able to grant or revoke other\\n * roles. More complex role relationships can be created by using\\n * {_setRoleAdmin}.\\n *\\n * WARNING: The `DEFAULT_ADMIN_ROLE` is also its own admin: it has permission to\\n * grant and revoke this role. Extra precautions should be taken to secure\\n * accounts that have been granted it. We recommend using {AccessControlDefaultAdminRules}\\n * to enforce additional security measures for this role.\\n */\\nabstract contract AccessControl is Context, IAccessControl, ERC165 {\\n    struct RoleData {\\n        mapping(address => bool) members;\\n        bytes32 adminRole;\\n    }\\n\\n    mapping(bytes32 => RoleData) private _roles;\\n\\n    bytes32 public constant DEFAULT_ADMIN_ROLE = 0x00;\\n\\n    /**\\n     * @dev Modifier that checks that an account has a specific role. Reverts\\n     * with a standardized message including the required role.\\n     *\\n     * The format of the revert reason is given by the following regular expression:\\n     *\\n     *  /^AccessControl: account (0x[0-9a-f]{40}) is missing role (0x[0-9a-f]{64})$/\\n     *\\n     * _Available since v4.1._\\n     */\\n    modifier onlyRole(bytes32 role) {\\n        _checkRole(role);\\n        _;\\n    }\\n\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\\n        return interfaceId == type(IAccessControl).interfaceId || super.supportsInterface(interfaceId);\\n    }\\n\\n    /**\\n     * @dev Returns `true` if `account` has been granted `role`.\\n     */\\n    function hasRole(bytes32 role, address account) public view virtual override returns (bool) {\\n        return _roles[role].members[account];\\n    }\\n\\n    /**\\n     * @dev Revert with a standard message if `_msgSender()` is missing `role`.\\n     * Overriding this function changes the behavior of the {onlyRole} modifier.\\n     *\\n     * Format of the revert message is described in {_checkRole}.\\n     *\\n     * _Available since v4.6._\\n     */\\n    function _checkRole(bytes32 role) internal view virtual {\\n        _checkRole(role, _msgSender());\\n    }\\n\\n    /**\\n     * @dev Revert with a standard message if `account` is missing `role`.\\n     *\\n     * The format of the revert reason is given by the following regular expression:\\n     *\\n     *  /^AccessControl: account (0x[0-9a-f]{40}) is missing role (0x[0-9a-f]{64})$/\\n     */\\n    function _checkRole(bytes32 role, address account) internal view virtual {\\n        if (!hasRole(role, account)) {\\n            revert(\\n                string(\\n                    abi.encodePacked(\\n                        \\\"AccessControl: account \\\",\\n                        Strings.toHexString(account),\\n                        \\\" is missing role \\\",\\n                        Strings.toHexString(uint256(role), 32)\\n                    )\\n                )\\n            );\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the admin role that controls `role`. See {grantRole} and\\n     * {revokeRole}.\\n     *\\n     * To change a role's admin, use {_setRoleAdmin}.\\n     */\\n    function getRoleAdmin(bytes32 role) public view virtual override returns (bytes32) {\\n        return _roles[role].adminRole;\\n    }\\n\\n    /**\\n     * @dev Grants `role` to `account`.\\n     *\\n     * If `account` had not been already granted `role`, emits a {RoleGranted}\\n     * event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have ``role``'s admin role.\\n     *\\n     * May emit a {RoleGranted} event.\\n     */\\n    function grantRole(bytes32 role, address account) public virtual override onlyRole(getRoleAdmin(role)) {\\n        _grantRole(role, account);\\n    }\\n\\n    /**\\n     * @dev Revokes `role` from `account`.\\n     *\\n     * If `account` had been granted `role`, emits a {RoleRevoked} event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have ``role``'s admin role.\\n     *\\n     * May emit a {RoleRevoked} event.\\n     */\\n    function revokeRole(bytes32 role, address account) public virtual override onlyRole(getRoleAdmin(role)) {\\n        _revokeRole(role, account);\\n    }\\n\\n    /**\\n     * @dev Revokes `role` from the calling account.\\n     *\\n     * Roles are often managed via {grantRole} and {revokeRole}: this function's\\n     * purpose is to provide a mechanism for accounts to lose their privileges\\n     * if they are compromised (such as when a trusted device is misplaced).\\n     *\\n     * If the calling account had been revoked `role`, emits a {RoleRevoked}\\n     * event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must be `account`.\\n     *\\n     * May emit a {RoleRevoked} event.\\n     */\\n    function renounceRole(bytes32 role, address account) public virtual override {\\n        require(account == _msgSender(), \\\"AccessControl: can only renounce roles for self\\\");\\n\\n        _revokeRole(role, account);\\n    }\\n\\n    /**\\n     * @dev Grants `role` to `account`.\\n     *\\n     * If `account` had not been already granted `role`, emits a {RoleGranted}\\n     * event. Note that unlike {grantRole}, this function doesn't perform any\\n     * checks on the calling account.\\n     *\\n     * May emit a {RoleGranted} event.\\n     *\\n     * [WARNING]\\n     * ====\\n     * This function should only be called from the constructor when setting\\n     * up the initial roles for the system.\\n     *\\n     * Using this function in any other way is effectively circumventing the admin\\n     * system imposed by {AccessControl}.\\n     * ====\\n     *\\n     * NOTE: This function is deprecated in favor of {_grantRole}.\\n     */\\n    function _setupRole(bytes32 role, address account) internal virtual {\\n        _grantRole(role, account);\\n    }\\n\\n    /**\\n     * @dev Sets `adminRole` as ``role``'s admin role.\\n     *\\n     * Emits a {RoleAdminChanged} event.\\n     */\\n    function _setRoleAdmin(bytes32 role, bytes32 adminRole) internal virtual {\\n        bytes32 previousAdminRole = getRoleAdmin(role);\\n        _roles[role].adminRole = adminRole;\\n        emit RoleAdminChanged(role, previousAdminRole, adminRole);\\n    }\\n\\n    /**\\n     * @dev Grants `role` to `account`.\\n     *\\n     * Internal function without access restriction.\\n     *\\n     * May emit a {RoleGranted} event.\\n     */\\n    function _grantRole(bytes32 role, address account) internal virtual {\\n        if (!hasRole(role, account)) {\\n            _roles[role].members[account] = true;\\n            emit RoleGranted(role, account, _msgSender());\\n        }\\n    }\\n\\n    /**\\n     * @dev Revokes `role` from `account`.\\n     *\\n     * Internal function without access restriction.\\n     *\\n     * May emit a {RoleRevoked} event.\\n     */\\n    function _revokeRole(bytes32 role, address account) internal virtual {\\n        if (hasRole(role, account)) {\\n            _roles[role].members[account] = false;\\n            emit RoleRevoked(role, account, _msgSender());\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x0dd6e52cb394d7f5abe5dca2d4908a6be40417914720932de757de34a99ab87f\",\"license\":\"MIT\"},\"@openzeppelin/contracts/access/IAccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (access/IAccessControl.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev External interface of AccessControl declared to support ERC165 detection.\\n */\\ninterface IAccessControl {\\n    /**\\n     * @dev Emitted when `newAdminRole` is set as ``role``'s admin role, replacing `previousAdminRole`\\n     *\\n     * `DEFAULT_ADMIN_ROLE` is the starting admin for all roles, despite\\n     * {RoleAdminChanged} not being emitted signaling this.\\n     *\\n     * _Available since v3.1._\\n     */\\n    event RoleAdminChanged(bytes32 indexed role, bytes32 indexed previousAdminRole, bytes32 indexed newAdminRole);\\n\\n    /**\\n     * @dev Emitted when `account` is granted `role`.\\n     *\\n     * `sender` is the account that originated the contract call, an admin role\\n     * bearer except when using {AccessControl-_setupRole}.\\n     */\\n    event RoleGranted(bytes32 indexed role, address indexed account, address indexed sender);\\n\\n    /**\\n     * @dev Emitted when `account` is revoked `role`.\\n     *\\n     * `sender` is the account that originated the contract call:\\n     *   - if using `revokeRole`, it is the admin role bearer\\n     *   - if using `renounceRole`, it is the role bearer (i.e. `account`)\\n     */\\n    event RoleRevoked(bytes32 indexed role, address indexed account, address indexed sender);\\n\\n    /**\\n     * @dev Returns `true` if `account` has been granted `role`.\\n     */\\n    function hasRole(bytes32 role, address account) external view returns (bool);\\n\\n    /**\\n     * @dev Returns the admin role that controls `role`. See {grantRole} and\\n     * {revokeRole}.\\n     *\\n     * To change a role's admin, use {AccessControl-_setRoleAdmin}.\\n     */\\n    function getRoleAdmin(bytes32 role) external view returns (bytes32);\\n\\n    /**\\n     * @dev Grants `role` to `account`.\\n     *\\n     * If `account` had not been already granted `role`, emits a {RoleGranted}\\n     * event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have ``role``'s admin role.\\n     */\\n    function grantRole(bytes32 role, address account) external;\\n\\n    /**\\n     * @dev Revokes `role` from `account`.\\n     *\\n     * If `account` had been granted `role`, emits a {RoleRevoked} event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have ``role``'s admin role.\\n     */\\n    function revokeRole(bytes32 role, address account) external;\\n\\n    /**\\n     * @dev Revokes `role` from the calling account.\\n     *\\n     * Roles are often managed via {grantRole} and {revokeRole}: this function's\\n     * purpose is to provide a mechanism for accounts to lose their privileges\\n     * if they are compromised (such as when a trusted device is misplaced).\\n     *\\n     * If the calling account had been granted `role`, emits a {RoleRevoked}\\n     * event.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must be `account`.\\n     */\\n    function renounceRole(bytes32 role, address account) external;\\n}\\n\",\"keccak256\":\"0x59ce320a585d7e1f163cd70390a0ef2ff9cec832e2aa544293a00692465a7a57\",\"license\":\"MIT\"},\"@openzeppelin/contracts/interfaces/IERC1271.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (interfaces/IERC1271.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC1271 standard signature validation method for\\n * contracts as defined in https://eips.ethereum.org/EIPS/eip-1271[ERC-1271].\\n *\\n * _Available since v4.1._\\n */\\ninterface IERC1271 {\\n    /**\\n     * @dev Should return whether the signature provided is valid for the provided data\\n     * @param hash      Hash of the data to be signed\\n     * @param signature Signature byte array associated with _data\\n     */\\n    function isValidSignature(bytes32 hash, bytes memory signature) external view returns (bytes4 magicValue);\\n}\\n\",\"keccak256\":\"0x0705a4b1b86d7b0bd8432118f226ba139c44b9dcaba0a6eafba2dd7d0639c544\",\"license\":\"MIT\"},\"@openzeppelin/contracts/proxy/Clones.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (proxy/Clones.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev https://eips.ethereum.org/EIPS/eip-1167[EIP 1167] is a standard for\\n * deploying minimal proxy contracts, also known as \\\"clones\\\".\\n *\\n * > To simply and cheaply clone contract functionality in an immutable way, this standard specifies\\n * > a minimal bytecode implementation that delegates all calls to a known, fixed address.\\n *\\n * The library includes functions to deploy a proxy using either `create` (traditional deployment) or `create2`\\n * (salted deterministic deployment). It also includes functions to predict the addresses of clones deployed using the\\n * deterministic method.\\n *\\n * _Available since v3.4._\\n */\\nlibrary Clones {\\n    /**\\n     * @dev Deploys and returns the address of a clone that mimics the behaviour of `implementation`.\\n     *\\n     * This function uses the create opcode, which should never revert.\\n     */\\n    function clone(address implementation) internal returns (address instance) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            // Cleans the upper 96 bits of the `implementation` word, then packs the first 3 bytes\\n            // of the `implementation` address with the bytecode before the address.\\n            mstore(0x00, or(shr(0xe8, shl(0x60, implementation)), 0x3d602d80600a3d3981f3363d3d373d3d3d363d73000000))\\n            // Packs the remaining 17 bytes of `implementation` with the bytecode after the address.\\n            mstore(0x20, or(shl(0x78, implementation), 0x5af43d82803e903d91602b57fd5bf3))\\n            instance := create(0, 0x09, 0x37)\\n        }\\n        require(instance != address(0), \\\"ERC1167: create failed\\\");\\n    }\\n\\n    /**\\n     * @dev Deploys and returns the address of a clone that mimics the behaviour of `implementation`.\\n     *\\n     * This function uses the create2 opcode and a `salt` to deterministically deploy\\n     * the clone. Using the same `implementation` and `salt` multiple time will revert, since\\n     * the clones cannot be deployed twice at the same address.\\n     */\\n    function cloneDeterministic(address implementation, bytes32 salt) internal returns (address instance) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            // Cleans the upper 96 bits of the `implementation` word, then packs the first 3 bytes\\n            // of the `implementation` address with the bytecode before the address.\\n            mstore(0x00, or(shr(0xe8, shl(0x60, implementation)), 0x3d602d80600a3d3981f3363d3d373d3d3d363d73000000))\\n            // Packs the remaining 17 bytes of `implementation` with the bytecode after the address.\\n            mstore(0x20, or(shl(0x78, implementation), 0x5af43d82803e903d91602b57fd5bf3))\\n            instance := create2(0, 0x09, 0x37, salt)\\n        }\\n        require(instance != address(0), \\\"ERC1167: create2 failed\\\");\\n    }\\n\\n    /**\\n     * @dev Computes the address of a clone deployed using {Clones-cloneDeterministic}.\\n     */\\n    function predictDeterministicAddress(\\n        address implementation,\\n        bytes32 salt,\\n        address deployer\\n    ) internal pure returns (address predicted) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            let ptr := mload(0x40)\\n            mstore(add(ptr, 0x38), deployer)\\n            mstore(add(ptr, 0x24), 0x5af43d82803e903d91602b57fd5bf3ff)\\n            mstore(add(ptr, 0x14), implementation)\\n            mstore(ptr, 0x3d602d80600a3d3981f3363d3d373d3d3d363d73)\\n            mstore(add(ptr, 0x58), salt)\\n            mstore(add(ptr, 0x78), keccak256(add(ptr, 0x0c), 0x37))\\n            predicted := keccak256(add(ptr, 0x43), 0x55)\\n        }\\n    }\\n\\n    /**\\n     * @dev Computes the address of a clone deployed using {Clones-cloneDeterministic}.\\n     */\\n    function predictDeterministicAddress(\\n        address implementation,\\n        bytes32 salt\\n    ) internal view returns (address predicted) {\\n        return predictDeterministicAddress(implementation, salt, address(this));\\n    }\\n}\\n\",\"keccak256\":\"0x01f055f5c26ba25d7f83e9aa9ba877fbea4d0bf22227de046ea67494bc932999\",\"license\":\"MIT\"},\"@openzeppelin/contracts/proxy/utils/Initializable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (proxy/utils/Initializable.sol)\\n\\npragma solidity ^0.8.2;\\n\\nimport \\\"../../utils/Address.sol\\\";\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since proxied contracts do not make use of a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * The initialization functions use a version number. Once a version number is used, it is consumed and cannot be\\n * reused. This mechanism prevents re-execution of each \\\"step\\\" but allows the creation of new initialization steps in\\n * case an upgrade adds a module that needs to be initialized.\\n *\\n * For example:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```solidity\\n * contract MyToken is ERC20Upgradeable {\\n *     function initialize() initializer public {\\n *         __ERC20_init(\\\"MyToken\\\", \\\"MTK\\\");\\n *     }\\n * }\\n *\\n * contract MyTokenV2 is MyToken, ERC20PermitUpgradeable {\\n *     function initializeV2() reinitializer(2) public {\\n *         __ERC20Permit_init(\\\"MyToken\\\");\\n *     }\\n * }\\n * ```\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n *\\n * [CAUTION]\\n * ====\\n * Avoid leaving a contract uninitialized.\\n *\\n * An uninitialized contract can be taken over by an attacker. This applies to both a proxy and its implementation\\n * contract, which may impact the proxy. To prevent the implementation contract from being used, you should invoke\\n * the {_disableInitializers} function in the constructor to automatically lock it when it is deployed:\\n *\\n * [.hljs-theme-light.nopadding]\\n * ```\\n * /// @custom:oz-upgrades-unsafe-allow constructor\\n * constructor() {\\n *     _disableInitializers();\\n * }\\n * ```\\n * ====\\n */\\nabstract contract Initializable {\\n    /**\\n     * @dev Indicates that the contract has been initialized.\\n     * @custom:oz-retyped-from bool\\n     */\\n    uint8 private _initialized;\\n\\n    /**\\n     * @dev Indicates that the contract is in the process of being initialized.\\n     */\\n    bool private _initializing;\\n\\n    /**\\n     * @dev Triggered when the contract has been initialized or reinitialized.\\n     */\\n    event Initialized(uint8 version);\\n\\n    /**\\n     * @dev A modifier that defines a protected initializer function that can be invoked at most once. In its scope,\\n     * `onlyInitializing` functions can be used to initialize parent contracts.\\n     *\\n     * Similar to `reinitializer(1)`, except that functions marked with `initializer` can be nested in the context of a\\n     * constructor.\\n     *\\n     * Emits an {Initialized} event.\\n     */\\n    modifier initializer() {\\n        bool isTopLevelCall = !_initializing;\\n        require(\\n            (isTopLevelCall && _initialized < 1) || (!Address.isContract(address(this)) && _initialized == 1),\\n            \\\"Initializable: contract is already initialized\\\"\\n        );\\n        _initialized = 1;\\n        if (isTopLevelCall) {\\n            _initializing = true;\\n        }\\n        _;\\n        if (isTopLevelCall) {\\n            _initializing = false;\\n            emit Initialized(1);\\n        }\\n    }\\n\\n    /**\\n     * @dev A modifier that defines a protected reinitializer function that can be invoked at most once, and only if the\\n     * contract hasn't been initialized to a greater version before. In its scope, `onlyInitializing` functions can be\\n     * used to initialize parent contracts.\\n     *\\n     * A reinitializer may be used after the original initialization step. This is essential to configure modules that\\n     * are added through upgrades and that require initialization.\\n     *\\n     * When `version` is 1, this modifier is similar to `initializer`, except that functions marked with `reinitializer`\\n     * cannot be nested. If one is invoked in the context of another, execution will revert.\\n     *\\n     * Note that versions can jump in increments greater than 1; this implies that if multiple reinitializers coexist in\\n     * a contract, executing them in the right order is up to the developer or operator.\\n     *\\n     * WARNING: setting the version to 255 will prevent any future reinitialization.\\n     *\\n     * Emits an {Initialized} event.\\n     */\\n    modifier reinitializer(uint8 version) {\\n        require(!_initializing && _initialized < version, \\\"Initializable: contract is already initialized\\\");\\n        _initialized = version;\\n        _initializing = true;\\n        _;\\n        _initializing = false;\\n        emit Initialized(version);\\n    }\\n\\n    /**\\n     * @dev Modifier to protect an initialization function so that it can only be invoked by functions with the\\n     * {initializer} and {reinitializer} modifiers, directly or indirectly.\\n     */\\n    modifier onlyInitializing() {\\n        require(_initializing, \\\"Initializable: contract is not initializing\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Locks the contract, preventing any future reinitialization. This cannot be part of an initializer call.\\n     * Calling this in the constructor of a contract will prevent that contract from being initialized or reinitialized\\n     * to any version. It is recommended to use this to lock implementation contracts that are designed to be called\\n     * through proxies.\\n     *\\n     * Emits an {Initialized} event the first time it is successfully executed.\\n     */\\n    function _disableInitializers() internal virtual {\\n        require(!_initializing, \\\"Initializable: contract is initializing\\\");\\n        if (_initialized != type(uint8).max) {\\n            _initialized = type(uint8).max;\\n            emit Initialized(type(uint8).max);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the highest version that has been initialized. See {reinitializer}.\\n     */\\n    function _getInitializedVersion() internal view returns (uint8) {\\n        return _initialized;\\n    }\\n\\n    /**\\n     * @dev Returns `true` if the contract is currently initializing. See {onlyInitializing}.\\n     */\\n    function _isInitializing() internal view returns (bool) {\\n        return _initializing;\\n    }\\n}\\n\",\"keccak256\":\"0x3d6069be9b4c01fb81840fb9c2c4dc58dd6a6a4aafaa2c6837de8699574d84c6\",\"license\":\"MIT\"},\"@openzeppelin/contracts/security/Pausable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.7.0) (security/Pausable.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../utils/Context.sol\\\";\\n\\n/**\\n * @dev Contract module which allows children to implement an emergency stop\\n * mechanism that can be triggered by an authorized account.\\n *\\n * This module is used through inheritance. It will make available the\\n * modifiers `whenNotPaused` and `whenPaused`, which can be applied to\\n * the functions of your contract. Note that they will not be pausable by\\n * simply including this module, only once the modifiers are put in place.\\n */\\nabstract contract Pausable is Context {\\n    /**\\n     * @dev Emitted when the pause is triggered by `account`.\\n     */\\n    event Paused(address account);\\n\\n    /**\\n     * @dev Emitted when the pause is lifted by `account`.\\n     */\\n    event Unpaused(address account);\\n\\n    bool private _paused;\\n\\n    /**\\n     * @dev Initializes the contract in unpaused state.\\n     */\\n    constructor() {\\n        _paused = false;\\n    }\\n\\n    /**\\n     * @dev Modifier to make a function callable only when the contract is not paused.\\n     *\\n     * Requirements:\\n     *\\n     * - The contract must not be paused.\\n     */\\n    modifier whenNotPaused() {\\n        _requireNotPaused();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Modifier to make a function callable only when the contract is paused.\\n     *\\n     * Requirements:\\n     *\\n     * - The contract must be paused.\\n     */\\n    modifier whenPaused() {\\n        _requirePaused();\\n        _;\\n    }\\n\\n    /**\\n     * @dev Returns true if the contract is paused, and false otherwise.\\n     */\\n    function paused() public view virtual returns (bool) {\\n        return _paused;\\n    }\\n\\n    /**\\n     * @dev Throws if the contract is paused.\\n     */\\n    function _requireNotPaused() internal view virtual {\\n        require(!paused(), \\\"Pausable: paused\\\");\\n    }\\n\\n    /**\\n     * @dev Throws if the contract is not paused.\\n     */\\n    function _requirePaused() internal view virtual {\\n        require(paused(), \\\"Pausable: not paused\\\");\\n    }\\n\\n    /**\\n     * @dev Triggers stopped state.\\n     *\\n     * Requirements:\\n     *\\n     * - The contract must not be paused.\\n     */\\n    function _pause() internal virtual whenNotPaused {\\n        _paused = true;\\n        emit Paused(_msgSender());\\n    }\\n\\n    /**\\n     * @dev Returns to normal state.\\n     *\\n     * Requirements:\\n     *\\n     * - The contract must be paused.\\n     */\\n    function _unpause() internal virtual whenPaused {\\n        _paused = false;\\n        emit Unpaused(_msgSender());\\n    }\\n}\\n\",\"keccak256\":\"0x0849d93b16c9940beb286a7864ed02724b248b93e0d80ef6355af5ef15c64773\",\"license\":\"MIT\"},\"@openzeppelin/contracts/security/ReentrancyGuard.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (security/ReentrancyGuard.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Contract module that helps prevent reentrant calls to a function.\\n *\\n * Inheriting from `ReentrancyGuard` will make the {nonReentrant} modifier\\n * available, which can be applied to functions to make sure there are no nested\\n * (reentrant) calls to them.\\n *\\n * Note that because there is a single `nonReentrant` guard, functions marked as\\n * `nonReentrant` may not call one another. This can be worked around by making\\n * those functions `private`, and then adding `external` `nonReentrant` entry\\n * points to them.\\n *\\n * TIP: If you would like to learn more about reentrancy and alternative ways\\n * to protect against it, check out our blog post\\n * https://blog.openzeppelin.com/reentrancy-after-istanbul/[Reentrancy After Istanbul].\\n */\\nabstract contract ReentrancyGuard {\\n    // Booleans are more expensive than uint256 or any type that takes up a full\\n    // word because each write operation emits an extra SLOAD to first read the\\n    // slot's contents, replace the bits taken up by the boolean, and then write\\n    // back. This is the compiler's defense against contract upgrades and\\n    // pointer aliasing, and it cannot be disabled.\\n\\n    // The values being non-zero value makes deployment a bit more expensive,\\n    // but in exchange the refund on every call to nonReentrant will be lower in\\n    // amount. Since refunds are capped to a percentage of the total\\n    // transaction's gas, it is best to keep them low in cases like this one, to\\n    // increase the likelihood of the full refund coming into effect.\\n    uint256 private constant _NOT_ENTERED = 1;\\n    uint256 private constant _ENTERED = 2;\\n\\n    uint256 private _status;\\n\\n    constructor() {\\n        _status = _NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Prevents a contract from calling itself, directly or indirectly.\\n     * Calling a `nonReentrant` function from another `nonReentrant`\\n     * function is not supported. It is possible to prevent this from happening\\n     * by making the `nonReentrant` function external, and making it call a\\n     * `private` function that does the actual work.\\n     */\\n    modifier nonReentrant() {\\n        _nonReentrantBefore();\\n        _;\\n        _nonReentrantAfter();\\n    }\\n\\n    function _nonReentrantBefore() private {\\n        // On the first call to nonReentrant, _status will be _NOT_ENTERED\\n        require(_status != _ENTERED, \\\"ReentrancyGuard: reentrant call\\\");\\n\\n        // Any calls to nonReentrant after this point will fail\\n        _status = _ENTERED;\\n    }\\n\\n    function _nonReentrantAfter() private {\\n        // By storing the original value once again, a refund is triggered (see\\n        // https://eips.ethereum.org/EIPS/eip-2200)\\n        _status = _NOT_ENTERED;\\n    }\\n\\n    /**\\n     * @dev Returns true if the reentrancy guard is currently set to \\\"entered\\\", which indicates there is a\\n     * `nonReentrant` function in the call stack.\\n     */\\n    function _reentrancyGuardEntered() internal view returns (bool) {\\n        return _status == _ENTERED;\\n    }\\n}\\n\",\"keccak256\":\"0xa535a5df777d44e945dd24aa43a11e44b024140fc340ad0dfe42acf4002aade1\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC1155/IERC1155Receiver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.5.0) (token/ERC1155/IERC1155Receiver.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev _Available since v3.1._\\n */\\ninterface IERC1155Receiver is IERC165 {\\n    /**\\n     * @dev Handles the receipt of a single ERC1155 token type. This function is\\n     * called at the end of a `safeTransferFrom` after the balance has been updated.\\n     *\\n     * NOTE: To accept the transfer, this must return\\n     * `bytes4(keccak256(\\\"onERC1155Received(address,address,uint256,uint256,bytes)\\\"))`\\n     * (i.e. 0xf23a6e61, or its own function selector).\\n     *\\n     * @param operator The address which initiated the transfer (i.e. msg.sender)\\n     * @param from The address which previously owned the token\\n     * @param id The ID of the token being transferred\\n     * @param value The amount of tokens being transferred\\n     * @param data Additional data with no specified format\\n     * @return `bytes4(keccak256(\\\"onERC1155Received(address,address,uint256,uint256,bytes)\\\"))` if transfer is allowed\\n     */\\n    function onERC1155Received(\\n        address operator,\\n        address from,\\n        uint256 id,\\n        uint256 value,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n\\n    /**\\n     * @dev Handles the receipt of a multiple ERC1155 token types. This function\\n     * is called at the end of a `safeBatchTransferFrom` after the balances have\\n     * been updated.\\n     *\\n     * NOTE: To accept the transfer(s), this must return\\n     * `bytes4(keccak256(\\\"onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)\\\"))`\\n     * (i.e. 0xbc197c81, or its own function selector).\\n     *\\n     * @param operator The address which initiated the batch transfer (i.e. msg.sender)\\n     * @param from The address which previously owned the token\\n     * @param ids An array containing ids of each token being transferred (order and length must match values array)\\n     * @param values An array containing amounts of each token being transferred (order and length must match ids array)\\n     * @param data Additional data with no specified format\\n     * @return `bytes4(keccak256(\\\"onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)\\\"))` if transfer is allowed\\n     */\\n    function onERC1155BatchReceived(\\n        address operator,\\n        address from,\\n        uint256[] calldata ids,\\n        uint256[] calldata values,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n}\\n\",\"keccak256\":\"0xeb373f1fdc7b755c6a750123a9b9e3a8a02c1470042fd6505d875000a80bde0b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/IERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC20/IERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20 {\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `to`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address to, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `from` to `to` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 amount) external returns (bool);\\n}\\n\",\"keccak256\":\"0x287b55befed2961a7eabd7d7b1b2839cbca8a5b80ef8dcbb25ed3d4c2002c305\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/extensions/IERC20Permit.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC20/extensions/IERC20Permit.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 Permit extension allowing approvals to be made via signatures, as defined in\\n * https://eips.ethereum.org/EIPS/eip-2612[EIP-2612].\\n *\\n * Adds the {permit} method, which can be used to change an account's ERC20 allowance (see {IERC20-allowance}) by\\n * presenting a message signed by the account. By not relying on {IERC20-approve}, the token holder account doesn't\\n * need to send a transaction, and thus is not required to hold Ether at all.\\n */\\ninterface IERC20Permit {\\n    /**\\n     * @dev Sets `value` as the allowance of `spender` over ``owner``'s tokens,\\n     * given ``owner``'s signed approval.\\n     *\\n     * IMPORTANT: The same issues {IERC20-approve} has related to transaction\\n     * ordering also apply here.\\n     *\\n     * Emits an {Approval} event.\\n     *\\n     * Requirements:\\n     *\\n     * - `spender` cannot be the zero address.\\n     * - `deadline` must be a timestamp in the future.\\n     * - `v`, `r` and `s` must be a valid `secp256k1` signature from `owner`\\n     * over the EIP712-formatted function arguments.\\n     * - the signature must use ``owner``'s current nonce (see {nonces}).\\n     *\\n     * For more information on the signature format, see the\\n     * https://eips.ethereum.org/EIPS/eip-2612#specification[relevant EIP\\n     * section].\\n     */\\n    function permit(\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) external;\\n\\n    /**\\n     * @dev Returns the current nonce for `owner`. This value must be\\n     * included whenever a signature is generated for {permit}.\\n     *\\n     * Every successful call to {permit} increases ``owner``'s nonce by one. This\\n     * prevents a signature from being used multiple times.\\n     */\\n    function nonces(address owner) external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the domain separator used in the encoding of the signature for {permit}, as defined by {EIP712}.\\n     */\\n    // solhint-disable-next-line func-name-mixedcase\\n    function DOMAIN_SEPARATOR() external view returns (bytes32);\\n}\\n\",\"keccak256\":\"0xec63854014a5b4f2b3290ab9103a21bdf902a508d0f41a8573fea49e98bf571a\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.3) (token/ERC20/utils/SafeERC20.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC20.sol\\\";\\nimport \\\"../extensions/IERC20Permit.sol\\\";\\nimport \\\"../../../utils/Address.sol\\\";\\n\\n/**\\n * @title SafeERC20\\n * @dev Wrappers around ERC20 operations that throw on failure (when the token\\n * contract returns false). Tokens that return no value (and instead revert or\\n * throw on failure) are also supported, non-reverting calls are assumed to be\\n * successful.\\n * To use this library you can add a `using SafeERC20 for IERC20;` statement to your contract,\\n * which allows you to call the safe operations as `token.safeTransfer(...)`, etc.\\n */\\nlibrary SafeERC20 {\\n    using Address for address;\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from the calling contract to `to`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransfer(IERC20 token, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transfer.selector, to, value));\\n    }\\n\\n    /**\\n     * @dev Transfer `value` amount of `token` from `from` to `to`, spending the approval given by `from` to the\\n     * calling contract. If `token` returns no value, non-reverting calls are assumed to be successful.\\n     */\\n    function safeTransferFrom(IERC20 token, address from, address to, uint256 value) internal {\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.transferFrom.selector, from, to, value));\\n    }\\n\\n    /**\\n     * @dev Deprecated. This function has issues similar to the ones found in\\n     * {IERC20-approve}, and its usage is discouraged.\\n     *\\n     * Whenever possible, use {safeIncreaseAllowance} and\\n     * {safeDecreaseAllowance} instead.\\n     */\\n    function safeApprove(IERC20 token, address spender, uint256 value) internal {\\n        // safeApprove should only be called when setting an initial allowance,\\n        // or when resetting it to zero. To increase and decrease it, use\\n        // 'safeIncreaseAllowance' and 'safeDecreaseAllowance'\\n        require(\\n            (value == 0) || (token.allowance(address(this), spender) == 0),\\n            \\\"SafeERC20: approve from non-zero to non-zero allowance\\\"\\n        );\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, value));\\n    }\\n\\n    /**\\n     * @dev Increase the calling contract's allowance toward `spender` by `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeIncreaseAllowance(IERC20 token, address spender, uint256 value) internal {\\n        uint256 oldAllowance = token.allowance(address(this), spender);\\n        _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, oldAllowance + value));\\n    }\\n\\n    /**\\n     * @dev Decrease the calling contract's allowance toward `spender` by `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful.\\n     */\\n    function safeDecreaseAllowance(IERC20 token, address spender, uint256 value) internal {\\n        unchecked {\\n            uint256 oldAllowance = token.allowance(address(this), spender);\\n            require(oldAllowance >= value, \\\"SafeERC20: decreased allowance below zero\\\");\\n            _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, oldAllowance - value));\\n        }\\n    }\\n\\n    /**\\n     * @dev Set the calling contract's allowance toward `spender` to `value`. If `token` returns no value,\\n     * non-reverting calls are assumed to be successful. Meant to be used with tokens that require the approval\\n     * to be set to zero before setting it to a non-zero value, such as USDT.\\n     */\\n    function forceApprove(IERC20 token, address spender, uint256 value) internal {\\n        bytes memory approvalCall = abi.encodeWithSelector(token.approve.selector, spender, value);\\n\\n        if (!_callOptionalReturnBool(token, approvalCall)) {\\n            _callOptionalReturn(token, abi.encodeWithSelector(token.approve.selector, spender, 0));\\n            _callOptionalReturn(token, approvalCall);\\n        }\\n    }\\n\\n    /**\\n     * @dev Use a ERC-2612 signature to set the `owner` approval toward `spender` on `token`.\\n     * Revert on invalid signature.\\n     */\\n    function safePermit(\\n        IERC20Permit token,\\n        address owner,\\n        address spender,\\n        uint256 value,\\n        uint256 deadline,\\n        uint8 v,\\n        bytes32 r,\\n        bytes32 s\\n    ) internal {\\n        uint256 nonceBefore = token.nonces(owner);\\n        token.permit(owner, spender, value, deadline, v, r, s);\\n        uint256 nonceAfter = token.nonces(owner);\\n        require(nonceAfter == nonceBefore + 1, \\\"SafeERC20: permit did not succeed\\\");\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     */\\n    function _callOptionalReturn(IERC20 token, bytes memory data) private {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We use {Address-functionCall} to perform this call, which verifies that\\n        // the target address contains contract code and also asserts for success in the low-level call.\\n\\n        bytes memory returndata = address(token).functionCall(data, \\\"SafeERC20: low-level call failed\\\");\\n        require(returndata.length == 0 || abi.decode(returndata, (bool)), \\\"SafeERC20: ERC20 operation did not succeed\\\");\\n    }\\n\\n    /**\\n     * @dev Imitates a Solidity high-level call (i.e. a regular function call to a contract), relaxing the requirement\\n     * on the return value: the return value is optional (but if data is returned, it must not be false).\\n     * @param token The token targeted by the call.\\n     * @param data The call data (encoded using abi.encode or one of its variants).\\n     *\\n     * This is a variant of {_callOptionalReturn} that silents catches all reverts and returns a bool instead.\\n     */\\n    function _callOptionalReturnBool(IERC20 token, bytes memory data) private returns (bool) {\\n        // We need to perform a low level call here, to bypass Solidity's return data size checking mechanism, since\\n        // we're implementing it ourselves. We cannot use {Address-functionCall} here since this should return false\\n        // and not revert is the subcall reverts.\\n\\n        (bool success, bytes memory returndata) = address(token).call(data);\\n        return\\n            success && (returndata.length == 0 || abi.decode(returndata, (bool))) && Address.isContract(address(token));\\n    }\\n}\\n\",\"keccak256\":\"0xabefac93435967b4d36a4fabcbdbb918d1f0b7ae3c3d85bc30923b326c927ed1\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/ERC721.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC721/ERC721.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC721.sol\\\";\\nimport \\\"./IERC721Receiver.sol\\\";\\nimport \\\"./extensions/IERC721Metadata.sol\\\";\\nimport \\\"../../utils/Address.sol\\\";\\nimport \\\"../../utils/Context.sol\\\";\\nimport \\\"../../utils/Strings.sol\\\";\\nimport \\\"../../utils/introspection/ERC165.sol\\\";\\n\\n/**\\n * @dev Implementation of https://eips.ethereum.org/EIPS/eip-721[ERC721] Non-Fungible Token Standard, including\\n * the Metadata extension, but not including the Enumerable extension, which is available separately as\\n * {ERC721Enumerable}.\\n */\\ncontract ERC721 is Context, ERC165, IERC721, IERC721Metadata {\\n    using Address for address;\\n    using Strings for uint256;\\n\\n    // Token name\\n    string private _name;\\n\\n    // Token symbol\\n    string private _symbol;\\n\\n    // Mapping from token ID to owner address\\n    mapping(uint256 => address) private _owners;\\n\\n    // Mapping owner address to token count\\n    mapping(address => uint256) private _balances;\\n\\n    // Mapping from token ID to approved address\\n    mapping(uint256 => address) private _tokenApprovals;\\n\\n    // Mapping from owner to operator approvals\\n    mapping(address => mapping(address => bool)) private _operatorApprovals;\\n\\n    /**\\n     * @dev Initializes the contract by setting a `name` and a `symbol` to the token collection.\\n     */\\n    constructor(string memory name_, string memory symbol_) {\\n        _name = name_;\\n        _symbol = symbol_;\\n    }\\n\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 interfaceId) public view virtual override(ERC165, IERC165) returns (bool) {\\n        return\\n            interfaceId == type(IERC721).interfaceId ||\\n            interfaceId == type(IERC721Metadata).interfaceId ||\\n            super.supportsInterface(interfaceId);\\n    }\\n\\n    /**\\n     * @dev See {IERC721-balanceOf}.\\n     */\\n    function balanceOf(address owner) public view virtual override returns (uint256) {\\n        require(owner != address(0), \\\"ERC721: address zero is not a valid owner\\\");\\n        return _balances[owner];\\n    }\\n\\n    /**\\n     * @dev See {IERC721-ownerOf}.\\n     */\\n    function ownerOf(uint256 tokenId) public view virtual override returns (address) {\\n        address owner = _ownerOf(tokenId);\\n        require(owner != address(0), \\\"ERC721: invalid token ID\\\");\\n        return owner;\\n    }\\n\\n    /**\\n     * @dev See {IERC721Metadata-name}.\\n     */\\n    function name() public view virtual override returns (string memory) {\\n        return _name;\\n    }\\n\\n    /**\\n     * @dev See {IERC721Metadata-symbol}.\\n     */\\n    function symbol() public view virtual override returns (string memory) {\\n        return _symbol;\\n    }\\n\\n    /**\\n     * @dev See {IERC721Metadata-tokenURI}.\\n     */\\n    function tokenURI(uint256 tokenId) public view virtual override returns (string memory) {\\n        _requireMinted(tokenId);\\n\\n        string memory baseURI = _baseURI();\\n        return bytes(baseURI).length > 0 ? string(abi.encodePacked(baseURI, tokenId.toString())) : \\\"\\\";\\n    }\\n\\n    /**\\n     * @dev Base URI for computing {tokenURI}. If set, the resulting URI for each\\n     * token will be the concatenation of the `baseURI` and the `tokenId`. Empty\\n     * by default, can be overridden in child contracts.\\n     */\\n    function _baseURI() internal view virtual returns (string memory) {\\n        return \\\"\\\";\\n    }\\n\\n    /**\\n     * @dev See {IERC721-approve}.\\n     */\\n    function approve(address to, uint256 tokenId) public virtual override {\\n        address owner = ERC721.ownerOf(tokenId);\\n        require(to != owner, \\\"ERC721: approval to current owner\\\");\\n\\n        require(\\n            _msgSender() == owner || isApprovedForAll(owner, _msgSender()),\\n            \\\"ERC721: approve caller is not token owner or approved for all\\\"\\n        );\\n\\n        _approve(to, tokenId);\\n    }\\n\\n    /**\\n     * @dev See {IERC721-getApproved}.\\n     */\\n    function getApproved(uint256 tokenId) public view virtual override returns (address) {\\n        _requireMinted(tokenId);\\n\\n        return _tokenApprovals[tokenId];\\n    }\\n\\n    /**\\n     * @dev See {IERC721-setApprovalForAll}.\\n     */\\n    function setApprovalForAll(address operator, bool approved) public virtual override {\\n        _setApprovalForAll(_msgSender(), operator, approved);\\n    }\\n\\n    /**\\n     * @dev See {IERC721-isApprovedForAll}.\\n     */\\n    function isApprovedForAll(address owner, address operator) public view virtual override returns (bool) {\\n        return _operatorApprovals[owner][operator];\\n    }\\n\\n    /**\\n     * @dev See {IERC721-transferFrom}.\\n     */\\n    function transferFrom(address from, address to, uint256 tokenId) public virtual override {\\n        //solhint-disable-next-line max-line-length\\n        require(_isApprovedOrOwner(_msgSender(), tokenId), \\\"ERC721: caller is not token owner or approved\\\");\\n\\n        _transfer(from, to, tokenId);\\n    }\\n\\n    /**\\n     * @dev See {IERC721-safeTransferFrom}.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId) public virtual override {\\n        safeTransferFrom(from, to, tokenId, \\\"\\\");\\n    }\\n\\n    /**\\n     * @dev See {IERC721-safeTransferFrom}.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId, bytes memory data) public virtual override {\\n        require(_isApprovedOrOwner(_msgSender(), tokenId), \\\"ERC721: caller is not token owner or approved\\\");\\n        _safeTransfer(from, to, tokenId, data);\\n    }\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * `data` is additional data, it has no specified format and it is sent in call to `to`.\\n     *\\n     * This internal function is equivalent to {safeTransferFrom}, and can be used to e.g.\\n     * implement alternative mechanisms to perform token transfer, such as signature-based.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function _safeTransfer(address from, address to, uint256 tokenId, bytes memory data) internal virtual {\\n        _transfer(from, to, tokenId);\\n        require(_checkOnERC721Received(from, to, tokenId, data), \\\"ERC721: transfer to non ERC721Receiver implementer\\\");\\n    }\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId`. Does NOT revert if token doesn't exist\\n     */\\n    function _ownerOf(uint256 tokenId) internal view virtual returns (address) {\\n        return _owners[tokenId];\\n    }\\n\\n    /**\\n     * @dev Returns whether `tokenId` exists.\\n     *\\n     * Tokens can be managed by their owner or approved accounts via {approve} or {setApprovalForAll}.\\n     *\\n     * Tokens start existing when they are minted (`_mint`),\\n     * and stop existing when they are burned (`_burn`).\\n     */\\n    function _exists(uint256 tokenId) internal view virtual returns (bool) {\\n        return _ownerOf(tokenId) != address(0);\\n    }\\n\\n    /**\\n     * @dev Returns whether `spender` is allowed to manage `tokenId`.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function _isApprovedOrOwner(address spender, uint256 tokenId) internal view virtual returns (bool) {\\n        address owner = ERC721.ownerOf(tokenId);\\n        return (spender == owner || isApprovedForAll(owner, spender) || getApproved(tokenId) == spender);\\n    }\\n\\n    /**\\n     * @dev Safely mints `tokenId` and transfers it to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must not exist.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function _safeMint(address to, uint256 tokenId) internal virtual {\\n        _safeMint(to, tokenId, \\\"\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-ERC721-_safeMint-address-uint256-}[`_safeMint`], with an additional `data` parameter which is\\n     * forwarded in {IERC721Receiver-onERC721Received} to contract recipients.\\n     */\\n    function _safeMint(address to, uint256 tokenId, bytes memory data) internal virtual {\\n        _mint(to, tokenId);\\n        require(\\n            _checkOnERC721Received(address(0), to, tokenId, data),\\n            \\\"ERC721: transfer to non ERC721Receiver implementer\\\"\\n        );\\n    }\\n\\n    /**\\n     * @dev Mints `tokenId` and transfers it to `to`.\\n     *\\n     * WARNING: Usage of this method is discouraged, use {_safeMint} whenever possible\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must not exist.\\n     * - `to` cannot be the zero address.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function _mint(address to, uint256 tokenId) internal virtual {\\n        require(to != address(0), \\\"ERC721: mint to the zero address\\\");\\n        require(!_exists(tokenId), \\\"ERC721: token already minted\\\");\\n\\n        _beforeTokenTransfer(address(0), to, tokenId, 1);\\n\\n        // Check that tokenId was not minted by `_beforeTokenTransfer` hook\\n        require(!_exists(tokenId), \\\"ERC721: token already minted\\\");\\n\\n        unchecked {\\n            // Will not overflow unless all 2**256 token ids are minted to the same owner.\\n            // Given that tokens are minted one by one, it is impossible in practice that\\n            // this ever happens. Might change if we allow batch minting.\\n            // The ERC fails to describe this case.\\n            _balances[to] += 1;\\n        }\\n\\n        _owners[tokenId] = to;\\n\\n        emit Transfer(address(0), to, tokenId);\\n\\n        _afterTokenTransfer(address(0), to, tokenId, 1);\\n    }\\n\\n    /**\\n     * @dev Destroys `tokenId`.\\n     * The approval is cleared when the token is burned.\\n     * This is an internal function that does not check if the sender is authorized to operate on the token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function _burn(uint256 tokenId) internal virtual {\\n        address owner = ERC721.ownerOf(tokenId);\\n\\n        _beforeTokenTransfer(owner, address(0), tokenId, 1);\\n\\n        // Update ownership in case tokenId was transferred by `_beforeTokenTransfer` hook\\n        owner = ERC721.ownerOf(tokenId);\\n\\n        // Clear approvals\\n        delete _tokenApprovals[tokenId];\\n\\n        unchecked {\\n            // Cannot overflow, as that would require more tokens to be burned/transferred\\n            // out than the owner initially received through minting and transferring in.\\n            _balances[owner] -= 1;\\n        }\\n        delete _owners[tokenId];\\n\\n        emit Transfer(owner, address(0), tokenId);\\n\\n        _afterTokenTransfer(owner, address(0), tokenId, 1);\\n    }\\n\\n    /**\\n     * @dev Transfers `tokenId` from `from` to `to`.\\n     *  As opposed to {transferFrom}, this imposes no restrictions on msg.sender.\\n     *\\n     * Requirements:\\n     *\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function _transfer(address from, address to, uint256 tokenId) internal virtual {\\n        require(ERC721.ownerOf(tokenId) == from, \\\"ERC721: transfer from incorrect owner\\\");\\n        require(to != address(0), \\\"ERC721: transfer to the zero address\\\");\\n\\n        _beforeTokenTransfer(from, to, tokenId, 1);\\n\\n        // Check that tokenId was not transferred by `_beforeTokenTransfer` hook\\n        require(ERC721.ownerOf(tokenId) == from, \\\"ERC721: transfer from incorrect owner\\\");\\n\\n        // Clear approvals from the previous owner\\n        delete _tokenApprovals[tokenId];\\n\\n        unchecked {\\n            // `_balances[from]` cannot overflow for the same reason as described in `_burn`:\\n            // `from`'s balance is the number of token held, which is at least one before the current\\n            // transfer.\\n            // `_balances[to]` could overflow in the conditions described in `_mint`. That would require\\n            // all 2**256 token ids to be minted, which in practice is impossible.\\n            _balances[from] -= 1;\\n            _balances[to] += 1;\\n        }\\n        _owners[tokenId] = to;\\n\\n        emit Transfer(from, to, tokenId);\\n\\n        _afterTokenTransfer(from, to, tokenId, 1);\\n    }\\n\\n    /**\\n     * @dev Approve `to` to operate on `tokenId`\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function _approve(address to, uint256 tokenId) internal virtual {\\n        _tokenApprovals[tokenId] = to;\\n        emit Approval(ERC721.ownerOf(tokenId), to, tokenId);\\n    }\\n\\n    /**\\n     * @dev Approve `operator` to operate on all of `owner` tokens\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function _setApprovalForAll(address owner, address operator, bool approved) internal virtual {\\n        require(owner != operator, \\\"ERC721: approve to caller\\\");\\n        _operatorApprovals[owner][operator] = approved;\\n        emit ApprovalForAll(owner, operator, approved);\\n    }\\n\\n    /**\\n     * @dev Reverts if the `tokenId` has not been minted yet.\\n     */\\n    function _requireMinted(uint256 tokenId) internal view virtual {\\n        require(_exists(tokenId), \\\"ERC721: invalid token ID\\\");\\n    }\\n\\n    /**\\n     * @dev Internal function to invoke {IERC721Receiver-onERC721Received} on a target address.\\n     * The call is not executed if the target address is not a contract.\\n     *\\n     * @param from address representing the previous owner of the given token ID\\n     * @param to target address that will receive the tokens\\n     * @param tokenId uint256 ID of the token to be transferred\\n     * @param data bytes optional data to send along with the call\\n     * @return bool whether the call correctly returned the expected magic value\\n     */\\n    function _checkOnERC721Received(\\n        address from,\\n        address to,\\n        uint256 tokenId,\\n        bytes memory data\\n    ) private returns (bool) {\\n        if (to.isContract()) {\\n            try IERC721Receiver(to).onERC721Received(_msgSender(), from, tokenId, data) returns (bytes4 retval) {\\n                return retval == IERC721Receiver.onERC721Received.selector;\\n            } catch (bytes memory reason) {\\n                if (reason.length == 0) {\\n                    revert(\\\"ERC721: transfer to non ERC721Receiver implementer\\\");\\n                } else {\\n                    /// @solidity memory-safe-assembly\\n                    assembly {\\n                        revert(add(32, reason), mload(reason))\\n                    }\\n                }\\n            }\\n        } else {\\n            return true;\\n        }\\n    }\\n\\n    /**\\n     * @dev Hook that is called before any token transfer. This includes minting and burning. If {ERC721Consecutive} is\\n     * used, the hook may be called as part of a consecutive (batch) mint, as indicated by `batchSize` greater than 1.\\n     *\\n     * Calling conditions:\\n     *\\n     * - When `from` and `to` are both non-zero, ``from``'s tokens will be transferred to `to`.\\n     * - When `from` is zero, the tokens will be minted for `to`.\\n     * - When `to` is zero, ``from``'s tokens will be burned.\\n     * - `from` and `to` are never both zero.\\n     * - `batchSize` is non-zero.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _beforeTokenTransfer(address from, address to, uint256 firstTokenId, uint256 batchSize) internal virtual {}\\n\\n    /**\\n     * @dev Hook that is called after any token transfer. This includes minting and burning. If {ERC721Consecutive} is\\n     * used, the hook may be called as part of a consecutive (batch) mint, as indicated by `batchSize` greater than 1.\\n     *\\n     * Calling conditions:\\n     *\\n     * - When `from` and `to` are both non-zero, ``from``'s tokens were transferred to `to`.\\n     * - When `from` is zero, the tokens were minted for `to`.\\n     * - When `to` is zero, ``from``'s tokens were burned.\\n     * - `from` and `to` are never both zero.\\n     * - `batchSize` is non-zero.\\n     *\\n     * To learn more about hooks, head to xref:ROOT:extending-contracts.adoc#using-hooks[Using Hooks].\\n     */\\n    function _afterTokenTransfer(address from, address to, uint256 firstTokenId, uint256 batchSize) internal virtual {}\\n\\n    /**\\n     * @dev Unsafe write access to the balances, used by extensions that \\\"mint\\\" tokens using an {ownerOf} override.\\n     *\\n     * WARNING: Anyone calling this MUST ensure that the balances remain consistent with the ownership. The invariant\\n     * being that for any address `a` the value returned by `balanceOf(a)` must be equal to the number of tokens such\\n     * that `ownerOf(tokenId)` is `a`.\\n     */\\n    // solhint-disable-next-line func-name-mixedcase\\n    function __unsafe_increaseBalance(address account, uint256 amount) internal {\\n        _balances[account] += amount;\\n    }\\n}\\n\",\"keccak256\":\"0x2c309e7df9e05e6ce15bedfe74f3c61b467fc37e0fae9eab496acf5ea0bbd7ff\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/IERC721.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC721/IERC721.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721 is IERC165 {\\n    /**\\n     * @dev Emitted when `tokenId` token is transferred from `from` to `to`.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.\\n     */\\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.\\n     */\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Returns the number of tokens in ``owner``'s account.\\n     */\\n    function balanceOf(address owner) external view returns (uint256 balance);\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId, bytes calldata data) external;\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must have been allowed to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(address from, address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Transfers `tokenId` token from `from` to `to`.\\n     *\\n     * WARNING: Note that the caller is responsible to confirm that the recipient is capable of receiving ERC721\\n     * or else they may be permanently lost. Usage of {safeTransferFrom} prevents loss, though the caller must\\n     * understand this adds an external call which potentially creates a reentrancy vulnerability.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(address from, address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Gives permission to `to` to transfer `tokenId` token to another account.\\n     * The approval is cleared when the token is transferred.\\n     *\\n     * Only a single account can be approved at a time, so approving the zero address clears previous approvals.\\n     *\\n     * Requirements:\\n     *\\n     * - The caller must own the token or be an approved operator.\\n     * - `tokenId` must exist.\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Approve or remove `operator` as an operator for the caller.\\n     * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.\\n     *\\n     * Requirements:\\n     *\\n     * - The `operator` cannot be the caller.\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function setApprovalForAll(address operator, bool approved) external;\\n\\n    /**\\n     * @dev Returns the account approved for `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n    /**\\n     * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.\\n     *\\n     * See {setApprovalForAll}\\n     */\\n    function isApprovedForAll(address owner, address operator) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x5bce51e11f7d194b79ea59fe00c9e8de9fa2c5530124960f29a24d4c740a3266\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/IERC721Receiver.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.6.0) (token/ERC721/IERC721Receiver.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @title ERC721 token receiver interface\\n * @dev Interface for any contract that wants to support safeTransfers\\n * from ERC721 asset contracts.\\n */\\ninterface IERC721Receiver {\\n    /**\\n     * @dev Whenever an {IERC721} `tokenId` token is transferred to this contract via {IERC721-safeTransferFrom}\\n     * by `operator` from `from`, this function is called.\\n     *\\n     * It must return its Solidity selector to confirm the token transfer.\\n     * If any other value is returned or the interface is not implemented by the recipient, the transfer will be reverted.\\n     *\\n     * The selector can be obtained in Solidity with `IERC721Receiver.onERC721Received.selector`.\\n     */\\n    function onERC721Received(\\n        address operator,\\n        address from,\\n        uint256 tokenId,\\n        bytes calldata data\\n    ) external returns (bytes4);\\n}\\n\",\"keccak256\":\"0xa82b58eca1ee256be466e536706850163d2ec7821945abd6b4778cfb3bee37da\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/extensions/IERC721Metadata.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (token/ERC721/extensions/IERC721Metadata.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC721.sol\\\";\\n\\n/**\\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\\n * @dev See https://eips.ethereum.org/EIPS/eip-721\\n */\\ninterface IERC721Metadata is IERC721 {\\n    /**\\n     * @dev Returns the token collection name.\\n     */\\n    function name() external view returns (string memory);\\n\\n    /**\\n     * @dev Returns the token collection symbol.\\n     */\\n    function symbol() external view returns (string memory);\\n\\n    /**\\n     * @dev Returns the Uniform Resource Identifier (URI) for `tokenId` token.\\n     */\\n    function tokenURI(uint256 tokenId) external view returns (string memory);\\n}\\n\",\"keccak256\":\"0x75b829ff2f26c14355d1cba20e16fe7b29ca58eb5fef665ede48bc0f9c6c74b9\",\"license\":\"MIT\"},\"@openzeppelin/contracts/token/ERC721/utils/ERC721Holder.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (token/ERC721/utils/ERC721Holder.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../IERC721Receiver.sol\\\";\\n\\n/**\\n * @dev Implementation of the {IERC721Receiver} interface.\\n *\\n * Accepts all token transfers.\\n * Make sure the contract is able to use its token with {IERC721-safeTransferFrom}, {IERC721-approve} or {IERC721-setApprovalForAll}.\\n */\\ncontract ERC721Holder is IERC721Receiver {\\n    /**\\n     * @dev See {IERC721Receiver-onERC721Received}.\\n     *\\n     * Always returns `IERC721Receiver.onERC721Received.selector`.\\n     */\\n    function onERC721Received(address, address, uint256, bytes memory) public virtual override returns (bytes4) {\\n        return this.onERC721Received.selector;\\n    }\\n}\\n\",\"keccak256\":\"0x67ef46fef257faae47adb630aad49694dda0334e5f7a7c5fb386243b974886b5\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Address.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/Address.sol)\\n\\npragma solidity ^0.8.1;\\n\\n/**\\n * @dev Collection of functions related to the address type\\n */\\nlibrary Address {\\n    /**\\n     * @dev Returns true if `account` is a contract.\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * It is unsafe to assume that an address for which this function returns\\n     * false is an externally-owned account (EOA) and not a contract.\\n     *\\n     * Among others, `isContract` will return false for the following\\n     * types of addresses:\\n     *\\n     *  - an externally-owned account\\n     *  - a contract in construction\\n     *  - an address where a contract will be created\\n     *  - an address where a contract lived, but was destroyed\\n     *\\n     * Furthermore, `isContract` will also return true if the target contract within\\n     * the same transaction is already scheduled for destruction by `SELFDESTRUCT`,\\n     * which only has an effect at the end of a transaction.\\n     * ====\\n     *\\n     * [IMPORTANT]\\n     * ====\\n     * You shouldn't rely on `isContract` to protect against flash loan attacks!\\n     *\\n     * Preventing calls from contracts is highly discouraged. It breaks composability, breaks support for smart wallets\\n     * like Gnosis Safe, and does not provide security since it can be circumvented by calling from a contract\\n     * constructor.\\n     * ====\\n     */\\n    function isContract(address account) internal view returns (bool) {\\n        // This method relies on extcodesize/address.code.length, which returns 0\\n        // for contracts in construction, since the code is only stored at the end\\n        // of the constructor execution.\\n\\n        return account.code.length > 0;\\n    }\\n\\n    /**\\n     * @dev Replacement for Solidity's `transfer`: sends `amount` wei to\\n     * `recipient`, forwarding all available gas and reverting on errors.\\n     *\\n     * https://eips.ethereum.org/EIPS/eip-1884[EIP1884] increases the gas cost\\n     * of certain opcodes, possibly making contracts go over the 2300 gas limit\\n     * imposed by `transfer`, making them unable to receive funds via\\n     * `transfer`. {sendValue} removes this limitation.\\n     *\\n     * https://consensys.net/diligence/blog/2019/09/stop-using-soliditys-transfer-now/[Learn more].\\n     *\\n     * IMPORTANT: because control is transferred to `recipient`, care must be\\n     * taken to not create reentrancy vulnerabilities. Consider using\\n     * {ReentrancyGuard} or the\\n     * https://solidity.readthedocs.io/en/v0.8.0/security-considerations.html#use-the-checks-effects-interactions-pattern[checks-effects-interactions pattern].\\n     */\\n    function sendValue(address payable recipient, uint256 amount) internal {\\n        require(address(this).balance >= amount, \\\"Address: insufficient balance\\\");\\n\\n        (bool success, ) = recipient.call{value: amount}(\\\"\\\");\\n        require(success, \\\"Address: unable to send value, recipient may have reverted\\\");\\n    }\\n\\n    /**\\n     * @dev Performs a Solidity function call using a low level `call`. A\\n     * plain `call` is an unsafe replacement for a function call: use this\\n     * function instead.\\n     *\\n     * If `target` reverts with a revert reason, it is bubbled up by this\\n     * function (like regular Solidity function calls).\\n     *\\n     * Returns the raw returned data. To convert to the expected return value,\\n     * use https://solidity.readthedocs.io/en/latest/units-and-global-variables.html?highlight=abi.decode#abi-encoding-and-decoding-functions[`abi.decode`].\\n     *\\n     * Requirements:\\n     *\\n     * - `target` must be a contract.\\n     * - calling `target` with `data` must not revert.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, \\\"Address: low-level call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`], but with\\n     * `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, 0, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but also transferring `value` wei to `target`.\\n     *\\n     * Requirements:\\n     *\\n     * - the calling contract must have an ETH balance of at least `value`.\\n     * - the called Solidity function must be `payable`.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(address target, bytes memory data, uint256 value) internal returns (bytes memory) {\\n        return functionCallWithValue(target, data, value, \\\"Address: low-level call with value failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCallWithValue-address-bytes-uint256-}[`functionCallWithValue`], but\\n     * with `errorMessage` as a fallback revert reason when `target` reverts.\\n     *\\n     * _Available since v3.1._\\n     */\\n    function functionCallWithValue(\\n        address target,\\n        bytes memory data,\\n        uint256 value,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        require(address(this).balance >= value, \\\"Address: insufficient balance for call\\\");\\n        (bool success, bytes memory returndata) = target.call{value: value}(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(address target, bytes memory data) internal view returns (bytes memory) {\\n        return functionStaticCall(target, data, \\\"Address: low-level static call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a static call.\\n     *\\n     * _Available since v3.3._\\n     */\\n    function functionStaticCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.staticcall(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(address target, bytes memory data) internal returns (bytes memory) {\\n        return functionDelegateCall(target, data, \\\"Address: low-level delegate call failed\\\");\\n    }\\n\\n    /**\\n     * @dev Same as {xref-Address-functionCall-address-bytes-string-}[`functionCall`],\\n     * but performing a delegate call.\\n     *\\n     * _Available since v3.4._\\n     */\\n    function functionDelegateCall(\\n        address target,\\n        bytes memory data,\\n        string memory errorMessage\\n    ) internal returns (bytes memory) {\\n        (bool success, bytes memory returndata) = target.delegatecall(data);\\n        return verifyCallResultFromTarget(target, success, returndata, errorMessage);\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call to smart-contract was successful, and revert (either by bubbling\\n     * the revert reason or using the provided one) in case of unsuccessful call or if target was not a contract.\\n     *\\n     * _Available since v4.8._\\n     */\\n    function verifyCallResultFromTarget(\\n        address target,\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal view returns (bytes memory) {\\n        if (success) {\\n            if (returndata.length == 0) {\\n                // only check isContract if the call was successful and the return data is empty\\n                // otherwise we already know that it was a contract\\n                require(isContract(target), \\\"Address: call to non-contract\\\");\\n            }\\n            return returndata;\\n        } else {\\n            _revert(returndata, errorMessage);\\n        }\\n    }\\n\\n    /**\\n     * @dev Tool to verify that a low level call was successful, and revert if it wasn't, either by bubbling the\\n     * revert reason or using the provided one.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function verifyCallResult(\\n        bool success,\\n        bytes memory returndata,\\n        string memory errorMessage\\n    ) internal pure returns (bytes memory) {\\n        if (success) {\\n            return returndata;\\n        } else {\\n            _revert(returndata, errorMessage);\\n        }\\n    }\\n\\n    function _revert(bytes memory returndata, string memory errorMessage) private pure {\\n        // Look for revert reason and bubble it up if present\\n        if (returndata.length > 0) {\\n            // The easiest way to bubble the revert reason is using memory via assembly\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                let returndata_size := mload(returndata)\\n                revert(add(32, returndata), returndata_size)\\n            }\\n        } else {\\n            revert(errorMessage);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x006dd67219697fe68d7fbfdea512e7c4cb64a43565ed86171d67e844982da6fa\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/Context.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Provides information about the current execution context, including the\\n * sender of the transaction and its data. While these are generally available\\n * via msg.sender and msg.data, they should not be accessed in such a direct\\n * manner, since when dealing with meta-transactions the account sending and\\n * paying for execution may not be the actual sender (as far as an application\\n * is concerned).\\n *\\n * This contract is only required for intermediate, library-like contracts.\\n */\\nabstract contract Context {\\n    function _msgSender() internal view virtual returns (address) {\\n        return msg.sender;\\n    }\\n\\n    function _msgData() internal view virtual returns (bytes calldata) {\\n        return msg.data;\\n    }\\n}\\n\",\"keccak256\":\"0xe2e337e6dde9ef6b680e07338c493ebea1b5fd09b43424112868e9cc1706bca7\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/Strings.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/Strings.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./math/Math.sol\\\";\\nimport \\\"./math/SignedMath.sol\\\";\\n\\n/**\\n * @dev String operations.\\n */\\nlibrary Strings {\\n    bytes16 private constant _SYMBOLS = \\\"0123456789abcdef\\\";\\n    uint8 private constant _ADDRESS_LENGTH = 20;\\n\\n    /**\\n     * @dev Converts a `uint256` to its ASCII `string` decimal representation.\\n     */\\n    function toString(uint256 value) internal pure returns (string memory) {\\n        unchecked {\\n            uint256 length = Math.log10(value) + 1;\\n            string memory buffer = new string(length);\\n            uint256 ptr;\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                ptr := add(buffer, add(32, length))\\n            }\\n            while (true) {\\n                ptr--;\\n                /// @solidity memory-safe-assembly\\n                assembly {\\n                    mstore8(ptr, byte(mod(value, 10), _SYMBOLS))\\n                }\\n                value /= 10;\\n                if (value == 0) break;\\n            }\\n            return buffer;\\n        }\\n    }\\n\\n    /**\\n     * @dev Converts a `int256` to its ASCII `string` decimal representation.\\n     */\\n    function toString(int256 value) internal pure returns (string memory) {\\n        return string(abi.encodePacked(value < 0 ? \\\"-\\\" : \\\"\\\", toString(SignedMath.abs(value))));\\n    }\\n\\n    /**\\n     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation.\\n     */\\n    function toHexString(uint256 value) internal pure returns (string memory) {\\n        unchecked {\\n            return toHexString(value, Math.log256(value) + 1);\\n        }\\n    }\\n\\n    /**\\n     * @dev Converts a `uint256` to its ASCII `string` hexadecimal representation with fixed length.\\n     */\\n    function toHexString(uint256 value, uint256 length) internal pure returns (string memory) {\\n        bytes memory buffer = new bytes(2 * length + 2);\\n        buffer[0] = \\\"0\\\";\\n        buffer[1] = \\\"x\\\";\\n        for (uint256 i = 2 * length + 1; i > 1; --i) {\\n            buffer[i] = _SYMBOLS[value & 0xf];\\n            value >>= 4;\\n        }\\n        require(value == 0, \\\"Strings: hex length insufficient\\\");\\n        return string(buffer);\\n    }\\n\\n    /**\\n     * @dev Converts an `address` with fixed length of 20 bytes to its not checksummed ASCII `string` hexadecimal representation.\\n     */\\n    function toHexString(address addr) internal pure returns (string memory) {\\n        return toHexString(uint256(uint160(addr)), _ADDRESS_LENGTH);\\n    }\\n\\n    /**\\n     * @dev Returns true if the two strings are equal.\\n     */\\n    function equal(string memory a, string memory b) internal pure returns (bool) {\\n        return keccak256(bytes(a)) == keccak256(bytes(b));\\n    }\\n}\\n\",\"keccak256\":\"0x3088eb2868e8d13d89d16670b5f8612c4ab9ff8956272837d8e90106c59c14a0\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/cryptography/ECDSA.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/cryptography/ECDSA.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../Strings.sol\\\";\\n\\n/**\\n * @dev Elliptic Curve Digital Signature Algorithm (ECDSA) operations.\\n *\\n * These functions can be used to verify that a message was signed by the holder\\n * of the private keys of a given address.\\n */\\nlibrary ECDSA {\\n    enum RecoverError {\\n        NoError,\\n        InvalidSignature,\\n        InvalidSignatureLength,\\n        InvalidSignatureS,\\n        InvalidSignatureV // Deprecated in v4.8\\n    }\\n\\n    function _throwError(RecoverError error) private pure {\\n        if (error == RecoverError.NoError) {\\n            return; // no error: do nothing\\n        } else if (error == RecoverError.InvalidSignature) {\\n            revert(\\\"ECDSA: invalid signature\\\");\\n        } else if (error == RecoverError.InvalidSignatureLength) {\\n            revert(\\\"ECDSA: invalid signature length\\\");\\n        } else if (error == RecoverError.InvalidSignatureS) {\\n            revert(\\\"ECDSA: invalid signature 's' value\\\");\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the address that signed a hashed message (`hash`) with\\n     * `signature` or error string. This address can then be used for verification purposes.\\n     *\\n     * The `ecrecover` EVM opcode allows for malleable (non-unique) signatures:\\n     * this function rejects them by requiring the `s` value to be in the lower\\n     * half order, and the `v` value to be either 27 or 28.\\n     *\\n     * IMPORTANT: `hash` _must_ be the result of a hash operation for the\\n     * verification to be secure: it is possible to craft signatures that\\n     * recover to arbitrary addresses for non-hashed data. A safe way to ensure\\n     * this is by receiving a hash of the original message (which may otherwise\\n     * be too long), and then calling {toEthSignedMessageHash} on it.\\n     *\\n     * Documentation for signature generation:\\n     * - with https://web3js.readthedocs.io/en/v1.3.4/web3-eth-accounts.html#sign[Web3.js]\\n     * - with https://docs.ethers.io/v5/api/signer/#Signer-signMessage[ethers]\\n     *\\n     * _Available since v4.3._\\n     */\\n    function tryRecover(bytes32 hash, bytes memory signature) internal pure returns (address, RecoverError) {\\n        if (signature.length == 65) {\\n            bytes32 r;\\n            bytes32 s;\\n            uint8 v;\\n            // ecrecover takes the signature parameters, and the only way to get them\\n            // currently is to use assembly.\\n            /// @solidity memory-safe-assembly\\n            assembly {\\n                r := mload(add(signature, 0x20))\\n                s := mload(add(signature, 0x40))\\n                v := byte(0, mload(add(signature, 0x60)))\\n            }\\n            return tryRecover(hash, v, r, s);\\n        } else {\\n            return (address(0), RecoverError.InvalidSignatureLength);\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns the address that signed a hashed message (`hash`) with\\n     * `signature`. This address can then be used for verification purposes.\\n     *\\n     * The `ecrecover` EVM opcode allows for malleable (non-unique) signatures:\\n     * this function rejects them by requiring the `s` value to be in the lower\\n     * half order, and the `v` value to be either 27 or 28.\\n     *\\n     * IMPORTANT: `hash` _must_ be the result of a hash operation for the\\n     * verification to be secure: it is possible to craft signatures that\\n     * recover to arbitrary addresses for non-hashed data. A safe way to ensure\\n     * this is by receiving a hash of the original message (which may otherwise\\n     * be too long), and then calling {toEthSignedMessageHash} on it.\\n     */\\n    function recover(bytes32 hash, bytes memory signature) internal pure returns (address) {\\n        (address recovered, RecoverError error) = tryRecover(hash, signature);\\n        _throwError(error);\\n        return recovered;\\n    }\\n\\n    /**\\n     * @dev Overload of {ECDSA-tryRecover} that receives the `r` and `vs` short-signature fields separately.\\n     *\\n     * See https://eips.ethereum.org/EIPS/eip-2098[EIP-2098 short signatures]\\n     *\\n     * _Available since v4.3._\\n     */\\n    function tryRecover(bytes32 hash, bytes32 r, bytes32 vs) internal pure returns (address, RecoverError) {\\n        bytes32 s = vs & bytes32(0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff);\\n        uint8 v = uint8((uint256(vs) >> 255) + 27);\\n        return tryRecover(hash, v, r, s);\\n    }\\n\\n    /**\\n     * @dev Overload of {ECDSA-recover} that receives the `r and `vs` short-signature fields separately.\\n     *\\n     * _Available since v4.2._\\n     */\\n    function recover(bytes32 hash, bytes32 r, bytes32 vs) internal pure returns (address) {\\n        (address recovered, RecoverError error) = tryRecover(hash, r, vs);\\n        _throwError(error);\\n        return recovered;\\n    }\\n\\n    /**\\n     * @dev Overload of {ECDSA-tryRecover} that receives the `v`,\\n     * `r` and `s` signature fields separately.\\n     *\\n     * _Available since v4.3._\\n     */\\n    function tryRecover(bytes32 hash, uint8 v, bytes32 r, bytes32 s) internal pure returns (address, RecoverError) {\\n        // EIP-2 still allows signature malleability for ecrecover(). Remove this possibility and make the signature\\n        // unique. Appendix F in the Ethereum Yellow paper (https://ethereum.github.io/yellowpaper/paper.pdf), defines\\n        // the valid range for s in (301): 0 < s < secp256k1n \\u00f7 2 + 1, and for v in (302): v \\u2208 {27, 28}. Most\\n        // signatures from current libraries generate a unique signature with an s-value in the lower half order.\\n        //\\n        // If your library generates malleable signatures, such as s-values in the upper range, calculate a new s-value\\n        // with 0xFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141 - s1 and flip v from 27 to 28 or\\n        // vice versa. If your library also generates signatures with 0/1 for v instead 27/28, add 27 to v to accept\\n        // these malleable signatures as well.\\n        if (uint256(s) > 0x7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF5D576E7357A4501DDFE92F46681B20A0) {\\n            return (address(0), RecoverError.InvalidSignatureS);\\n        }\\n\\n        // If the signature is valid (and not malleable), return the signer address\\n        address signer = ecrecover(hash, v, r, s);\\n        if (signer == address(0)) {\\n            return (address(0), RecoverError.InvalidSignature);\\n        }\\n\\n        return (signer, RecoverError.NoError);\\n    }\\n\\n    /**\\n     * @dev Overload of {ECDSA-recover} that receives the `v`,\\n     * `r` and `s` signature fields separately.\\n     */\\n    function recover(bytes32 hash, uint8 v, bytes32 r, bytes32 s) internal pure returns (address) {\\n        (address recovered, RecoverError error) = tryRecover(hash, v, r, s);\\n        _throwError(error);\\n        return recovered;\\n    }\\n\\n    /**\\n     * @dev Returns an Ethereum Signed Message, created from a `hash`. This\\n     * produces hash corresponding to the one signed with the\\n     * https://eth.wiki/json-rpc/API#eth_sign[`eth_sign`]\\n     * JSON-RPC method as part of EIP-191.\\n     *\\n     * See {recover}.\\n     */\\n    function toEthSignedMessageHash(bytes32 hash) internal pure returns (bytes32 message) {\\n        // 32 is the length in bytes of hash,\\n        // enforced by the type signature above\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            mstore(0x00, \\\"\\\\x19Ethereum Signed Message:\\\\n32\\\")\\n            mstore(0x1c, hash)\\n            message := keccak256(0x00, 0x3c)\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an Ethereum Signed Message, created from `s`. This\\n     * produces hash corresponding to the one signed with the\\n     * https://eth.wiki/json-rpc/API#eth_sign[`eth_sign`]\\n     * JSON-RPC method as part of EIP-191.\\n     *\\n     * See {recover}.\\n     */\\n    function toEthSignedMessageHash(bytes memory s) internal pure returns (bytes32) {\\n        return keccak256(abi.encodePacked(\\\"\\\\x19Ethereum Signed Message:\\\\n\\\", Strings.toString(s.length), s));\\n    }\\n\\n    /**\\n     * @dev Returns an Ethereum Signed Typed Data, created from a\\n     * `domainSeparator` and a `structHash`. This produces hash corresponding\\n     * to the one signed with the\\n     * https://eips.ethereum.org/EIPS/eip-712[`eth_signTypedData`]\\n     * JSON-RPC method as part of EIP-712.\\n     *\\n     * See {recover}.\\n     */\\n    function toTypedDataHash(bytes32 domainSeparator, bytes32 structHash) internal pure returns (bytes32 data) {\\n        /// @solidity memory-safe-assembly\\n        assembly {\\n            let ptr := mload(0x40)\\n            mstore(ptr, \\\"\\\\x19\\\\x01\\\")\\n            mstore(add(ptr, 0x02), domainSeparator)\\n            mstore(add(ptr, 0x22), structHash)\\n            data := keccak256(ptr, 0x42)\\n        }\\n    }\\n\\n    /**\\n     * @dev Returns an Ethereum Signed Data with intended validator, created from a\\n     * `validator` and `data` according to the version 0 of EIP-191.\\n     *\\n     * See {recover}.\\n     */\\n    function toDataWithIntendedValidatorHash(address validator, bytes memory data) internal pure returns (bytes32) {\\n        return keccak256(abi.encodePacked(\\\"\\\\x19\\\\x00\\\", validator, data));\\n    }\\n}\\n\",\"keccak256\":\"0x809bc3edb4bcbef8263fa616c1b60ee0004b50a8a1bfa164d8f57fd31f520c58\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/cryptography/SignatureChecker.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/cryptography/SignatureChecker.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./ECDSA.sol\\\";\\nimport \\\"../../interfaces/IERC1271.sol\\\";\\n\\n/**\\n * @dev Signature verification helper that can be used instead of `ECDSA.recover` to seamlessly support both ECDSA\\n * signatures from externally owned accounts (EOAs) as well as ERC1271 signatures from smart contract wallets like\\n * Argent and Gnosis Safe.\\n *\\n * _Available since v4.1._\\n */\\nlibrary SignatureChecker {\\n    /**\\n     * @dev Checks if a signature is valid for a given signer and data hash. If the signer is a smart contract, the\\n     * signature is validated against that smart contract using ERC1271, otherwise it's validated using `ECDSA.recover`.\\n     *\\n     * NOTE: Unlike ECDSA signatures, contract signatures are revocable, and the outcome of this function can thus\\n     * change through time. It could return true at block N and false at block N+1 (or the opposite).\\n     */\\n    function isValidSignatureNow(address signer, bytes32 hash, bytes memory signature) internal view returns (bool) {\\n        (address recovered, ECDSA.RecoverError error) = ECDSA.tryRecover(hash, signature);\\n        return\\n            (error == ECDSA.RecoverError.NoError && recovered == signer) ||\\n            isValidERC1271SignatureNow(signer, hash, signature);\\n    }\\n\\n    /**\\n     * @dev Checks if a signature is valid for a given signer and data hash. The signature is validated\\n     * against the signer smart contract using ERC1271.\\n     *\\n     * NOTE: Unlike ECDSA signatures, contract signatures are revocable, and the outcome of this function can thus\\n     * change through time. It could return true at block N and false at block N+1 (or the opposite).\\n     */\\n    function isValidERC1271SignatureNow(\\n        address signer,\\n        bytes32 hash,\\n        bytes memory signature\\n    ) internal view returns (bool) {\\n        (bool success, bytes memory result) = signer.staticcall(\\n            abi.encodeWithSelector(IERC1271.isValidSignature.selector, hash, signature)\\n        );\\n        return (success &&\\n            result.length >= 32 &&\\n            abi.decode(result, (bytes32)) == bytes32(IERC1271.isValidSignature.selector));\\n    }\\n}\\n\",\"keccak256\":\"0x3af3ca86df39aac39a0514c84459d691434a108d2151c8ce9d69f32e315cab80\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/ERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/introspection/ERC165.sol)\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"./IERC165.sol\\\";\\n\\n/**\\n * @dev Implementation of the {IERC165} interface.\\n *\\n * Contracts that want to implement ERC165 should inherit from this contract and override {supportsInterface} to check\\n * for the additional interface id that will be supported. For example:\\n *\\n * ```solidity\\n * function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\\n *     return interfaceId == type(MyInterface).interfaceId || super.supportsInterface(interfaceId);\\n * }\\n * ```\\n *\\n * Alternatively, {ERC165Storage} provides an easier to use but more expensive implementation.\\n */\\nabstract contract ERC165 is IERC165 {\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 interfaceId) public view virtual override returns (bool) {\\n        return interfaceId == type(IERC165).interfaceId;\\n    }\\n}\\n\",\"keccak256\":\"0xd10975de010d89fd1c78dc5e8a9a7e7f496198085c151648f20cba166b32582b\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/introspection/IERC165.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts v4.4.1 (utils/introspection/IERC165.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x447a5f3ddc18419d41ff92b3773fb86471b1db25773e07f877f548918a185bf1\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/math/Math.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.9.0) (utils/math/Math.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Standard math utilities missing in the Solidity language.\\n */\\nlibrary Math {\\n    enum Rounding {\\n        Down, // Toward negative infinity\\n        Up, // Toward infinity\\n        Zero // Toward zero\\n    }\\n\\n    /**\\n     * @dev Returns the largest of two numbers.\\n     */\\n    function max(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a > b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the smallest of two numbers.\\n     */\\n    function min(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a < b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the average of two numbers. The result is rounded towards\\n     * zero.\\n     */\\n    function average(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b) / 2 can overflow.\\n        return (a & b) + (a ^ b) / 2;\\n    }\\n\\n    /**\\n     * @dev Returns the ceiling of the division of two numbers.\\n     *\\n     * This differs from standard division with `/` in that it rounds up instead\\n     * of rounding down.\\n     */\\n    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b - 1) / b can overflow on addition, so we distribute.\\n        return a == 0 ? 0 : (a - 1) / b + 1;\\n    }\\n\\n    /**\\n     * @notice Calculates floor(x * y / denominator) with full precision. Throws if result overflows a uint256 or denominator == 0\\n     * @dev Original credit to Remco Bloemen under MIT license (https://xn--2-umb.com/21/muldiv)\\n     * with further edits by Uniswap Labs also under MIT license.\\n     */\\n    function mulDiv(uint256 x, uint256 y, uint256 denominator) internal pure returns (uint256 result) {\\n        unchecked {\\n            // 512-bit multiply [prod1 prod0] = x * y. Compute the product mod 2^256 and mod 2^256 - 1, then use\\n            // use the Chinese Remainder Theorem to reconstruct the 512 bit result. The result is stored in two 256\\n            // variables such that product = prod1 * 2^256 + prod0.\\n            uint256 prod0; // Least significant 256 bits of the product\\n            uint256 prod1; // Most significant 256 bits of the product\\n            assembly {\\n                let mm := mulmod(x, y, not(0))\\n                prod0 := mul(x, y)\\n                prod1 := sub(sub(mm, prod0), lt(mm, prod0))\\n            }\\n\\n            // Handle non-overflow cases, 256 by 256 division.\\n            if (prod1 == 0) {\\n                // Solidity will revert if denominator == 0, unlike the div opcode on its own.\\n                // The surrounding unchecked block does not change this fact.\\n                // See https://docs.soliditylang.org/en/latest/control-structures.html#checked-or-unchecked-arithmetic.\\n                return prod0 / denominator;\\n            }\\n\\n            // Make sure the result is less than 2^256. Also prevents denominator == 0.\\n            require(denominator > prod1, \\\"Math: mulDiv overflow\\\");\\n\\n            ///////////////////////////////////////////////\\n            // 512 by 256 division.\\n            ///////////////////////////////////////////////\\n\\n            // Make division exact by subtracting the remainder from [prod1 prod0].\\n            uint256 remainder;\\n            assembly {\\n                // Compute remainder using mulmod.\\n                remainder := mulmod(x, y, denominator)\\n\\n                // Subtract 256 bit number from 512 bit number.\\n                prod1 := sub(prod1, gt(remainder, prod0))\\n                prod0 := sub(prod0, remainder)\\n            }\\n\\n            // Factor powers of two out of denominator and compute largest power of two divisor of denominator. Always >= 1.\\n            // See https://cs.stackexchange.com/q/138556/92363.\\n\\n            // Does not overflow because the denominator cannot be zero at this stage in the function.\\n            uint256 twos = denominator & (~denominator + 1);\\n            assembly {\\n                // Divide denominator by twos.\\n                denominator := div(denominator, twos)\\n\\n                // Divide [prod1 prod0] by twos.\\n                prod0 := div(prod0, twos)\\n\\n                // Flip twos such that it is 2^256 / twos. If twos is zero, then it becomes one.\\n                twos := add(div(sub(0, twos), twos), 1)\\n            }\\n\\n            // Shift in bits from prod1 into prod0.\\n            prod0 |= prod1 * twos;\\n\\n            // Invert denominator mod 2^256. Now that denominator is an odd number, it has an inverse modulo 2^256 such\\n            // that denominator * inv = 1 mod 2^256. Compute the inverse by starting with a seed that is correct for\\n            // four bits. That is, denominator * inv = 1 mod 2^4.\\n            uint256 inverse = (3 * denominator) ^ 2;\\n\\n            // Use the Newton-Raphson iteration to improve the precision. Thanks to Hensel's lifting lemma, this also works\\n            // in modular arithmetic, doubling the correct bits in each step.\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^8\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^16\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^32\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^64\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^128\\n            inverse *= 2 - denominator * inverse; // inverse mod 2^256\\n\\n            // Because the division is now exact we can divide by multiplying with the modular inverse of denominator.\\n            // This will give us the correct result modulo 2^256. Since the preconditions guarantee that the outcome is\\n            // less than 2^256, this is the final result. We don't need to compute the high bits of the result and prod1\\n            // is no longer required.\\n            result = prod0 * inverse;\\n            return result;\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculates x * y / denominator with full precision, following the selected rounding direction.\\n     */\\n    function mulDiv(uint256 x, uint256 y, uint256 denominator, Rounding rounding) internal pure returns (uint256) {\\n        uint256 result = mulDiv(x, y, denominator);\\n        if (rounding == Rounding.Up && mulmod(x, y, denominator) > 0) {\\n            result += 1;\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Returns the square root of a number. If the number is not a perfect square, the value is rounded down.\\n     *\\n     * Inspired by Henry S. Warren, Jr.'s \\\"Hacker's Delight\\\" (Chapter 11).\\n     */\\n    function sqrt(uint256 a) internal pure returns (uint256) {\\n        if (a == 0) {\\n            return 0;\\n        }\\n\\n        // For our first guess, we get the biggest power of 2 which is smaller than the square root of the target.\\n        //\\n        // We know that the \\\"msb\\\" (most significant bit) of our target number `a` is a power of 2 such that we have\\n        // `msb(a) <= a < 2*msb(a)`. This value can be written `msb(a)=2**k` with `k=log2(a)`.\\n        //\\n        // This can be rewritten `2**log2(a) <= a < 2**(log2(a) + 1)`\\n        // \\u2192 `sqrt(2**k) <= sqrt(a) < sqrt(2**(k+1))`\\n        // \\u2192 `2**(k/2) <= sqrt(a) < 2**((k+1)/2) <= 2**(k/2 + 1)`\\n        //\\n        // Consequently, `2**(log2(a) / 2)` is a good first approximation of `sqrt(a)` with at least 1 correct bit.\\n        uint256 result = 1 << (log2(a) >> 1);\\n\\n        // At this point `result` is an estimation with one bit of precision. We know the true value is a uint128,\\n        // since it is the square root of a uint256. Newton's method converges quadratically (precision doubles at\\n        // every iteration). We thus need at most 7 iteration to turn our partial result with one bit of precision\\n        // into the expected uint128 result.\\n        unchecked {\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            result = (result + a / result) >> 1;\\n            return min(result, a / result);\\n        }\\n    }\\n\\n    /**\\n     * @notice Calculates sqrt(a), following the selected rounding direction.\\n     */\\n    function sqrt(uint256 a, Rounding rounding) internal pure returns (uint256) {\\n        unchecked {\\n            uint256 result = sqrt(a);\\n            return result + (rounding == Rounding.Up && result * result < a ? 1 : 0);\\n        }\\n    }\\n\\n    /**\\n     * @dev Return the log in base 2, rounded down, of a positive value.\\n     * Returns 0 if given 0.\\n     */\\n    function log2(uint256 value) internal pure returns (uint256) {\\n        uint256 result = 0;\\n        unchecked {\\n            if (value >> 128 > 0) {\\n                value >>= 128;\\n                result += 128;\\n            }\\n            if (value >> 64 > 0) {\\n                value >>= 64;\\n                result += 64;\\n            }\\n            if (value >> 32 > 0) {\\n                value >>= 32;\\n                result += 32;\\n            }\\n            if (value >> 16 > 0) {\\n                value >>= 16;\\n                result += 16;\\n            }\\n            if (value >> 8 > 0) {\\n                value >>= 8;\\n                result += 8;\\n            }\\n            if (value >> 4 > 0) {\\n                value >>= 4;\\n                result += 4;\\n            }\\n            if (value >> 2 > 0) {\\n                value >>= 2;\\n                result += 2;\\n            }\\n            if (value >> 1 > 0) {\\n                result += 1;\\n            }\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Return the log in base 2, following the selected rounding direction, of a positive value.\\n     * Returns 0 if given 0.\\n     */\\n    function log2(uint256 value, Rounding rounding) internal pure returns (uint256) {\\n        unchecked {\\n            uint256 result = log2(value);\\n            return result + (rounding == Rounding.Up && 1 << result < value ? 1 : 0);\\n        }\\n    }\\n\\n    /**\\n     * @dev Return the log in base 10, rounded down, of a positive value.\\n     * Returns 0 if given 0.\\n     */\\n    function log10(uint256 value) internal pure returns (uint256) {\\n        uint256 result = 0;\\n        unchecked {\\n            if (value >= 10 ** 64) {\\n                value /= 10 ** 64;\\n                result += 64;\\n            }\\n            if (value >= 10 ** 32) {\\n                value /= 10 ** 32;\\n                result += 32;\\n            }\\n            if (value >= 10 ** 16) {\\n                value /= 10 ** 16;\\n                result += 16;\\n            }\\n            if (value >= 10 ** 8) {\\n                value /= 10 ** 8;\\n                result += 8;\\n            }\\n            if (value >= 10 ** 4) {\\n                value /= 10 ** 4;\\n                result += 4;\\n            }\\n            if (value >= 10 ** 2) {\\n                value /= 10 ** 2;\\n                result += 2;\\n            }\\n            if (value >= 10 ** 1) {\\n                result += 1;\\n            }\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Return the log in base 10, following the selected rounding direction, of a positive value.\\n     * Returns 0 if given 0.\\n     */\\n    function log10(uint256 value, Rounding rounding) internal pure returns (uint256) {\\n        unchecked {\\n            uint256 result = log10(value);\\n            return result + (rounding == Rounding.Up && 10 ** result < value ? 1 : 0);\\n        }\\n    }\\n\\n    /**\\n     * @dev Return the log in base 256, rounded down, of a positive value.\\n     * Returns 0 if given 0.\\n     *\\n     * Adding one to the result gives the number of pairs of hex symbols needed to represent `value` as a hex string.\\n     */\\n    function log256(uint256 value) internal pure returns (uint256) {\\n        uint256 result = 0;\\n        unchecked {\\n            if (value >> 128 > 0) {\\n                value >>= 128;\\n                result += 16;\\n            }\\n            if (value >> 64 > 0) {\\n                value >>= 64;\\n                result += 8;\\n            }\\n            if (value >> 32 > 0) {\\n                value >>= 32;\\n                result += 4;\\n            }\\n            if (value >> 16 > 0) {\\n                value >>= 16;\\n                result += 2;\\n            }\\n            if (value >> 8 > 0) {\\n                result += 1;\\n            }\\n        }\\n        return result;\\n    }\\n\\n    /**\\n     * @dev Return the log in base 256, following the selected rounding direction, of a positive value.\\n     * Returns 0 if given 0.\\n     */\\n    function log256(uint256 value, Rounding rounding) internal pure returns (uint256) {\\n        unchecked {\\n            uint256 result = log256(value);\\n            return result + (rounding == Rounding.Up && 1 << (result << 3) < value ? 1 : 0);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xe4455ac1eb7fc497bb7402579e7b4d64d928b846fce7d2b6fde06d366f21c2b3\",\"license\":\"MIT\"},\"@openzeppelin/contracts/utils/math/SignedMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// OpenZeppelin Contracts (last updated v4.8.0) (utils/math/SignedMath.sol)\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Standard signed math utilities missing in the Solidity language.\\n */\\nlibrary SignedMath {\\n    /**\\n     * @dev Returns the largest of two signed numbers.\\n     */\\n    function max(int256 a, int256 b) internal pure returns (int256) {\\n        return a > b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the smallest of two signed numbers.\\n     */\\n    function min(int256 a, int256 b) internal pure returns (int256) {\\n        return a < b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the average of two signed numbers without overflow.\\n     * The result is rounded towards zero.\\n     */\\n    function average(int256 a, int256 b) internal pure returns (int256) {\\n        // Formula from the book \\\"Hacker's Delight\\\"\\n        int256 x = (a & b) + ((a ^ b) >> 1);\\n        return x + (int256(uint256(x) >> 255) & (a ^ b));\\n    }\\n\\n    /**\\n     * @dev Returns the absolute unsigned value of a signed value.\\n     */\\n    function abs(int256 n) internal pure returns (uint256) {\\n        unchecked {\\n            // must be unchecked in order to support `n = type(int256).min`\\n            return uint256(n >= 0 ? n : -n);\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0xf92515413956f529d95977adc9b0567d583c6203fc31ab1c23824c35187e3ddc\",\"license\":\"MIT\"},\"contracts/escrow/Escrow.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.19;\\n\\nimport {Ownable} from \\\"../utils/Ownable.sol\\\";\\nimport {INftWrapper} from \\\"../interfaces/INftWrapper.sol\\\";\\nimport {IEscrow} from \\\"../interfaces/IEscrow.sol\\\";\\nimport {NftReceiver} from \\\"../utils/NftReceiver.sol\\\";\\nimport {INftfiHub} from \\\"../interfaces/INftfiHub.sol\\\";\\nimport {ContractKeys} from \\\"../utils/ContractKeys.sol\\\";\\nimport {LoanCoordinator} from \\\"../loans/LoanCoordinator.sol\\\";\\nimport {IPermittedNFTs} from \\\"../interfaces/IPermittedNFTs.sol\\\";\\n\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {Address} from \\\"@openzeppelin/contracts/utils/Address.sol\\\";\\nimport {SafeERC20} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\n\\n/**\\n * @title  Escrow\\n * @author NFTfi\\n * @notice Protocol wide escrow contract for NFT collateral\\n * used when a user doen't have a personal escrow deployed\\n **/\\ncontract Escrow is IEscrow, Ownable, NftReceiver {\\n    using SafeERC20 for IERC20;\\n\\n    // collateral contract => collateral id => locker contract(loan) => amount (preparing for 1155)\\n    mapping(address => mapping(uint256 => mapping(address => uint256))) internal _tokensLockedByLoan;\\n\\n    /**\\n     * @dev keeps track of tokens being held as loan collateral, so we dont allow these\\n     * to be transferred with the aridrop draining functions\\n     * nft contract address => nft id => amount (in case of 1155)\\n     */\\n    mapping(address => mapping(uint256 => uint256)) internal _escrowTokens;\\n\\n    // addresses of contracts thathas plugin rights\\n    mapping(address => bool) private plugins;\\n\\n    // solhint-disable-next-line immutable-vars-naming\\n    INftfiHub public immutable hub;\\n\\n    event Locked(\\n        address indexed nftCollateralContract,\\n        uint256 indexed nftCollateralId,\\n        address indexed borrower,\\n        address loanContract\\n    );\\n\\n    event Unlocked(\\n        address indexed nftCollateralContract,\\n        uint256 indexed nftCollateralId,\\n        address indexed recipient,\\n        address loanContract\\n    );\\n\\n    event LoanHandedOver(\\n        address indexed nftCollateralContract,\\n        uint256 indexed nftCollateralId,\\n        address oldLoanContract,\\n        address newloanContract\\n    );\\n\\n    error OnlyLoanContract();\\n    error CollateralNotLockedByLoan();\\n    error NoSuchTokenOwned();\\n    error NoSuchERC1155sOwned();\\n    error NoSuchERC721Owned();\\n    error NoSuchERC20Owned();\\n    error TokenIsCollateral();\\n    error CollateralDelegated();\\n    error NotAPlugin();\\n\\n    /**\\n     * @notice Sets the admin of the contract.\\n     *\\n     * @param _admin - Initial admin of this contract.\\n     */\\n    constructor(address _admin, address _hub) Ownable(_admin) {\\n        hub = INftfiHub(_hub);\\n    }\\n\\n    /**\\n     * @notice Checks if the caller is is a loan contract\\n     */\\n    modifier onlyLoan() {\\n        // checking that locker is a registered loan type\\n        // WARNING if we ever register an external account (or malicious contract) as a loan type that\\n        // account can steal user nfts that has been approved for this contract by locking and unlocking\\n        if (\\n            LoanCoordinator(hub.getContract(ContractKeys.LOAN_COORDINATOR)).getTypeOfLoanContract(msg.sender) ==\\n            bytes32(0)\\n        ) revert OnlyLoanContract();\\n        _;\\n    }\\n\\n    /**\\n     * @notice Checks if the caller is the locker of the given collateral nft in the parameter\\n     *\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     */\\n    modifier onlyLockingLoan(address _nftCollateralContract, uint256 _nftCollateralId) {\\n        if (_tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][msg.sender] == 0)\\n            revert CollateralNotLockedByLoan();\\n        _;\\n    }\\n\\n    /**\\n     * @notice Locks collateral NFT for a loan.\\n     *\\n     * @param _nftCollateralWrapper - Address of the NFT wrapper contract.\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     * @param _borrower - Address of the borrower.\\n     */\\n    function lockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _borrower\\n    ) external virtual override onlyLoan {\\n        _lockCollateral(_nftCollateralContract, _nftCollateralId);\\n        _transferNFT(_nftCollateralWrapper, _nftCollateralContract, _nftCollateralId, _borrower, address(this));\\n        emit Locked(_nftCollateralContract, _nftCollateralId, _borrower, msg.sender);\\n    }\\n\\n    /**\\n     * @notice Internal function to lock collateral.\\n     *\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     */\\n    function _lockCollateral(address _nftCollateralContract, uint256 _nftCollateralId) internal {\\n        _tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][msg.sender] += 1;\\n        _escrowTokens[_nftCollateralContract][_nftCollateralId] += 1;\\n    }\\n\\n    /**\\n     * @notice Unlocks collateral NFT for a loan.\\n     *\\n     * @param _nftCollateralWrapper - Address of the NFT wrapper contract.\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     * @param _recipient - Address of the recipient.\\n     */\\n    function unlockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _recipient\\n    ) external virtual override onlyLockingLoan(_nftCollateralContract, _nftCollateralId) {\\n        _unlockCollateral(_nftCollateralContract, _nftCollateralId);\\n        _transferNFT(_nftCollateralWrapper, _nftCollateralContract, _nftCollateralId, address(this), _recipient);\\n        emit Unlocked(_nftCollateralContract, _nftCollateralId, _recipient, msg.sender);\\n    }\\n\\n    /**\\n     * @notice Internal function to unlock collateral.\\n     *\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     */\\n    function _unlockCollateral(address _nftCollateralContract, uint256 _nftCollateralId) internal {\\n        _tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][msg.sender] -= 1;\\n        _escrowTokens[_nftCollateralContract][_nftCollateralId] -= 1;\\n    }\\n\\n    function handOverLoan(\\n        address _newLoanContract,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId\\n    ) external virtual override onlyLockingLoan(_nftCollateralContract, _nftCollateralId) {\\n        _tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][msg.sender] -= 1;\\n        _tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][_newLoanContract] += 1;\\n        emit LoanHandedOver(_nftCollateralContract, _nftCollateralId, msg.sender, _newLoanContract);\\n    }\\n\\n    /**\\n     * @notice Checks if a collateral NFT is in escrow with a specific loan.\\n     *\\n      @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     * @param _loan - Address of the loan contract.\\n     * @return bool - True if the NFT is in escrow with the loan, false otherwise.\\n     */\\n    function isInEscrowWithLoan(\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _loan\\n    ) external view override returns (bool) {\\n        return _tokensLockedByLoan[_nftCollateralContract][_nftCollateralId][_loan] > 0;\\n    }\\n\\n    /**\\n     * @dev Transfers several types of NFTs using a wrapper that knows how to handle each case.\\n     *\\n     * @param _sender - Current owner of the NF\\n     * @param _recipient - Recipient of the transfer\\n     */\\n    function _transferNFT(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _sender,\\n        address _recipient\\n    ) internal {\\n        Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).transferNFT.selector,\\n                _sender,\\n                _recipient,\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"NFT not successfully transferred\\\"\\n        );\\n    }\\n\\n    /**\\n     * @dev Checks if the contract owns a specific NFT.\\n     *\\n     * @param _nftCollateralWrapper - Address of the NFT wrapper contract.\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     * @return bool - True if the contract owns the NFT, false otherwise.\\n     */\\n    function _isOwned(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId\\n    ) internal returns (bool) {\\n        bytes memory result = Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).isOwner.selector,\\n                address(this),\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"Ownership check failed\\\"\\n        );\\n        return abi.decode(result, (bool));\\n    }\\n\\n    /**\\n     * @notice used by the owner account to be able to drain sturck ERC20 tokens for revenue share\\n     * for the locked  collateral NFT-s\\n     * @param _tokenAddress - address of the token contract for the token to be sent out\\n     * @param _receiver - receiver of the token\\n     */\\n    function drainERC20Airdrop(address _tokenAddress, uint256 amount, address _receiver) external onlyOwner {\\n        // ensuring that this cannot be used to transfer any permitted, escrowed nft\\n        // that has the following transfer function (interpreting amount as id):\\n        // function transfer(address _to, uint256 _tokenId), like CryptoKitties for example\\n        if (_escrowTokens[_tokenAddress][amount] > 0) {\\n            revert TokenIsCollateral();\\n        }\\n\\n        IERC20 tokenContract = IERC20(_tokenAddress);\\n        uint256 balance = tokenContract.balanceOf(address(this));\\n        if (balance == 0) {\\n            revert NoSuchERC20Owned();\\n        }\\n        tokenContract.safeTransfer(_receiver, amount);\\n    }\\n\\n    /**\\n     * @notice used by the owner account to be able to drain any tokens used as collateral that is not locked in a loan\\n     * @param _tokenAddress - address of the token contract for the token to be sent out\\n     * @param _tokenId - id token to be sent out\\n     * @param _receiver - receiver of the token\\n     */\\n    function withdrawNFT(address _tokenAddress, uint256 _tokenId, address _receiver) external onlyOwner {\\n        if (_escrowTokens[_tokenAddress][_tokenId] > 0) {\\n            revert TokenIsCollateral();\\n        }\\n        address tokenWrapper = IPermittedNFTs(hub.getContract(ContractKeys.PERMITTED_NFTS)).getNFTWrapper(\\n            _tokenAddress\\n        );\\n        if (!_isOwned(tokenWrapper, _tokenAddress, _tokenId)) {\\n            revert NoSuchTokenOwned();\\n        }\\n        _transferNFT(tokenWrapper, _tokenAddress, _tokenId, address(this), _receiver);\\n    }\\n\\n    /**\\n     * @notice used by the owner account to be able to drain stuck or airdropped NFTs\\n     * a check prevents draining collateral\\n     * @param _nftType - nft type key which is sourced from nftfi hub\\n     * @param _tokenAddress - address of the token contract for the token to be sent out\\n     * @param _tokenId - id token to be sent out\\n     * @param _receiver - receiver of the token\\n     */\\n    function drainNFT(\\n        string memory _nftType,\\n        address _tokenAddress,\\n        uint256 _tokenId,\\n        address _receiver\\n    ) external onlyOwner {\\n        if (_escrowTokens[_tokenAddress][_tokenId] > 0) {\\n            revert TokenIsCollateral();\\n        }\\n        bytes32 nftTypeKey = _getIdFromStringKey(_nftType);\\n        address transferWrapper = IPermittedNFTs(hub.getContract(ContractKeys.PERMITTED_NFTS)).getNftTypeWrapper(\\n            nftTypeKey\\n        );\\n        _transferNFT(transferWrapper, _tokenAddress, _tokenId, address(this), _receiver);\\n    }\\n\\n    /**\\n     * @notice Admin function for adding a plugin that can make an arbitrary function call\\n     * WARNING! serious security implications! plugins can move the collateral\\n     * @param _plugin address of the plugin\\n     */\\n    function addPlugin(address _plugin) external virtual onlyOwner {\\n        plugins[_plugin] = true;\\n    }\\n\\n    /**\\n     * @notice Admin function for removing a plugin that can make an arbitrary function call\\n     * @param _plugin address of the plugin\\n     */\\n    function removePlugin(address _plugin) external virtual onlyOwner {\\n        plugins[_plugin] = false;\\n    }\\n\\n    function pluginCall(address _target, bytes memory _data) external returns (bool, bytes memory) {\\n        if (!plugins[msg.sender]) revert NotAPlugin();\\n        // solhint-disable-next-line avoid-low-level-calls\\n        return _target.call(_data);\\n    }\\n\\n    /**\\n     * @notice Returns the bytes32 representation of a string (copied from ContractKeys so we dont need it as a lib)\\n     * @param _key the string key\\n     * @return id bytes32 representation\\n     */\\n    function _getIdFromStringKey(string memory _key) internal pure returns (bytes32 id) {\\n        // solhint-disable-next-line custom-errors\\n        require(bytes(_key).length <= 32, \\\"invalid key\\\");\\n\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            id := mload(add(_key, 32))\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x2214b6801af8826eb42293b38b4fbee61070a5b5de835b758273eda249dc1772\",\"license\":\"BUSL-1.1\"},\"contracts/escrow/PersonalEscrow.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.19;\\n\\nimport {Escrow} from \\\"./Escrow.sol\\\";\\nimport {IPersonalEscrow} from \\\"../interfaces/IPersonalEscrow.sol\\\";\\nimport {IEscrow} from \\\"../interfaces/IEscrow.sol\\\";\\nimport {INftWrapper} from \\\"../interfaces/INftWrapper.sol\\\";\\n\\nimport {Initializable} from \\\"@openzeppelin/contracts/proxy/utils/Initializable.sol\\\";\\nimport {Address} from \\\"@openzeppelin/contracts/utils/Address.sol\\\";\\n\\n/**\\n * @title  PersonalEscrow\\n * @author NFTfi\\n * @notice User-specific escrow contract\\n **/\\ncontract PersonalEscrow is IPersonalEscrow, Escrow, Initializable {\\n    event Initialized(address owner);\\n\\n    /**\\n     * @dev Initializes the Escrow contract with a null owner.\\n     * @param _hub Address of the NftfiHub contract\\n     */\\n    constructor(address _hub) Escrow(address(0), _hub) {}\\n\\n    /**\\n     * @notice Initializes the contract setting the owner.\\n     * @param _owner Address of the new owner of the excrow\\n     */\\n    function initialize(address _owner) external initializer {\\n        _setOwner(_owner);\\n        emit Initialized(_owner);\\n    }\\n\\n    /**\\n     * @notice Locks the NFT collateral in the escrow.\\n     * @param _nftCollateralWrapper Address of the NFT collateral wrapper\\n     * @param _nftCollateralContract Address of the NFT collateral contract\\n     * @param _nftCollateralId ID of the NFT collateral\\n     * @param _borrower Address of the borrower\\n     */\\n    function lockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _borrower\\n    ) external override(IEscrow, Escrow) onlyLoan {\\n        // we need to check that the escrow owns more collateral tokens that the ones already locked\\n        // - in case of balance 0 check is FALSE: we have to attempt to transfer the token\\n        // - in case of non fungibles if balance is 1 and escrowed is 0, check is TRUE we have the unlocked token: OK\\n        // - in case of non fungibles if balance is 1 and escrowed is 1,\\n        //   we have the token already locked, check is FALSE - transfer will be attempted and fail\\n        //   (because it's unique ans is already here)\\n        // - in case of fungibles (1155) if balance is n + k (k>1 positive integer) and escrowed is n,\\n        //   check is TRUE, we have unlocked token(s): OK\\n        // - in case of fungibles (1155) if balance is n and escrowed is n (equal),\\n        //   we only have locked token(s), check is FALSE: we have to attempt to transfer the token\\n        if (\\n            _balanceOf(_nftCollateralWrapper, _nftCollateralContract, _nftCollateralId) >\\n            _escrowTokens[_nftCollateralContract][_nftCollateralId]\\n        ) {\\n            // we only lock, collateral is already in contract, no need to transfer\\n            _lockCollateral(_nftCollateralContract, _nftCollateralId);\\n        } else {\\n            // we lock and transfer\\n            _lockCollateral(_nftCollateralContract, _nftCollateralId);\\n            _transferNFT(_nftCollateralWrapper, _nftCollateralContract, _nftCollateralId, _borrower, address(this));\\n        }\\n    }\\n\\n    /**\\n     * @dev Checks balance of a specific NFT owned by the contract.\\n     *\\n     * @param _nftCollateralWrapper - Address of the NFT wrapper contract.\\n     * @param _nftCollateralContract - Address of the NFT collateral contract.\\n     * @param _nftCollateralId - ID of the NFT collateral.\\n     * @return bool - True if the contract owns the NFT, false otherwise.\\n     */\\n    function _balanceOf(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId\\n    ) internal returns (uint256) {\\n        bytes memory result = Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).balanceOf.selector,\\n                address(this),\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"Balance check failed\\\"\\n        );\\n        return abi.decode(result, (uint256));\\n    }\\n\\n    /**\\n     * @notice Unlocks the NFT collateral from the escrow and transfers it to the recipient.\\n     * @param _nftCollateralWrapper Address of the NFT collateral wrapper\\n     * @param _nftCollateralContract Address of the NFT collateral contract\\n     * @param _nftCollateralId ID of the NFT collateral\\n     * @param _recipient Address of the recipient\\n     */\\n    function unlockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _recipient\\n    ) external override(IEscrow, Escrow) onlyLockingLoan(_nftCollateralContract, _nftCollateralId) {\\n        _unlockCollateral(_nftCollateralContract, _nftCollateralId);\\n        _transferNFT(_nftCollateralWrapper, _nftCollateralContract, _nftCollateralId, address(this), _recipient);\\n    }\\n\\n    /**\\n     * @notice unlocks and approves for an escrow contract that is taking over, only locking loan can initiate\\n     * @param _nftCollateralWrapper Address of the NFT collateral wrapper\\n     * @param _nftCollateralContract Address of the NFT collateral contract\\n     * @param _nftCollateralId ID of the NFT collateral\\n     * @param _recipientEscrow Address of the recipient escrow contract\\n     */\\n    function handOverCollateralToEscrow(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _recipientEscrow\\n    ) external override onlyLockingLoan(_nftCollateralContract, _nftCollateralId) {\\n        _unlockCollateral(_nftCollateralContract, _nftCollateralId);\\n        _approveNFT(_nftCollateralWrapper, _recipientEscrow, _nftCollateralContract, _nftCollateralId);\\n    }\\n\\n    /**\\n     * @notice Unlocks the NFT collateral from the escrow without transferring it.\\n     * @param _nftCollateralContract Address of the NFT collateral contract\\n     * @param _nftCollateralId ID of the NFT collateral\\n     */\\n    function unlockAndKeepCollateral(\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId\\n    ) external onlyLockingLoan(_nftCollateralContract, _nftCollateralId) {\\n        _unlockCollateral(_nftCollateralContract, _nftCollateralId);\\n    }\\n\\n    /**\\n     * @dev Approves an NFT to be used by another address trough the NFT adaptor.\\n     *\\n     * @param _to - The address to approve to transfer or manage the NFT.\\n     * @param _nftCollateralContract - The contract address of the NFT.\\n     * @param _nftCollateralId - The token ID of the NFT.\\n     *\\n     * @return bool - Returns true if the approval was successful.\\n     */\\n    function _approveNFT(\\n        address _nftCollateralWrapper,\\n        address _to,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId\\n    ) internal returns (bool) {\\n        bytes memory result = Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).approveNFT.selector,\\n                _to,\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"NFT not successfully approved\\\"\\n        );\\n\\n        return abi.decode(result, (bool));\\n    }\\n\\n    function addPlugin(address) external pure override(Escrow) {\\n        revert AddingOrRemovingPluginsNotAllowed();\\n    }\\n\\n    function removePlugin(address) external pure override(Escrow) {\\n        revert AddingOrRemovingPluginsNotAllowed();\\n    }\\n}\\n\",\"keccak256\":\"0xe80de33a1d963ceb6f46187e265039a9eb5beff8e83a91976f90ab7285293b40\",\"license\":\"BUSL-1.1\"},\"contracts/escrow/PersonalEscrowFactory.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {Clones} from \\\"@openzeppelin/contracts/proxy/Clones.sol\\\";\\nimport {Pausable} from \\\"@openzeppelin/contracts/security/Pausable.sol\\\";\\nimport {Ownable} from \\\"../utils/Ownable.sol\\\";\\n\\nimport {PersonalEscrow} from \\\"./PersonalEscrow.sol\\\";\\nimport {IPersonalEscrowFactory} from \\\"../interfaces/IPersonalEscrowFactory.sol\\\";\\n\\n/**\\n * @title PersonalEscrowFactory\\n * @author NFTfi\\n * @notice Used to deploy new personal escrow contracts for specific users\\n */\\ncontract PersonalEscrowFactory is IPersonalEscrowFactory, Ownable, Pausable {\\n    // solhint-disable-next-line immutable-vars-naming\\n    address public immutable personalEscrowImplementation;\\n    string public baseURI;\\n\\n    // Incremental token id\\n    uint256 public tokenCount = 0;\\n\\n    mapping(address owner => address escrow) private _personalEscrowOfOwner;\\n\\n    mapping(address => bool) private _isPersonalEscrow;\\n\\n    event PersonalEscrowCreated(address indexed instance, address indexed owner, address creator);\\n\\n    error PersonalEscrowAlreadyExistsForUser();\\n\\n    /**\\n     * @param _personalEscrowImplementation - deployed master copy of the personal escrow contract\\n     */\\n    constructor(address _personalEscrowImplementation, address _admin) Ownable(_admin) {\\n        personalEscrowImplementation = _personalEscrowImplementation;\\n        _pause();\\n    }\\n\\n    /**\\n     * @dev Triggers stopped state.\\n     *\\n     * Requirements:\\n     *\\n     * - Only the owner can call this method.\\n     * - The contract must not be paused.\\n     */\\n    function pause() external onlyOwner {\\n        _pause();\\n    }\\n\\n    /**\\n     * @dev Returns to normal state.\\n     *\\n     * Requirements:\\n     *\\n     * - Only the owner can call this method.\\n     * - The contract must be paused.\\n     */\\n    function unpause() external onlyOwner {\\n        _unpause();\\n    }\\n\\n    /**\\n     * @dev clones a new personal escrow contract\\n     */\\n\\n    function createPersonalEscrow() external whenNotPaused returns (address) {\\n        if (_personalEscrowOfOwner[msg.sender] != address(0)) revert PersonalEscrowAlreadyExistsForUser();\\n        address instance = Clones.clone(personalEscrowImplementation);\\n        _personalEscrowOfOwner[msg.sender] = instance;\\n        _isPersonalEscrow[instance] = true;\\n        PersonalEscrow(instance).initialize(msg.sender);\\n        emit PersonalEscrowCreated(instance, msg.sender, msg.sender);\\n        return instance;\\n    }\\n\\n    /**\\n     * @dev retunrs escrow address of the owner\\n     * @return address of the personal escrow\\n     */\\n    function personalEscrowOfOwner(address _owner) external view returns (address) {\\n        return _personalEscrowOfOwner[_owner];\\n    }\\n\\n    /**\\n     * @dev checks if the address is a personal escrow\\n     * @return bool true if the address is a personal escrow\\n     */\\n    function isPersonalEscrow(address _escrow) external view returns (bool) {\\n        return _isPersonalEscrow[_escrow];\\n    }\\n}\\n\",\"keccak256\":\"0xacac65cec9486ac3f9254c3cde4f997d13f3d78a2e9d769d0373eebfd69a234e\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IDelegateCashPlugin.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.19;\\n\\ninterface IDelegateCashPlugin {\\n    struct DelegationSettings {\\n        address to;\\n        bytes32 rights;\\n        bool isERC721;\\n    }\\n\\n    function delegateERC721(\\n        uint32 loanId,\\n        string memory offerType,\\n        address to,\\n        address collateralContract,\\n        uint256 tokenId,\\n        bytes32 rights\\n    ) external;\\n\\n    function isCollateralDelegated(uint32 _loanId) external view returns (bool);\\n\\n    function getDelegationSettings(uint32 _loanId) external view returns (DelegationSettings memory);\\n\\n    function undelegateERC721(uint32 _loanId) external;\\n}\\n\",\"keccak256\":\"0xe870fdd350920a314d2fa2400ed7d616770da8afb9b36e5f8f65d0bd5f10c3bb\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IERC20TransferManager.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\ninterface IERC20TransferManager {\\n    function transfer(address _token, address _sender, address _recipient, uint256 _amount) external;\\n\\n    function safeLoanPaybackTransfer(address _token, address _sender, address _recipient, uint256 _amount) external;\\n\\n    function safeAdminFeeTransfer(address _token, address _sender, address _recipient, uint256 _amount) external;\\n}\\n\",\"keccak256\":\"0x00ecda6491c5801364c431a9ea4d16fbf8d56cc015c6d2424d9435af33a1c606\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IEscrow.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\ninterface IEscrow {\\n    function lockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _borrower\\n    ) external;\\n\\n    function unlockCollateral(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _recipient\\n    ) external;\\n\\n    function handOverLoan(address _newLoanContract, address _nftCollateralContract, uint256 _nftCollateralId) external;\\n\\n    function isInEscrowWithLoan(\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _loan\\n    ) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x3ce809a4aca7e54d8cda2226f63ce231a35550e874f756eb17c52083f35a99ea\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/ILoanCoordinator.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title ILoanCoordinator\\n * @author NFTfi\\n * @dev LoanCoordinator interface.\\n */\\ninterface ILoanCoordinator {\\n    enum StatusType {\\n        NOT_EXISTS,\\n        NEW,\\n        REPAID,\\n        LIQUIDATED\\n    }\\n\\n    /**\\n     * @notice This struct contains data related to a loan\\n     *\\n     * @param smartNftId - The id of both the promissory note and obligation receipt.\\n     * @param status - The status in which the loan currently is.\\n     * @param loanContract - Address of the contract that created the loan.\\n     */\\n    struct Loan {\\n        address loanContract;\\n        uint64 smartNftId;\\n        StatusType status;\\n    }\\n\\n    function registerLoan() external returns (uint32);\\n\\n    function resetSmartNfts(uint32 _loanId) external;\\n\\n    function mintObligationReceipt(uint32 _loanId, address _borrower) external;\\n\\n    function mintPromissoryNote(uint32 _loanId, address _lender) external;\\n\\n    function resolveLoan(uint32 _loanId, bool liquidated) external;\\n\\n    function promissoryNoteToken() external view returns (address);\\n\\n    function obligationReceiptToken() external view returns (address);\\n\\n    function getLoanData(uint32 _loanId) external view returns (Loan memory);\\n\\n    function isValidLoanId(uint32 _loanId, address _loanContract) external view returns (bool);\\n\\n    function getDefaultLoanContractForOfferType(bytes32 _offerType) external view returns (address);\\n\\n    function getTypeOfLoanContract(address _loanContract) external view returns (bytes32);\\n\\n    function checkNonce(address _user, uint256 _nonce) external view;\\n\\n    function checkAndInvalidateNonce(address _user, uint256 _nonce) external;\\n}\\n\",\"keccak256\":\"0xf407ba508babdbe4ef3bdda3278240cf30c7bba1b49e8cf202a80b77c949d6c0\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/INftWrapper.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title INftWrapper\\n * @author NFTfi\\n * @dev Interface for NFT Wrappers.\\n */\\ninterface INftWrapper {\\n    function transferNFT(address from, address to, address nftContract, uint256 tokenId) external returns (bool);\\n\\n    function approveNFT(address to, address nftContract, uint256 tokenId) external returns (bool);\\n\\n    function isOwner(address owner, address nftContract, uint256 tokenId) external view returns (bool);\\n\\n    function balanceOf(address owner, address nftContract, uint256 tokenId) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x5893806ffc6b8dbc12e94e1ee4ee2b0e54a5e46b42e440f2647569b9e0cc003d\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/INftfiHub.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title INftfiHub\\n * @author NFTfi\\n * @dev NftfiHub interface\\n */\\ninterface INftfiHub {\\n    function setContract(string calldata _contractKey, address _contractAddress) external;\\n\\n    function getContract(bytes32 _contractKey) external view returns (address);\\n}\\n\",\"keccak256\":\"0x65320571d7049eefd4bfd6dcff48b752a4a01c56a23ae7acf0f3b7183b9b08db\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IPermittedERC20s.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\ninterface IPermittedERC20s {\\n    function getERC20Permit(address _erc20) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x8eb26b4bcb40095afa958598d30beeac4c4a92a9d15d1771723cd6cb98672ccc\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IPermittedNFTs.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\ninterface IPermittedNFTs {\\n    function setNFTPermit(address _nftContract, string memory _nftType) external;\\n\\n    function getNFTPermit(address _nftContract) external view returns (bytes32);\\n\\n    function getNFTWrapper(address _nftContract) external view returns (address);\\n\\n    function getNftTypeWrapper(bytes32 _nftType) external view returns (address);\\n}\\n\",\"keccak256\":\"0x502a60d661c15f42ff3e06dd76236a0c4dff356519b6d609fdcd8d1ea32a5256\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IPersonalEscrow.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {IEscrow} from \\\"./IEscrow.sol\\\";\\n\\ninterface IPersonalEscrow is IEscrow {\\n    error AddingOrRemovingPluginsNotAllowed();\\n\\n    function handOverCollateralToEscrow(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _recipientEscrow\\n    ) external;\\n    function unlockAndKeepCollateral(address _nftCollateralContract, uint256 _nftCollateralId) external;\\n}\\n\",\"keccak256\":\"0x9ad91c8921998ee4d4dcd821751206eb30d27f75d8e538025877b9899315fc76\",\"license\":\"BUSL-1.1\"},\"contracts/interfaces/IPersonalEscrowFactory.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.19;\\n\\ninterface IPersonalEscrowFactory {\\n    function pause() external;\\n\\n    function unpause() external;\\n\\n    function createPersonalEscrow() external returns (address);\\n\\n    function personalEscrowOfOwner(address _owner) external view returns (address);\\n\\n    function isPersonalEscrow(address _escrow) external view returns (bool);\\n}\\n\",\"keccak256\":\"0xe706d9c7098e95bddc448a2621cd2d263059cfc4f6be899ed26bcb575bc34c9d\",\"license\":\"BUSL-1.1\"},\"contracts/loans/BaseLoan.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {Ownable} from \\\"../utils/Ownable.sol\\\";\\nimport {Pausable} from \\\"@openzeppelin/contracts/security/Pausable.sol\\\";\\nimport {ReentrancyGuard} from \\\"@openzeppelin/contracts/security/ReentrancyGuard.sol\\\";\\n\\n/**\\n * @title  BaseLoan\\n * @author NFTfi\\n * @dev Implements base functionalities common to all Loan types.\\n * Mostly related to governance and security.\\n */\\nabstract contract BaseLoan is Ownable, Pausable, ReentrancyGuard {\\n    /* *********** */\\n    /* CONSTRUCTOR */\\n    /* *********** */\\n\\n    /**\\n     * @notice Sets the admin of the contract.\\n     *\\n     * @param _admin - Initial admin of this contract.\\n     */\\n    constructor(address _admin) Ownable(_admin) {\\n        // solhint-disable-previous-line no-empty-blocks\\n    }\\n\\n    /* ********* */\\n    /* FUNCTIONS */\\n    /* ********* */\\n\\n    /**\\n     * @dev Triggers stopped state.\\n     *\\n     * Requirements:\\n     *\\n     * - Only the owner can call this method.\\n     * - The contract must not be paused.\\n     */\\n    function pause() external onlyOwner {\\n        _pause();\\n    }\\n\\n    /**\\n     * @dev Returns to normal state.\\n     *\\n     * Requirements:\\n     *\\n     * - Only the owner can call this method.\\n     * - The contract must be paused.\\n     */\\n    function unpause() external onlyOwner {\\n        _unpause();\\n    }\\n}\\n\",\"keccak256\":\"0x16b99d085a0694a123a33941f93bef0c54ae18adf75b2a84a8b8c0f9abfb8460\",\"license\":\"BUSL-1.1\"},\"contracts/loans/LoanCoordinator.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {SmartNft} from \\\"../smartNft/SmartNft.sol\\\";\\nimport {ILoanCoordinator} from \\\"../interfaces/ILoanCoordinator.sol\\\";\\nimport {INftfiHub} from \\\"../interfaces/INftfiHub.sol\\\";\\nimport {Ownable} from \\\"../utils/Ownable.sol\\\";\\nimport {ContractKeyUtils} from \\\"../utils/ContractKeyUtils.sol\\\";\\n\\n/**\\n * @title  LoanCoordinator\\n * @author NFTfi\\n * @notice This contract is in charge of coordinating the creation, distribution and desctruction of the SmartNfts\\n * related to a loan, the Promossory Note and Obligaiton Receipt.\\n */\\ncontract LoanCoordinator is ILoanCoordinator, Ownable {\\n    /* ******* */\\n    /* STORAGE */\\n    /* ******* */\\n\\n    // solhint-disable-next-line immutable-vars-naming\\n    INftfiHub public immutable hub;\\n\\n    /**\\n     * @dev For each loan type, records the address of the contract that implements the type\\n     */\\n    mapping(bytes32 loanType => address offerAddress) private _defaultLoanContractForOfferType;\\n    /**\\n     * @dev reverse mapping of offerTypes - for each contract address, records the associated loan type\\n     */\\n    mapping(address offerAddress => bytes32 loanType) private _typeOfLoanContract;\\n\\n    mapping(address => bool) private _isLoanContractDisabled;\\n\\n    /**\\n     * @notice A continuously increasing counter that simultaneously allows every loan to have a unique ID and provides\\n     * a running count of how many loans have been started by this contract.\\n     */\\n    uint32 public totalNumLoans = 0;\\n\\n    uint32 public smartNftIdCounter = 0;\\n\\n    // The address that deployed this contract\\n    // solhint-disable-next-line immutable-vars-naming\\n    address private immutable _deployer;\\n    bool private _initialized = false;\\n\\n    mapping(uint32 => Loan) private loans;\\n\\n    address public override promissoryNoteToken;\\n    address public override obligationReceiptToken;\\n\\n    /**\\n     * @notice A mapping that takes both a user's address and a loan nonce that was first used when signing an off-chain\\n     * order and checks whether that nonce has previously either been used for a loan, or has been pre-emptively\\n     * cancelled. The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to\\n     * nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders.\\n     *\\n     * These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each\\n     * nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower\\n     * in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would submit a\\n     * user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling\\n     * NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from\\n     * using the user's off-chain order that contains that nonce.\\n     */\\n    mapping(bytes32 offerType => mapping(address user => mapping(uint256 nonce => bool nonceHasBeenUsed)))\\n        internal _nonceHasBeenUsedForUserByOfferType;\\n\\n    /* ****** */\\n    /* EVENTS */\\n    /* ****** */\\n\\n    event UpdateStatus(uint32 indexed loanId, address indexed loanContract, StatusType newStatus);\\n\\n    /**\\n     * @notice This event is fired whenever the admins register a loan type.\\n     *\\n     * @param offerType - offer type represented by keccak256('offer type').\\n     * @param loanContract - Address of the loan type contract.\\n     */\\n    event TypeUpdated(bytes32 indexed offerType, address indexed loanContract);\\n\\n    /* ************* */\\n    /* CUSTOM ERRORS */\\n    /* ************* */\\n\\n    error NotInitialized();\\n    error OnlyDeployer();\\n    error AlreadyInitialized();\\n    error ObligationReceiptZeroAddress();\\n    error PromissoryNoteZeroAddress();\\n    error ObligationReceiptAlreadyExists();\\n    error PromissoryNoteAlreadyExists();\\n    error NotRegisteredLoanContract();\\n    error DisabledLoanContract();\\n    error PromissoryNoteDoesntExist();\\n    error LoanStatusMustBeNEW();\\n    error CallerNotLoanCreatorContract();\\n    error OfferTypeIsEmpty();\\n    error LoanContractAlreadyRegistered();\\n    error FunctionInformationArityMismatch();\\n    error InvalidNonce();\\n\\n    /**\\n     * @dev Function using this modifier can only be executed after this contract is initialized\\n     *\\n     */\\n    modifier onlyInitialized() {\\n        if (!_initialized) revert NotInitialized();\\n        _;\\n    }\\n\\n    /* *********** */\\n    /* CONSTRUCTOR */\\n    /* *********** */\\n\\n    /**\\n     * @notice Sets the admin of the contract.\\n     * Initializes `contractTypes` with a batch of loan types. Sets `NftfiHub`.\\n     *\\n     * @param  _nftfiHub - Address of the NftfiHub contract\\n     * @param _admin - Initial admin of this contract.\\n     * @param _offerTypes - offer types represented by keccak256('offer type').\\n     * @param _loanContracts - The addresses of each wrapper contract that implements the loan type's behaviour.\\n     */\\n    constructor(\\n        address _nftfiHub,\\n        address _admin,\\n        string[] memory _offerTypes,\\n        address[] memory _loanContracts\\n    ) Ownable(_admin) {\\n        hub = INftfiHub(_nftfiHub);\\n        _deployer = msg.sender;\\n        _registerOfferTypes(_offerTypes, _loanContracts);\\n    }\\n\\n    /**\\n     * @dev Sets `promissoryNoteToken` and `obligationReceiptToken`.\\n     * It can be executed once by the deployer.\\n     *\\n     * @param  _promissoryNoteToken - Promissory Note Token address\\n     * @param  _obligationReceiptToken - Obligaiton Recipt Token address\\n     */\\n    function initialize(address _promissoryNoteToken, address _obligationReceiptToken) external {\\n        if (msg.sender != _deployer) revert OnlyDeployer();\\n        if (_initialized) revert AlreadyInitialized();\\n        if (_promissoryNoteToken == address(0)) revert PromissoryNoteZeroAddress();\\n        if (_obligationReceiptToken == address(0)) revert ObligationReceiptZeroAddress();\\n\\n        _initialized = true;\\n        promissoryNoteToken = _promissoryNoteToken;\\n        obligationReceiptToken = _obligationReceiptToken;\\n    }\\n\\n    /**\\n     * @dev This is called by the OfferType beginning the new loan.\\n     * It initialize the new loan data, and returns the new loan id.\\n     */\\n    function registerLoan() external override onlyInitialized returns (uint32) {\\n        address loanContract = msg.sender;\\n\\n        if (_typeOfLoanContract[loanContract] == bytes32(0)) revert NotRegisteredLoanContract();\\n        if (_isLoanContractDisabled[loanContract]) revert DisabledLoanContract();\\n\\n        // (loanIds start at 1)\\n        totalNumLoans += 1;\\n        Loan memory newLoan = Loan({status: StatusType.NEW, loanContract: loanContract, smartNftId: 0});\\n\\n        loans[totalNumLoans] = newLoan;\\n        emit UpdateStatus(totalNumLoans, loanContract, StatusType.NEW);\\n\\n        return totalNumLoans;\\n    }\\n\\n    /**\\n     * @notice Mints a Promissory Note SmartNFT for the lender. Must be called by corresponding loan type\\n     *\\n     * @param _loanId - The ID of the loan.\\n     * @param _lender - The address of the lender.\\n     */\\n    function mintPromissoryNote(uint32 _loanId, address _lender) external onlyInitialized {\\n        address loanContract = msg.sender;\\n\\n        if (_typeOfLoanContract[loanContract] == bytes32(0)) revert NotRegisteredLoanContract();\\n\\n        // create smartNFTid to match the id of the promissory note if promissory note doens't exist\\n        uint64 smartNftId = loans[_loanId].smartNftId;\\n        if (smartNftId == 0) {\\n            smartNftIdCounter += 1;\\n            smartNftId = uint64(uint256(keccak256(abi.encodePacked(address(this), smartNftIdCounter))));\\n        }\\n\\n        if (loans[_loanId].status != StatusType.NEW) revert LoanStatusMustBeNEW();\\n        if (SmartNft(promissoryNoteToken).exists(smartNftId)) revert PromissoryNoteAlreadyExists();\\n\\n        loans[_loanId].smartNftId = smartNftId;\\n        // Issue an ERC721 promissory note to the lender that gives them the\\n        // right to either the principal-plus-interest or the collateral.\\n        SmartNft(promissoryNoteToken).mint(_lender, smartNftId, abi.encode(_loanId));\\n    }\\n\\n    /**\\n     * @notice Mints an Obligation Receipt SmartNFT for the borrower. Must be called by corresponding loan type\\n     *\\n     * @param _loanId - The ID of the loan.\\n     * @param _borrower - The address of the borrower.\\n     */\\n    function mintObligationReceipt(uint32 _loanId, address _borrower) external override onlyInitialized {\\n        address loanContract = msg.sender;\\n\\n        if (_typeOfLoanContract[loanContract] == bytes32(0)) revert NotRegisteredLoanContract();\\n\\n        // create smartNFTid to match the id of the promissory note if promissory note doens't exist\\n        uint64 smartNftId = loans[_loanId].smartNftId;\\n        if (smartNftId == 0) {\\n            smartNftIdCounter += 1;\\n            smartNftId = uint64(uint256(keccak256(abi.encodePacked(address(this), smartNftIdCounter))));\\n        }\\n\\n        if (loans[_loanId].status != StatusType.NEW) revert LoanStatusMustBeNEW();\\n        if (SmartNft(obligationReceiptToken).exists(smartNftId)) revert ObligationReceiptAlreadyExists();\\n\\n        loans[_loanId].smartNftId = smartNftId;\\n        // Issue an ERC721 obligation receipt to the borrower that gives them the\\n        // right to pay back the loan and get the collateral back.\\n        SmartNft(obligationReceiptToken).mint(_borrower, smartNftId, abi.encode(_loanId));\\n    }\\n\\n    /**\\n     * @notice Resets the SmartNFTs associated with a loan.\\n     *\\n     * @param _loanId - The ID of the loan.\\n     */\\n    function resetSmartNfts(uint32 _loanId) external override onlyInitialized {\\n        address loanContract = msg.sender;\\n\\n        if (_typeOfLoanContract[loanContract] == bytes32(0)) revert NotRegisteredLoanContract();\\n\\n        uint64 oldSmartNftId = loans[_loanId].smartNftId;\\n        if (loans[_loanId].status != StatusType.NEW) revert LoanStatusMustBeNEW();\\n\\n        if (SmartNft(promissoryNoteToken).exists(oldSmartNftId)) {\\n            SmartNft(promissoryNoteToken).burn(oldSmartNftId);\\n        }\\n\\n        if (SmartNft(obligationReceiptToken).exists(oldSmartNftId)) {\\n            SmartNft(obligationReceiptToken).burn(oldSmartNftId);\\n        }\\n    }\\n\\n    /**\\n     * @dev This is called by the OfferType who created the loan, when a loan is resolved whether by paying back or\\n     * liquidating the loan.\\n     * It sets the loan as `RESOLVED` and burns both PromossoryNote and ObligationReceipt SmartNft's.\\n     *\\n     * @param _loanId - Id of the loan\\n     */\\n    function resolveLoan(uint32 _loanId, bool _repaid) external override onlyInitialized {\\n        Loan storage loan = loans[_loanId];\\n\\n        if (loan.status != StatusType.NEW) revert LoanStatusMustBeNEW();\\n\\n        if (loan.loanContract != msg.sender) revert CallerNotLoanCreatorContract();\\n\\n        if (_repaid) {\\n            loan.status = StatusType.REPAID;\\n        } else {\\n            loan.status = StatusType.LIQUIDATED;\\n        }\\n\\n        if (SmartNft(promissoryNoteToken).exists(loan.smartNftId)) {\\n            SmartNft(promissoryNoteToken).burn(loan.smartNftId);\\n        }\\n\\n        if (SmartNft(obligationReceiptToken).exists(loan.smartNftId)) {\\n            SmartNft(obligationReceiptToken).burn(loan.smartNftId);\\n        }\\n\\n        emit UpdateStatus(_loanId, msg.sender, loan.status);\\n    }\\n\\n    /**\\n     * @dev Returns loan's data for a given id.\\n     *\\n     * @param _loanId - Id of the loan\\n     */\\n    function getLoanData(uint32 _loanId) external view override returns (Loan memory) {\\n        return loans[_loanId];\\n    }\\n\\n    /**\\n     * @dev Returns loan's data and offerType for a given loan id.\\n     *\\n     * @param _loanId - Id of the loan\\n     */\\n    function getLoanDataAndOfferType(uint32 _loanId) external view returns (Loan memory, bytes32) {\\n        Loan memory loan = loans[_loanId];\\n        return (loan, _typeOfLoanContract[loan.loanContract]);\\n    }\\n\\n    /**\\n     * @dev checks if the given id is valid for the given loan contract address\\n     * @param _loanId - Id of the loan\\n     * @param _loanContract - address og the loan contract\\n     */\\n    function isValidLoanId(uint32 _loanId, address _loanContract) external view override returns (bool validity) {\\n        validity = loans[_loanId].loanContract == _loanContract;\\n    }\\n\\n    /**\\n     * @notice  Set or update the contract address that implements the given Loan Type.\\n     * Set address(0) for a loan type for un-register such type.\\n     *\\n     * @param _offerType - Loan type represented by 'loan type'.\\n     * @param _loanContract - The address of the wrapper contract that implements the loan type's behaviour.\\n     */\\n    function registerOfferType(string memory _offerType, address _loanContract) external onlyOwner {\\n        _registerOfferType(_offerType, _loanContract);\\n    }\\n\\n    /**\\n     * @notice Deletes the contract address associated with a given Loan Type.\\n     *\\n     * @param _offerType - Loan type represented by 'loan type'.\\n     * @param _loanContract - The address of the wrapper contract to be deleted.\\n     */\\n    function deleteOfferType(string memory _offerType, address _loanContract) external onlyOwner {\\n        bytes32 offerTypeKey = ContractKeyUtils.getIdFromStringKey(_offerType);\\n\\n        delete _typeOfLoanContract[_loanContract];\\n        if (_defaultLoanContractForOfferType[offerTypeKey] == _loanContract) {\\n            delete _defaultLoanContractForOfferType[offerTypeKey];\\n        }\\n    }\\n\\n    /**\\n     * @notice Disables a loan contract. Makes it impossible for a loan contract to register a new loan,\\n     * altough renegotiations of their existing loans and repayment/liquidations are still possible\\n     *\\n     * @param _loanContract - The address of the loan contract to be disabled.\\n     */\\n    function disableLoanContract(address _loanContract) external onlyOwner {\\n        _isLoanContractDisabled[_loanContract] = true;\\n    }\\n\\n    /**\\n     * @notice Enables a loan contract.\\n     *\\n     * @param _loanContract - The address of the loan contract to be enabled.\\n     */\\n    function enableLoanContract(address _loanContract) external onlyOwner {\\n        _isLoanContractDisabled[_loanContract] = false;\\n    }\\n\\n    /**\\n     * @notice  Batch set or update the contract addresses that implement the given batch Loan Type.\\n     * Set address(0) for a loan type for un-register such type.\\n     *\\n     * @param _offerTypes - Loan types represented by 'loan type'.\\n     * @param _loanContracts - The addresses of each wrapper contract that implements the loan type's behaviour.\\n     */\\n    function registerOfferTypes(string[] memory _offerTypes, address[] memory _loanContracts) external onlyOwner {\\n        _registerOfferTypes(_offerTypes, _loanContracts);\\n    }\\n\\n    /**\\n     * @notice This function can be called by anyone to get the latest\\n     * contract address that implements the given loan type.\\n     *\\n     * @param  _offerType - The loan type, e.g. bytes32(\\\"ASSET_OFFER_LOAN\\\")\\n     */\\n    function getDefaultLoanContractForOfferType(bytes32 _offerType) public view override returns (address) {\\n        return _defaultLoanContractForOfferType[_offerType];\\n    }\\n\\n    /**\\n     * @notice This function can be called by anyone to get the loan type of the given contract address.\\n     *\\n     * @param  _loanContract - The loan contract\\n     */\\n    function getTypeOfLoanContract(address _loanContract) public view override returns (bytes32) {\\n        return _typeOfLoanContract[_loanContract];\\n    }\\n\\n    /**\\n     * @notice Checks if a loan contract is disabled.\\n     *\\n     * @param _loanContract - The loan contract address.\\n     * @return bool - True if disabled, false otherwise.\\n     */\\n    function isLoanContractDisabled(address _loanContract) external view returns (bool) {\\n        return _isLoanContractDisabled[_loanContract];\\n    }\\n\\n    /**\\n     * @notice  Set or update the contract address that implements the given Loan Type.\\n     * Set address(0) for a loan type for un-register such type.\\n     *\\n     * @param _offerType - Loan type represented by 'loan type').\\n     * @param _loanContract - The address of the wrapper contract that implements the loan type's behaviour.\\n     */\\n    function _registerOfferType(string memory _offerType, address _loanContract) internal {\\n        if (bytes(_offerType).length == 0) revert OfferTypeIsEmpty();\\n        bytes32 offerTypeKey = ContractKeyUtils.getIdFromStringKey(_offerType);\\n\\n        // delete loan contract address of old typeKey registered to this loan contract address\\n\\n        if (_typeOfLoanContract[_loanContract] != bytes32(0)) revert LoanContractAlreadyRegistered();\\n\\n        _defaultLoanContractForOfferType[offerTypeKey] = _loanContract;\\n        _typeOfLoanContract[_loanContract] = offerTypeKey;\\n\\n        emit TypeUpdated(offerTypeKey, _loanContract);\\n    }\\n\\n    /**\\n     * @notice  Batch set or update the contract addresses that implement the given batch Loan Type.\\n     * Set address(0) for a loan type for un-register such type.\\n     *\\n     * @param _offerTypes - Loan types represented by keccak256('loan type').\\n     * @param _loanContracts - The addresses of each wrapper contract that implements the loan type's behaviour.\\n     */\\n    function _registerOfferTypes(string[] memory _offerTypes, address[] memory _loanContracts) internal {\\n        if (_offerTypes.length != _loanContracts.length) revert FunctionInformationArityMismatch();\\n\\n        for (uint256 i; i < _offerTypes.length; ++i) {\\n            _registerOfferType(_offerTypes[i], _loanContracts[i]);\\n        }\\n    }\\n\\n    /**\\n     * @notice This function can be called by either a lender or a borrower to cancel all off-chain orders that they\\n     * have signed that contain this nonce. If the off-chain orders were created correctly, there should only be one\\n     * off-chain order that contains this nonce at all.\\n     *\\n     * The nonce referred to here is not the same as an Ethereum account's nonce. We are referring\\n     * instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi\\n     * orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order.\\n     * Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the\\n     * borrower in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would\\n     * submit a user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling\\n     * NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from\\n     * using the user's off-chain order that contains that nonce.\\n     *\\n     * @param  _nonce - User nonce\\n     */\\n    function cancelLoanCommitment(bytes32 _offerType, uint256 _nonce) external {\\n        if (_nonceHasBeenUsedForUserByOfferType[_offerType][msg.sender][_nonce]) {\\n            revert InvalidNonce();\\n        }\\n        _nonceHasBeenUsedForUserByOfferType[_offerType][msg.sender][_nonce] = true;\\n    }\\n\\n    /**\\n     * @notice This function can be used to view whether a particular nonce for a particular user has already been used,\\n     * either from a successful loan or a cancelled off-chain order.\\n     *\\n     * @param _user - The address of the user. This function works for both lenders and borrowers alike.\\n     * @param  _nonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are referring\\n     * instead to nonces that are used by both the lender and the borrower when they are first signing off-chain\\n     * NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain\\n     * order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or\\n     * the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     *\\n     * @return A bool representing whether or not this nonce has been used for this user.\\n     */\\n    function getWhetherNonceHasBeenUsedForUser(\\n        bytes32 _offerType,\\n        address _user,\\n        uint256 _nonce\\n    ) external view returns (bool) {\\n        return _nonceHasBeenUsedForUserByOfferType[_offerType][_user][_nonce];\\n    }\\n\\n    /**\\n     * @notice Checks if a nonce is valid.\\n     *\\n     * @param _user - The address of the user.\\n     * @param _nonce - The nonce to be checked.\\n     */\\n    function checkNonce(address _user, uint256 _nonce) public view override {\\n        bytes32 offerType = _typeOfLoanContract[msg.sender];\\n        if (_nonceHasBeenUsedForUserByOfferType[offerType][_user][_nonce]) {\\n            revert InvalidNonce();\\n        }\\n    }\\n\\n    /**\\n     * @notice Checks and invalidates a nonce for a user.\\n     *\\n     * @param _user - The address of the user.\\n     * @param _nonce - The nonce to be checked and invalidated.\\n     */\\n    function checkAndInvalidateNonce(address _user, uint256 _nonce) external override {\\n        bytes32 offerType = _typeOfLoanContract[msg.sender];\\n        if (_nonceHasBeenUsedForUserByOfferType[offerType][_user][_nonce]) {\\n            revert InvalidNonce();\\n        }\\n        _nonceHasBeenUsedForUserByOfferType[offerType][_user][_nonce] = true;\\n    }\\n}\\n\",\"keccak256\":\"0x036d023e140125bcf26a0b1038f638c0daa2bc3415c40cf34fedaa596e7c4a0e\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/AssetOfferLoan.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {\\n    ILoanCoordinator,\\n    LoanBaseMinimal,\\n    NFTfiSigningUtils,\\n    LoanChecksAndCalculations,\\n    LoanData\\n} from \\\"./LoanBaseMinimal.sol\\\";\\nimport {ContractKeyUtils} from \\\"../../utils/ContractKeyUtils.sol\\\";\\n\\n/**\\n * @title  AssetOfferLoan\\n * @author NFTfi\\n * @notice Main contract for NFTfi Loans Type. This contract manages the ability to create NFT-backed\\n * peer-to-peer loans of type Fixed (agreed to be a fixed-repayment loan) where the borrower pays the\\n * maximumRepaymentAmount regardless of whether they repay early or not.\\n *\\n * There are two ways to commence an NFT-backed loan:\\n *\\n * a. The borrower accepts a lender's offer by calling `acceptOffer`.\\n *   1. the borrower calls nftContract.approveAll(NFTfi), approving the NFTfi contract to move their NFT's on their\\n * behalf.\\n *   2. the lender calls erc20Contract.approve(NFTfi), allowing NFTfi to move the lender's ERC20 tokens on their\\n * behalf.\\n *   3. the lender signs an off-chain message, proposing its offer terms.\\n *   4. the borrower calls `acceptOffer` to accept these terms and enter into the loan. The NFT is stored in\\n * the contract, the borrower receives the loan principal in the specified ERC20 currency, the lender can mint an\\n * NFTfi promissory note (in ERC721 form) that represents the rights to either the principal-plus-interest, or the\\n * underlying NFT collateral if the borrower does not pay back in time, and the borrower can mint an obligation receipt\\n * (in ERC721 form) that gives them the right to pay back the loan and get the collateral back.\\n *\\n * The lender can freely transfer and trade this ERC721 promissory note as they wish, with the knowledge that\\n * transferring the ERC721 promissory note tranfers the rights to principal-plus-interest and/or collateral, and that\\n * they will no longer have a claim on the loan. The ERC721 promissory note itself represents that claim.\\n *\\n * The borrower can freely transfer and trade this ERC721 obligation receipt as they wish, with the knowledge that\\n * transferring the ERC721 obligation receipt tranfers the rights right to pay back the loan and get the collateral\\n * back.\\n *\\n *\\n * A loan may end in one of two ways:\\n * - First, a borrower may call NFTfi.payBackLoan() and pay back the loan plus interest at any time, in which case they\\n * receive their NFT back in the same transaction.\\n * - Second, if the loan's duration has passed and the loan has not been paid back yet, a lender can call\\n * NFTfi.liquidateOverdueLoan(), in which case they receive the underlying NFT collateral and forfeit the rights to the\\n * principal-plus-interest, which the borrower now keeps.\\n */\\ncontract AssetOfferLoan is LoanBaseMinimal {\\n    /* ************* */\\n    /* CUSTOM ERRORS */\\n    /* ************* */\\n\\n    error InvalidLenderSignature();\\n    error NegativeInterestRate();\\n    error OriginationFeeIsTooHigh();\\n\\n    /* *********** */\\n    /* CONSTRUCTOR */\\n    /* *********** */\\n\\n    /**\\n     * @dev Sets `hub` and permitted erc20-s\\n     *\\n     * @param _admin - Initial admin of this contract.\\n     * @param  _nftfiHub - NFTfiHub address\\n     * @param  _permittedErc20s - list of permitted ERC20 token contract addresses\\n     */\\n    constructor(\\n        address _admin,\\n        address _nftfiHub,\\n        address[] memory _permittedErc20s\\n    ) LoanBaseMinimal(_admin, _nftfiHub, ContractKeyUtils.getIdFromStringKey(\\\"LOAN_COORDINATOR\\\"), _permittedErc20s) {\\n        // solhint-disable-previous-line no-empty-blocks\\n    }\\n\\n    /* ********* */\\n    /* FUNCTIONS */\\n    /* ********* */\\n\\n    /**\\n     * @notice This function is called by the borrower when accepting a lender's offer to begin a loan.\\n     *\\n     * @param _offer - The offer made by the lender.\\n     * @param _signature - The components of the lender's signature.\\n     * @return The ID of the created loan.\\n     */\\n    function acceptOffer(\\n        Offer memory _offer,\\n        Signature memory _signature\\n    ) external virtual whenNotPaused nonReentrant returns (uint32) {\\n        address nftWrapper = _getWrapper(_offer.nftCollateralContract);\\n        _loanSanityChecks(_offer, nftWrapper);\\n\\n        _loanSanityChecksOffer(_offer);\\n        return _acceptOffer(_setupLoanTerms(_offer, _signature.signer, nftWrapper), _offer, _signature);\\n    }\\n\\n    /* ******************* */\\n    /* READ-ONLY FUNCTIONS */\\n    /* ******************* */\\n\\n    /**\\n     * @notice This function can be used to view the current quantity of the ERC20 currency used in the specified loan\\n     * required by the borrower to repay their loan, measured in the smallest unit of the ERC20 currency. Note that\\n     * since interest accrues every second, once a borrower calls repayLoan(), the amount will have increased slightly.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     *\\n     * @return The amount of the specified ERC20 currency required to pay back this loan, measured in the smallest unit\\n     * of the specified ERC20 currency.\\n     */\\n    function getPayoffAmount(uint32 _loanId) external view override returns (uint256) {\\n        LoanTerms memory loan = loanIdToLoan[_loanId];\\n        uint256 loanDurationSoFarInSeconds = block.timestamp - uint256(loan.loanStartTime);\\n        uint256 interestDue = _computeInterestDue(\\n            loan.loanPrincipalAmount,\\n            loan.maximumRepaymentAmount,\\n            loanDurationSoFarInSeconds,\\n            uint256(loan.loanDuration),\\n            loan.isProRata\\n        );\\n\\n        return (loan.loanPrincipalAmount) + interestDue;\\n    }\\n\\n    /* ****************** */\\n    /* INTERNAL FUNCTIONS */\\n    /* ****************** */\\n\\n    /**\\n     * @notice This function is called by the borrower when accepting a lender's offer to begin a loan.\\n     *\\n     * @param _loanTerms - The main Loan Terms struct. This data is saved upon loan creation on loanIdToLoan.\\n     * @param _offer - The offer made by the lender.\\n     * @param _signature - The components of the lender's signature.\\n     * @return The ID of the created loan.\\n     */\\n    function _acceptOffer(\\n        LoanTerms memory _loanTerms,\\n        Offer memory _offer,\\n        Signature memory _signature\\n    ) internal virtual returns (uint32) {\\n        // Check loan nonces. These are different from Ethereum account nonces.\\n        // Here, these are uint256 numbers that should uniquely identify\\n        // each signature for each user (i.e. each user should only create one\\n        // off-chain signature for each nonce, with a nonce being any arbitrary\\n        // uint256 value that they have not used yet for an off-chain NFTfi\\n        // signature).\\n        ILoanCoordinator(hub.getContract(LOAN_COORDINATOR)).checkAndInvalidateNonce(\\n            _signature.signer,\\n            _signature.nonce\\n        );\\n\\n        bytes32 offerType = _getOwnOfferType();\\n\\n        if (!NFTfiSigningUtils.isValidLenderSignature(_offer, _signature, offerType)) {\\n            revert InvalidLenderSignature();\\n        }\\n\\n        uint32 loanId = _createLoan(_loanTerms, msg.sender);\\n\\n        // Emit an event with all relevant details from this transaction.\\n        emit LoanStarted(loanId, msg.sender, _signature.signer, _loanTerms);\\n        return loanId;\\n    }\\n\\n    /**\\n     * @dev Creates a `LoanTerms` struct using data sent as the lender's `_offer` on `acceptOffer`.\\n     * This is needed in order to avoid stack too deep issues.\\n     *\\n     * @param _offer - The offer made by the lender.\\n     * @param _lender - The address of the lender.\\n     * @param _nftWrapper - The address of the NFT wrapper contract.\\n     * @return The `LoanTerms` struct.\\n     */\\n    function _setupLoanTerms(\\n        Offer memory _offer,\\n        address _lender,\\n        address _nftWrapper\\n    ) internal view returns (LoanTerms memory) {\\n        return\\n            LoanTerms({\\n                loanERC20Denomination: _offer.loanERC20Denomination,\\n                loanPrincipalAmount: _offer.loanPrincipalAmount,\\n                maximumRepaymentAmount: _offer.maximumRepaymentAmount,\\n                nftCollateralContract: _offer.nftCollateralContract,\\n                nftCollateralWrapper: _nftWrapper,\\n                nftCollateralId: _offer.nftCollateralId,\\n                loanStartTime: uint64(block.timestamp),\\n                loanDuration: _offer.loanDuration,\\n                loanInterestRateForDurationInBasisPoints: uint16(0),\\n                loanAdminFeeInBasisPoints: adminFeeInBasisPoints,\\n                borrower: msg.sender,\\n                lender: _lender,\\n                escrow: getEscrowAddress(msg.sender),\\n                isProRata: _offer.isProRata,\\n                originationFee: _offer.originationFee\\n            });\\n    }\\n\\n    /**\\n     * @dev Calculates the interest rate for the loan based on principal amount and maximum repayment amount.\\n     *\\n     * @param _loanPrincipalAmount - The principal amount of the loan.\\n     * @param _maximumRepaymentAmount - The maximum repayment amount of the loan.\\n     * @return The interest rate for the duration of the loan in basis points.\\n     */\\n    function _calculateInterestRateForDurationInBasisPoints(\\n        uint256 _loanPrincipalAmount,\\n        uint256 _maximumRepaymentAmount,\\n        bool _isProRata\\n    ) internal pure returns (uint256) {\\n        if (!_isProRata) {\\n            return 0;\\n        } else {\\n            uint256 interest = _maximumRepaymentAmount - _loanPrincipalAmount;\\n            return (interest * HUNDRED_PERCENT) / _loanPrincipalAmount;\\n        }\\n    }\\n\\n    /**\\n     * @dev Calculates the payoff amount and admin fee for the loan.\\n     *\\n     * @param _loan - Struct containing all the loan's parameters.\\n     * @return adminFee - The admin fee.\\n     * @return payoffAmount - The payoff amount.\\n     */\\n    function _payoffAndFee(\\n        LoanTerms memory _loan\\n    ) internal view override returns (uint256 adminFee, uint256 payoffAmount) {\\n        // Calculate amounts to send to lender and admins\\n        uint256 interestDue = _computeInterestDue(\\n            _loan.loanPrincipalAmount,\\n            _loan.maximumRepaymentAmount,\\n            block.timestamp - uint256(_loan.loanStartTime),\\n            uint256(_loan.loanDuration),\\n            _loan.isProRata\\n        );\\n        adminFee = LoanChecksAndCalculations.computeAdminFee(interestDue, uint256(_loan.loanAdminFeeInBasisPoints));\\n        payoffAmount = ((_loan.loanPrincipalAmount) + interestDue) - adminFee;\\n    }\\n\\n    /**\\n     * @notice A convenience function that calculates the amount of interest currently due for a given loan. The\\n     * interest is capped at _maximumRepaymentAmount minus _loanPrincipalAmount.\\n     *\\n     * @param _loanPrincipalAmount - The total quantity of principal first loaned to the borrower, measured in the\\n     * smallest units of the ERC20 currency used for the loan.\\n     * @param _maximumRepaymentAmount - The maximum amount of money that the borrower would be required to retrieve\\n     * their collateral. If interestIsProRated is set to false, then the borrower will always have to pay this amount to\\n     * retrieve their collateral.\\n     * @param _loanDurationSoFarInSeconds - The elapsed time (in seconds) that has occurred so far since the loan began\\n     * until repayment.\\n     * @param _loanTotalDurationAgreedTo - The original duration that the borrower and lender agreed to, by which they\\n     * measured the interest that would be due.\\n     *\\n     * @return The quantity of interest due, measured in the smallest units of the ERC20 currency used to pay this loan.\\n     */\\n    function _computeInterestDue(\\n        uint256 _loanPrincipalAmount,\\n        uint256 _maximumRepaymentAmount,\\n        uint256 _loanDurationSoFarInSeconds,\\n        uint256 _loanTotalDurationAgreedTo,\\n        bool _isProRata\\n    ) internal pure returns (uint256) {\\n        // is it fixed?\\n        if (!_isProRata) {\\n            return _maximumRepaymentAmount - _loanPrincipalAmount;\\n        } else {\\n            uint256 interestDueAfterEntireDurationInBasisPoints = (_loanPrincipalAmount *\\n                _calculateInterestRateForDurationInBasisPoints(\\n                    _loanPrincipalAmount,\\n                    _maximumRepaymentAmount,\\n                    _isProRata\\n                ));\\n            uint256 interestDueAfterElapsedDuration = (interestDueAfterEntireDurationInBasisPoints *\\n                _loanDurationSoFarInSeconds) /\\n                _loanTotalDurationAgreedTo /\\n                uint256(HUNDRED_PERCENT);\\n\\n            if (_loanPrincipalAmount + interestDueAfterElapsedDuration > _maximumRepaymentAmount) {\\n                return (_maximumRepaymentAmount - _loanPrincipalAmount);\\n            } else {\\n                return interestDueAfterElapsedDuration;\\n            }\\n        }\\n    }\\n\\n    /**\\n     * @dev Performs validation checks on loan parameters when accepting an offer.\\n     *\\n     * @param _offer - The offer made by the lender.\\n     */\\n    function _loanSanityChecksOffer(LoanData.Offer memory _offer) internal pure {\\n        if (_offer.maximumRepaymentAmount < _offer.loanPrincipalAmount) {\\n            revert NegativeInterestRate();\\n        }\\n\\n        if (_offer.originationFee >= _offer.loanPrincipalAmount) {\\n            revert OriginationFeeIsTooHigh();\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x1edef4a3ae96fe99d42aeb68658121d8a2a89314e88b396ce6652e737feef985\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/ILoanBase.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {LoanData} from \\\"./LoanData.sol\\\";\\n\\ninterface ILoanBase {\\n    function maximumLoanDuration() external view returns (uint256);\\n\\n    function adminFeeInBasisPoints() external view returns (uint16);\\n\\n    // solhint-disable-next-line func-name-mixedcase\\n    function LOAN_COORDINATOR() external view returns (bytes32);\\n\\n    function getLoanTerms(uint32) external view returns (LoanData.LoanTerms memory);\\n\\n    function loanRepaidOrLiquidated(uint32) external view returns (bool);\\n\\n    function getWhetherRenegotiationNonceHasBeenUsedForUser(address _user, uint256 _nonce) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x39ce15955256ecff9277a34e4346e8a505f32ebaf1a50026a183bd5a22e1dd86\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/LoanBaseMinimal.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {ILoanBase} from \\\"./ILoanBase.sol\\\";\\nimport {LoanData} from \\\"./LoanData.sol\\\";\\nimport {LoanChecksAndCalculations} from \\\"./LoanChecksAndCalculations.sol\\\";\\nimport {BaseLoan} from \\\"../BaseLoan.sol\\\";\\nimport {NFTfiSigningUtils} from \\\"../../utils/NFTfiSigningUtils.sol\\\";\\nimport {INftfiHub} from \\\"../../interfaces/INftfiHub.sol\\\";\\nimport {ContractKeys} from \\\"../../utils/ContractKeys.sol\\\";\\nimport {ContractKeyUtils} from \\\"../../utils/ContractKeyUtils.sol\\\";\\nimport {ILoanCoordinator} from \\\"../../interfaces/ILoanCoordinator.sol\\\";\\nimport {IPermittedERC20s} from \\\"../../interfaces/IPermittedERC20s.sol\\\";\\nimport {IPermittedNFTs} from \\\"../../interfaces/IPermittedNFTs.sol\\\";\\nimport {IEscrow} from \\\"../../interfaces/IEscrow.sol\\\";\\nimport {IERC20TransferManager} from \\\"../../interfaces/IERC20TransferManager.sol\\\";\\nimport {IPersonalEscrow} from \\\"../../interfaces/IPersonalEscrow.sol\\\";\\nimport {PersonalEscrowFactory} from \\\"../../escrow/PersonalEscrowFactory.sol\\\";\\nimport {INftWrapper} from \\\"../../interfaces/INftWrapper.sol\\\";\\nimport {IDelegateCashPlugin} from \\\"../../interfaces/IDelegateCashPlugin.sol\\\";\\n\\nimport {Address} from \\\"@openzeppelin/contracts/utils/Address.sol\\\";\\nimport {IERC721} from \\\"@openzeppelin/contracts/token/ERC721/IERC721.sol\\\";\\nimport {IERC20} from \\\"@openzeppelin/contracts/token/ERC20/IERC20.sol\\\";\\nimport {SafeERC20} from \\\"@openzeppelin/contracts/token/ERC20/utils/SafeERC20.sol\\\";\\n\\n/**\\n * @title  LoanBaseMinimal\\n * @author NFTfi\\n * @notice Main contract for NFTfi Loan Type. This contract manages the ability to create NFT-backed\\n * peer-to-peer loans.\\n *\\n * There are two ways to commence an NFT-backed loan:\\n *\\n * a. The borrower accepts a lender's offer by calling `acceptOffer`.\\n *   1. the borrower calls nftContract.approveAll(NFTfi), approving the NFTfi contract to move their NFT's on their\\n * be1alf.\\n *   2. the lender calls erc20Contract.approve(NFTfi), allowing NFTfi to move the lender's ERC20 tokens on their\\n * behalf.\\n *   3. the lender signs an off-chain message, proposing its offer terms.\\n *   4. the borrower calls `acceptOffer` to accept these terms and enter into the loan. The NFT is stored in\\n * the contract, the borrower receives the loan principal in the specified ERC20 currency, the lender can mint an\\n * NFTfi promissory note (in ERC721 form) that represents the rights to either the principal-plus-interest, or the\\n * underlying NFT collateral if the borrower does not pay back in time, and the borrower can mint obligation receipt\\n * (in ERC721 form) that gives them the right to pay back the loan and get the collateral back.\\n *\\n * The lender can freely transfer and trade this ERC721 promissory note as they wish, with the knowledge that\\n * transferring the ERC721 promissory note tranfers the rights to principal-plus-interest and/or collateral, and that\\n * they will no longer have a claim on the loan. The ERC721 promissory note itself represents that claim.\\n *\\n * The borrower can freely transfer and trade this ERC721 obligation receipt as they wish, with the knowledge that\\n * transferring the ERC721 obligation receipt tranfers the rights right to pay back the loan and get the collateral\\n * back.\\n *\\n * A loan may end in one of two ways:\\n * - First, a borrower may call NFTfi.payBackLoan() and pay back the loan plus interest at any time, in which case they\\n * receive their NFT back in the same transaction.\\n * - Second, if the loan's duration has passed and the loan has not been paid back yet, a lender can call\\n * NFTfi.liquidateOverdueLoan(), in which case they receive the underlying NFT collateral and forfeit the rights to the\\n * principal-plus-interest, which the borrower now keeps.\\n *\\n *\\n * If the loan was created as a ProRated type loan (pro-rata interest loan), then the user only pays the principal plus\\n * pro-rata interest if repaid early.\\n * However, if the loan was was created as a Fixed type loan (agreed to be a fixed-repayment loan), then the borrower\\n * pays the maximumRepaymentAmount regardless of whether they repay early or not.\\n *\\n */\\nabstract contract LoanBaseMinimal is ILoanBase, IPermittedERC20s, BaseLoan, LoanData {\\n    using SafeERC20 for IERC20;\\n\\n    /* ******* */\\n    /* STORAGE */\\n    /* ******* */\\n\\n    uint16 public constant HUNDRED_PERCENT = 10000;\\n\\n    // solhint-disable-next-line immutable-vars-naming\\n    bytes32 public immutable override LOAN_COORDINATOR;\\n\\n    /**\\n     * @notice The maximum duration of any loan started for this loan type, measured in seconds. This is both a\\n     * sanity-check for borrowers and an upper limit on how long admins will have to support v1 of this contract if they\\n     * eventually deprecate it, as well as a check to ensure that the loan duration never exceeds the space alotted for\\n     * it in the loan struct.\\n     */\\n    uint256 public override maximumLoanDuration = 365 days * 4;\\n\\n    /**\\n     * @notice The percentage of interest earned by lenders on this platform that is taken by the contract admin's as a\\n     * fee, measured in basis points (hundredths of a percent). The max allowed value is 10000.\\n     */\\n    uint16 public override adminFeeInBasisPoints = 500;\\n\\n    /**\\n     * @notice A mapping from a loan's identifier to the loan's details, represted by the loan struct.\\n     */\\n    mapping(uint32 => LoanTerms) internal loanIdToLoan;\\n\\n    /**\\n     * @notice A mapping tracking whether a loan has either been repaid or liquidated. This prevents an attacker trying\\n     * to repay or liquidate the same loan twice.\\n     */\\n    mapping(uint32 => bool) public override loanRepaidOrLiquidated;\\n\\n    /**\\n     * @notice A mapping that takes both a user's address and a loan nonce that was first used when signing an off-chain\\n     * order and checks whether that nonce has previously either been used for a loan, or has been pre-emptively\\n     * cancelled. The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to\\n     * nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders.\\n     *\\n     * These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each\\n     * nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower\\n     * in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would submit a\\n     * user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling\\n     * NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from\\n     * using the user's off-chain order that contains that nonce.\\n     */\\n    mapping(address => mapping(uint256 => bool)) internal _renegotiationNonceHasBeenUsedForUser;\\n\\n    /**\\n     * @notice A mapping from an ERC20 currency address to whether that currency\\n     * is permitted to be used by this contract.\\n     */\\n    mapping(address => bool) private erc20Permits;\\n\\n    // solhint-disable-next-line immutable-vars-naming\\n    INftfiHub public immutable hub;\\n\\n    /* ****** */\\n    /* EVENTS */\\n    /* ****** */\\n\\n    /**\\n     * @notice This event is fired whenever the admins change the percent of interest rates earned that they charge as a\\n     * fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points.\\n     *\\n     * @param  newAdminFee - The new admin fee measured in basis points. This is a percent of the interest paid upon a\\n     * loan's completion that go to the contract admins.\\n     */\\n    event AdminFeeUpdated(uint16 newAdminFee);\\n\\n    /**\\n     * @notice This event is fired whenever the admins change the maximum duration of any loan started for this loan\\n     * type.\\n     *\\n     * @param  newMaximumLoanDuration - The new maximum duration.\\n     */\\n    event MaximumLoanDurationUpdated(uint256 newMaximumLoanDuration);\\n\\n    event LoanCreated(\\n        address indexed nftCollateralContract,\\n        uint256 indexed nftCollateralId,\\n        address indexed recipient,\\n        uint256 loanId\\n    );\\n\\n    /**\\n     * @notice This event is fired whenever a borrower begins a loan by calling NFTfi.beginLoan(), which can only occur\\n     * after both the lender and borrower have approved their ERC721 and ERC20 contracts to use NFTfi, and when they\\n     * both have signed off-chain messages that agree on the terms of the loan.\\n     *\\n     * @param  loanId - A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     * @param  borrower - The address of the borrower.\\n     * @param  lender - The address of the lender. The lender can change their address by transferring the NFTfi ERC721\\n     * token that they received when the loan began.\\n     */\\n    event LoanStarted(uint32 indexed loanId, address indexed borrower, address indexed lender, LoanTerms loanTerms);\\n\\n    /**\\n     * @notice This event is fired whenever a borrower successfully repays their loan, paying\\n     * principal-plus-interest-minus-fee to the lender in loanERC20Denomination, paying fee to owner in\\n     * loanERC20Denomination, and receiving their NFT collateral back.\\n     *\\n     * @param  loanId - A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     * @param  borrower - The address of the borrower.\\n     * @param  lender - The address of the lender. The lender can change their address by transferring the NFTfi ERC721\\n     * token that they received when the loan began.\\n     * @param  loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param  nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param  amountPaidToLender The amount of ERC20 that the borrower paid to the lender, measured in the smalled\\n     * units of loanERC20Denomination.\\n     * @param  adminFee The amount of interest paid to the contract admins, measured in the smalled units of\\n     * loanERC20Denomination and determined by adminFeeInBasisPoints. This amount never exceeds the amount of interest\\n     * earned.\\n     * @param  nftCollateralContract - The ERC721 contract of the NFT collateral\\n     * @param  loanERC20Denomination - The ERC20 contract of the currency being used as principal/interest for this\\n     * loan.\\n     */\\n    event LoanRepaid(\\n        uint32 indexed loanId,\\n        address indexed borrower,\\n        address indexed lender,\\n        uint256 loanPrincipalAmount,\\n        uint256 nftCollateralId,\\n        uint256 amountPaidToLender,\\n        uint256 adminFee,\\n        address nftCollateralContract,\\n        address loanERC20Denomination\\n    );\\n\\n    /**\\n     * @notice This event is fired whenever a lender liquidates an outstanding loan that is owned to them that has\\n     * exceeded its duration. The lender receives the underlying NFT collateral, and the borrower no longer needs to\\n     * repay the loan principal-plus-interest.\\n     *\\n     * @param  loanId - A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     * @param  borrower - The address of the borrower.\\n     * @param  lender - The address of the lender. The lender can change their address by transferring the NFTfi ERC721\\n     * token that they received when the loan began.\\n     * @param  loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param  nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param  loanMaturityDate - The unix time (measured in seconds) that the loan became due and was eligible for\\n     * liquidation.\\n     * @param  loanLiquidationDate - The unix time (measured in seconds) that liquidation occurred.\\n     * @param  nftCollateralContract - The ERC721 contract of the NFT collateral\\n     */\\n    event LoanLiquidated(\\n        uint32 indexed loanId,\\n        address indexed borrower,\\n        address indexed lender,\\n        uint256 loanPrincipalAmount,\\n        uint256 nftCollateralId,\\n        uint256 loanMaturityDate,\\n        uint256 loanLiquidationDate,\\n        address nftCollateralContract\\n    );\\n\\n    /**\\n     * @notice This event is fired when some of the terms of a loan are being renegotiated.\\n     *\\n     * @param loanId - The unique identifier for the loan to be renegotiated\\n     * @param newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param renegotiationFee Agreed upon fee in loan denomination that borrower pays for the lender for the\\n     * renegotiation, has to be paid with an ERC20 transfer loanERC20Denomination token, uses transfer from,\\n     * frontend will have to prompt an erc20 approve for this from the borrower to the lender\\n     * @param renegotiationAdminFee renegotiationFee admin portion based on determined by adminFeeInBasisPoints\\n     * @param isProRata - indicates if a renegotiated loan is pro-rata or fixed\\n     */\\n    event LoanRenegotiated(\\n        uint32 indexed loanId,\\n        address indexed borrower,\\n        address indexed lender,\\n        uint32 newLoanDuration,\\n        uint256 newMaximumRepaymentAmount,\\n        uint256 renegotiationFee,\\n        uint256 renegotiationAdminFee,\\n        bool isProRata\\n    );\\n\\n    /**\\n     * @notice This event is fired whenever the admin sets a ERC20 permit.\\n     *\\n     * @param erc20Contract - Address of the ERC20 contract.\\n     * @param isPermitted - Signals ERC20 permit.\\n     */\\n    event ERC20Permit(address indexed erc20Contract, bool isPermitted);\\n\\n    /* ************* */\\n    /* CUSTOM ERRORS */\\n    /* ************* */\\n\\n    error LoanDurationOverflow();\\n    error BasisPointsTooHigh();\\n    error NoTokensOwned();\\n    error FunctionInformationArityMismatch();\\n    error TokenIsCollateral();\\n    error SenderNotBorrower();\\n    error SenderNotLender();\\n    error NoTokensInEscrow();\\n    error LoanAlreadyRepaidOrLiquidated();\\n    error LoanNotOverdueYet();\\n    error OnlyLenderCanLiquidate();\\n    error InvalidNonce();\\n    error RenegotiationSignatureInvalid();\\n    error ERC20ZeroAddress();\\n    error CurrencyDenominationNotPermitted();\\n    error NFTCollateralContractNotPermitted();\\n    error LoanDurationExceedsMaximum();\\n    error LoanDurationCannotBeZero();\\n    error ZeroPrincipal();\\n    error DelegationExists();\\n\\n    /* *********** */\\n    /* CONSTRUCTOR */\\n    /* *********** */\\n\\n    /**\\n     * @dev Sets `hub`\\n     *\\n     * @param _admin - Initial admin of this contract.\\n     * @param  _nftfiHub - NFTfiHub address\\n     * @param  _loanCoordinatorKey -\\n     * @param  _permittedErc20s -\\n     */\\n    constructor(\\n        address _admin,\\n        address _nftfiHub,\\n        bytes32 _loanCoordinatorKey,\\n        address[] memory _permittedErc20s\\n    ) BaseLoan(_admin) {\\n        hub = INftfiHub(_nftfiHub);\\n        LOAN_COORDINATOR = _loanCoordinatorKey;\\n        for (uint256 i; i < _permittedErc20s.length; ++i) {\\n            _setERC20Permit(_permittedErc20s[i], true);\\n        }\\n    }\\n\\n    /* *************** */\\n    /* ADMIN FUNCTIONS */\\n    /* *************** */\\n\\n    /**\\n     * @notice This function can be called by admins to change the maximumLoanDuration. Note that they can never change\\n     * maximumLoanDuration to be greater than UINT32_MAX, since that's the maximum space alotted for the duration in the\\n     * loan struct.\\n     *\\n     * @param _newMaximumLoanDuration - The new maximum loan duration, measured in seconds.\\n     */\\n    function updateMaximumLoanDuration(uint256 _newMaximumLoanDuration) external onlyOwner {\\n        if (_newMaximumLoanDuration > uint256(type(uint32).max)) {\\n            revert LoanDurationOverflow();\\n        }\\n        maximumLoanDuration = _newMaximumLoanDuration;\\n        emit MaximumLoanDurationUpdated(_newMaximumLoanDuration);\\n    }\\n\\n    /**\\n     * @notice This function can be called by admins to change the percent of interest rates earned that they charge as\\n     * a fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points.\\n     *\\n     * @param _newAdminFeeInBasisPoints - The new admin fee measured in basis points. This is a percent of the interest\\n     * paid upon a loan's completion that go to the contract admins.\\n     */\\n    function updateAdminFee(uint16 _newAdminFeeInBasisPoints) external onlyOwner {\\n        if (_newAdminFeeInBasisPoints > HUNDRED_PERCENT) {\\n            revert BasisPointsTooHigh();\\n        }\\n        adminFeeInBasisPoints = _newAdminFeeInBasisPoints;\\n        emit AdminFeeUpdated(_newAdminFeeInBasisPoints);\\n    }\\n\\n    /**\\n     * @notice used by the owner account to be able to drain stuck NFTs\\n     * @param _tokenAddress - address of the token contract for the token to be sent out\\n     * @param _tokenId - id token to be sent out\\n     * @param _receiver - receiver of the token\\n     */\\n    function drainNFT(\\n        string memory _nftType,\\n        address _tokenAddress,\\n        uint256 _tokenId,\\n        address _receiver\\n    ) external onlyOwner {\\n        bytes32 nftTypeKey = ContractKeyUtils.getIdFromStringKey(_nftType);\\n        address transferWrapper = IPermittedNFTs(hub.getContract(ContractKeys.PERMITTED_NFTS)).getNftTypeWrapper(\\n            nftTypeKey\\n        );\\n        _transferNFT(transferWrapper, _tokenAddress, _tokenId, address(this), _receiver);\\n    }\\n\\n    /**\\n     * @notice This function can be called by admins to change the permitted status of an ERC20 currency. This includes\\n     * both adding an ERC20 currency to the permitted list and removing it.\\n     *\\n     * @param _erc20 - The address of the ERC20 currency whose permit list status changed.\\n     * @param _permit - The new status of whether the currency is permitted or not.\\n     */\\n    function setERC20Permit(address _erc20, bool _permit) external onlyOwner {\\n        _setERC20Permit(_erc20, _permit);\\n    }\\n\\n    /**\\n     * @notice This function can be called by admins to change the permitted status of a batch of ERC20 currency. This\\n     * includes both adding an ERC20 currency to the permitted list and removing it.\\n     *\\n     * @param _erc20s - The addresses of the ERC20 currencies whose permit list status changed.\\n     * @param _permits - The new statuses of whether the currency is permitted or not.\\n     */\\n    function setERC20Permits(address[] memory _erc20s, bool[] memory _permits) external onlyOwner {\\n        if (_erc20s.length != _permits.length) {\\n            revert FunctionInformationArityMismatch();\\n        }\\n        for (uint256 i = 0; i < _erc20s.length; ++i) {\\n            _setERC20Permit(_erc20s[i], _permits[i]);\\n        }\\n    }\\n\\n    /**\\n     * @notice Mints the obligation receipt for the borrower\\n     *\\n     * @param _loanId - The unique identifier for the loan.\\n     */\\n    function mintObligationReceipt(uint32 _loanId) external nonReentrant {\\n        LoanTerms memory loan = loanIdToLoan[_loanId];\\n        address borrower = loan.borrower;\\n        if (msg.sender != borrower) {\\n            revert SenderNotBorrower();\\n        }\\n\\n        _checkDelegationAndUndelegate(_loanId);\\n        // check if colateral is in personal escrow, if yes, we need to move it to global,\\n        // because obligation receipt can change borrower and personal escrow is tied to one borrower\\n        if (\\n            PersonalEscrowFactory(hub.getContract(ContractKeys.PERSONAL_ESCROW_FACTORY)).isPersonalEscrow(loan.escrow)\\n        ) {\\n            _moveCollateralToGlobalEscrow(_loanId, loan);\\n        }\\n\\n        ILoanCoordinator loanCoordinator = ILoanCoordinator(hub.getContract(LOAN_COORDINATOR));\\n        loanCoordinator.mintObligationReceipt(_loanId, borrower);\\n\\n        delete loanIdToLoan[_loanId].borrower;\\n    }\\n\\n    /**\\n     * @notice Internal function to move collateral of the loan from personal tok global escrow,\\n     * will only work if loan collateral is in personal escrow\\n     *\\n     * @param _loanId - The unique identifier for the loan.\\n     * @param _loan loan terms\\n     */\\n    function _moveCollateralToGlobalEscrow(uint32 _loanId, LoanTerms memory _loan) internal {\\n        address globalEscrow = hub.getContract(ContractKeys.ESCROW);\\n        IPersonalEscrow(_loan.escrow).handOverCollateralToEscrow(\\n            _loan.nftCollateralWrapper,\\n            _loan.nftCollateralContract,\\n            _loan.nftCollateralId,\\n            globalEscrow\\n        );\\n        IEscrow(globalEscrow).lockCollateral(\\n            _loan.nftCollateralWrapper,\\n            _loan.nftCollateralContract,\\n            _loan.nftCollateralId,\\n            _loan.escrow\\n        );\\n        loanIdToLoan[_loanId].escrow = globalEscrow;\\n    }\\n\\n    /**\\n     * @notice Mints the promissory note for the lender\\n     *\\n     * @param _loanId - The unique identifier for the loan.\\n     */\\n    function mintPromissoryNote(uint32 _loanId) external nonReentrant {\\n        address lender = loanIdToLoan[_loanId].lender;\\n        if (msg.sender != lender) {\\n            revert SenderNotLender();\\n        }\\n        ILoanCoordinator loanCoordinator = ILoanCoordinator(hub.getContract(LOAN_COORDINATOR));\\n        loanCoordinator.mintPromissoryNote(_loanId, lender);\\n\\n        delete loanIdToLoan[_loanId].lender;\\n    }\\n\\n    /**\\n     * @dev makes possible to change loan duration and max repayment amount, loan duration even can be extended if\\n     * loan was expired but not liquidated.\\n     *\\n     * @param _loanId - The unique identifier for the loan to be renegotiated\\n     * @param _newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param _newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param _renegotiationFee Agreed upon fee in ether that borrower pays for the lender for the renegitiation\\n     * @param _lenderNonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are\\n     * referring instead to nonces that are used by both the lender and the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @param _expiry - The date when the renegotiation offer expires\\n     * @param _isProRata - indicates if a renegotiated loan is pro-rata or fixed\\n     * @param _lenderSignature - The ECDSA signature of the lender, obtained off-chain ahead of time, signing the\\n     * following combination of parameters:\\n     * - _loanId\\n     * - _newLoanDuration\\n     * - _isProRata\\n     * - _newMaximumRepaymentAmount\\n     * - _renegotiationFee\\n     * - _lender\\n     * - _nonce\\n     * - _expiry\\n     * - address of this contract\\n     * - chainId\\n     */\\n    function renegotiateLoan(\\n        uint32 _loanId,\\n        uint32 _newLoanDuration,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _renegotiationFee,\\n        uint256 _lenderNonce,\\n        uint256 _expiry,\\n        bool _isProRata,\\n        bytes memory _lenderSignature\\n    ) external whenNotPaused nonReentrant {\\n        _renegotiateLoan(\\n            _loanId,\\n            _newLoanDuration,\\n            _newMaximumRepaymentAmount,\\n            _renegotiationFee,\\n            _lenderNonce,\\n            _expiry,\\n            _isProRata,\\n            _lenderSignature\\n        );\\n    }\\n\\n    /**\\n     * @notice This function is called by a anyone to repay a loan. It can be called at any time after the loan has\\n     * begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off\\n     * early and the loan is pro-rated type, but the complete repayment amount if it is fixed type.\\n     * The the borrower (current owner of the obligation note) will get the collaterl NFT back.\\n     *\\n     * This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the\\n     * contract and hold hostage the NFT's that are still within it.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     */\\n    function payBackLoan(uint32 _loanId) external nonReentrant {\\n        LoanChecksAndCalculations.payBackChecks(_loanId, hub);\\n        (\\n            address borrower,\\n            address lender,\\n            LoanTerms memory loan,\\n            ILoanCoordinator loanCoordinator\\n        ) = _getPartiesAndData(_loanId);\\n\\n        _payBackLoan(_loanId, borrower, lender, loan);\\n\\n        bool repaid = true;\\n        _resolveLoanState(_loanId, loanCoordinator, repaid);\\n        _resolveLoanCollateralPayback(borrower, loan);\\n        _checkDelegationAndUndelegate(_loanId);\\n    }\\n\\n    /**\\n     * @notice This function is called by a anyone to repay a loan. It can be called at any time after the loan has\\n     * begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off\\n     * early and the loan is pro-rated type, but the complete repayment amount if it is fixed type.\\n     * The the borrower (current owner of the obligation note) will get the collaterl NFT back.\\n     *\\n     * This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the\\n     * contract and hold hostage the NFT's that are still within it.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     */\\n    function payBackLoanSafe(uint32 _loanId) external nonReentrant {\\n        LoanChecksAndCalculations.payBackChecks(_loanId, hub);\\n        (\\n            address borrower,\\n            address lender,\\n            LoanTerms memory loan,\\n            ILoanCoordinator loanCoordinator\\n        ) = _getPartiesAndData(_loanId);\\n\\n        _payBackLoanSafe(_loanId, borrower, lender, loan);\\n\\n        bool repaid = true;\\n        _resolveLoanState(_loanId, loanCoordinator, repaid);\\n        _resolveLoanCollateralPayback(borrower, loan);\\n        _checkDelegationAndUndelegate(_loanId);\\n    }\\n\\n    /**\\n     * @notice This function is called by a lender once a loan has finished its duration and the borrower still has not\\n     * repaid. The lender can call this function to seize the underlying NFT collateral, although the lender gives up\\n     * all rights to the principal-plus-collateral by doing so.\\n     *\\n     * This function is purposefully not pausable in order to prevent an attack where the contract admin's pause\\n     * the contract and hold hostage the NFT's that are still within it.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     */\\n    function liquidateOverdueLoan(uint32 _loanId) external nonReentrant {\\n        LoanChecksAndCalculations.checkLoanIdValidity(_loanId, hub);\\n        // Sanity check that payBackLoan() and liquidateOverdueLoan() have never been called on this loanId.\\n        // Depending on how the rest of the code turns out, this check may be unnecessary.\\n        if (loanRepaidOrLiquidated[_loanId]) {\\n            revert LoanAlreadyRepaidOrLiquidated();\\n        }\\n\\n        (\\n            address borrower,\\n            address lender,\\n            LoanTerms memory loan,\\n            ILoanCoordinator loanCoordinator\\n        ) = _getPartiesAndData(_loanId);\\n\\n        // Ensure that the loan is indeed overdue, since we can only liquidate overdue loans.\\n        uint256 loanMaturityDate = uint256(loan.loanStartTime) + uint256(loan.loanDuration);\\n        if (block.timestamp <= loanMaturityDate) {\\n            revert LoanNotOverdueYet();\\n        }\\n        if (msg.sender != lender) {\\n            revert OnlyLenderCanLiquidate();\\n        }\\n\\n        bool repaid = false;\\n        _resolveLoanState(_loanId, loanCoordinator, repaid);\\n        _resolveLoanCollateralLiquidate(lender, loan);\\n        _checkDelegationAndUndelegate(_loanId);\\n\\n        // Emit an event with all relevant details from this transaction.\\n        emit LoanLiquidated(\\n            _loanId,\\n            borrower,\\n            lender,\\n            loan.loanPrincipalAmount,\\n            loan.nftCollateralId,\\n            loanMaturityDate,\\n            block.timestamp,\\n            loan.nftCollateralContract\\n        );\\n    }\\n\\n    /**\\n     * @notice This function can be called by either a lender or a borrower to cancel all off-chain orders that they\\n     * have signed that contain this nonce. If the off-chain orders were created correctly, there should only be one\\n     * off-chain order that contains this nonce at all.\\n     *\\n     * The nonce referred to here is not the same as an Ethereum account's nonce. We are referring\\n     * instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi\\n     * orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order.\\n     * Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the\\n     * borrower in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would\\n     * submit a user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling\\n     * NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from\\n     * using the user's off-chain order that contains that nonce.\\n     *\\n     * @param  _nonce - User nonce\\n     */\\n    function cancelRefinancingCommitment(uint256 _nonce) external {\\n        if (_renegotiationNonceHasBeenUsedForUser[msg.sender][_nonce]) {\\n            revert InvalidNonce();\\n        }\\n        _renegotiationNonceHasBeenUsedForUser[msg.sender][_nonce] = true;\\n    }\\n\\n    /* ******************* */\\n    /* READ-ONLY FUNCTIONS */\\n    /* ******************* */\\n\\n    function getLoanTerms(uint32 _loanId) public view override returns (LoanTerms memory) {\\n        LoanTerms memory loan = loanIdToLoan[_loanId];\\n        return loan;\\n    }\\n\\n    /**\\n     * @notice This function can be used to view the current quantity of the ERC20 currency used in the specified loan\\n     * required by the borrower to repay their loan, measured in the smallest unit of the ERC20 currency.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     *\\n     * @return The amount of the specified ERC20 currency required to pay back this loan, measured in the smallest unit\\n     * of the specified ERC20 currency.\\n     */\\n    function getPayoffAmount(uint32 _loanId) external view virtual returns (uint256);\\n\\n    /**\\n     * @notice This function can be used to view whether a particular nonce for a particular user has already been used,\\n     * either from a successful loan or a cancelled off-chain order.\\n     *\\n     * @param _user - The address of the user. This function works for both lenders and borrowers alike.\\n     * @param  _nonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are referring\\n     * instead to nonces that are used by both the lender and the borrower when they are first signing off-chain\\n     * NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain\\n     * order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or\\n     * the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     *\\n     * @return A bool representing whether or not this nonce has been used for this user.\\n     */\\n    function getWhetherRenegotiationNonceHasBeenUsedForUser(\\n        address _user,\\n        uint256 _nonce\\n    ) external view override returns (bool) {\\n        return _renegotiationNonceHasBeenUsedForUser[_user][_nonce];\\n    }\\n\\n    /**\\n     * @notice This function can be called by anyone to get the permit associated with the erc20 contract.\\n     *\\n     * @param _erc20 - The address of the erc20 contract.\\n     *\\n     * @return Returns whether the erc20 is permitted\\n     */\\n    function getERC20Permit(address _erc20) public view override returns (bool) {\\n        return erc20Permits[_erc20];\\n    }\\n\\n    /* ****************** */\\n    /* INTERNAL FUNCTIONS */\\n    /* ****************** */\\n\\n    /**\\n     * @dev makes possible to change loan duration and max repayment amount, loan duration even can be extended if\\n     * loan was expired but not liquidated. IMPORTANT: Frontend will have to propt the caller to do an ERC20 approve for\\n     * the fee amount from themselves (borrower/obligation reciept holder) to the lender (promissory note holder)\\n     *\\n     * @param _loanId - The unique identifier for the loan to be renegotiated\\n     * @param _newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param _newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param _renegotiationFee Agreed upon fee in loan denomination that borrower pays for the lender and\\n     * the admin for the renegotiation, has to be paid with an ERC20 transfer loanERC20Denomination token,\\n     * uses transfer from, frontend will have to prompt an erc20 approve for this from the borrower to the lender,\\n     * admin fee is calculated by the loan's loanAdminFeeInBasisPoints value\\n     * @param _lenderNonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are\\n     * referring instead to nonces that are used by both the lender and the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @param _expiry - The date when the renegotiation offer expires\\n     * @param _lenderSignature - The ECDSA signature of the lender, obtained off-chain ahead of time, signing the\\n     * following combination of parameters:\\n     * - _loanId\\n     * - _newLoanDuration\\n     * - _isProRata\\n     * - _newMaximumRepaymentAmount\\n     * - _renegotiationFee\\n     * - _lender\\n     * - _nonce\\n     * - _expiry\\n     * - address of this contract\\n     * - chainId\\n     */\\n    function _renegotiateLoan(\\n        uint32 _loanId,\\n        uint32 _newLoanDuration,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _renegotiationFee,\\n        uint256 _lenderNonce,\\n        uint256 _expiry,\\n        bool _isProRata,\\n        bytes memory _lenderSignature\\n    ) internal {\\n        LoanTerms storage loan = loanIdToLoan[_loanId];\\n\\n        (address borrower, address lender) = LoanChecksAndCalculations.renegotiationChecks(\\n            loan,\\n            _loanId,\\n            _newLoanDuration,\\n            _newMaximumRepaymentAmount,\\n            _lenderNonce,\\n            hub\\n        );\\n\\n        //invalidation after check inside previous call\\n        _renegotiationNonceHasBeenUsedForUser[lender][_lenderNonce] = true;\\n\\n        if (\\n            !NFTfiSigningUtils.isValidLenderRenegotiationSignature(\\n                _loanId,\\n                _newLoanDuration,\\n                _isProRata,\\n                _newMaximumRepaymentAmount,\\n                _renegotiationFee,\\n                Signature({signer: lender, nonce: _lenderNonce, expiry: _expiry, signature: _lenderSignature})\\n            )\\n        ) {\\n            revert RenegotiationSignatureInvalid();\\n        }\\n\\n        uint256 renegotiationAdminFee;\\n        /**\\n         * @notice Transfers fee to the lender immediately\\n         * @dev implements Checks-Effects-Interactions pattern by modifying state only after\\n         * the transfer happened successfully, we also add the nonReentrant modifier to\\n         * the pbulic versions\\n         */\\n        if (_renegotiationFee > 0) {\\n            renegotiationAdminFee = LoanChecksAndCalculations.computeAdminFee(\\n                _renegotiationFee,\\n                loan.loanAdminFeeInBasisPoints\\n            );\\n            // Transfer principal-plus-interest-minus-fees from the caller (always has to be borrower) to lender\\n\\n            IERC20TransferManager erc20TransferManager = IERC20TransferManager(\\n                hub.getContract(ContractKeys.ERC20_TRANSFER_MANAGER)\\n            );\\n\\n            erc20TransferManager.transfer(\\n                loan.loanERC20Denomination,\\n                borrower,\\n                lender,\\n                _renegotiationFee - renegotiationAdminFee\\n            );\\n            // Transfer fees from the caller (always has to be borrower) to admins\\n            erc20TransferManager.transfer(loan.loanERC20Denomination, borrower, owner(), renegotiationAdminFee);\\n        }\\n\\n        loan.loanDuration = _newLoanDuration;\\n        loan.maximumRepaymentAmount = _newMaximumRepaymentAmount;\\n        loan.isProRata = _isProRata;\\n\\n        // we have to reinstate borrower record here, because obligation receipt gets deleted in reMint\\n        if (loan.borrower == address(0) || loan.lender == address(0)) {\\n            ILoanCoordinator(hub.getContract(LOAN_COORDINATOR)).resetSmartNfts(_loanId);\\n\\n            if (loan.borrower == address(0)) {\\n                loan.borrower = borrower;\\n            }\\n            if (loan.lender == address(0)) {\\n                loan.lender = lender;\\n            }\\n        }\\n\\n        emit LoanRenegotiated(\\n            _loanId,\\n            borrower,\\n            lender,\\n            _newLoanDuration,\\n            _newMaximumRepaymentAmount,\\n            _renegotiationFee,\\n            renegotiationAdminFee,\\n            _isProRata\\n        );\\n    }\\n\\n    function getEscrowAddress(address _borrower) public view returns (address) {\\n        address personalEscrow = PersonalEscrowFactory(hub.getContract(ContractKeys.PERSONAL_ESCROW_FACTORY))\\n            .personalEscrowOfOwner(_borrower);\\n        if (personalEscrow != address(0)) {\\n            return personalEscrow;\\n        } else {\\n            return hub.getContract(ContractKeys.ESCROW);\\n        }\\n    }\\n\\n    /**\\n     * @dev Transfer collateral NFT from borrower to this contract and principal from lender to the borrower and\\n     * registers the new loan through the loan coordinator.\\n     *\\n     * @param _loanTerms - Struct containing the loan's settings\\n     */\\n    function _createLoan(LoanTerms memory _loanTerms, address _borrower) internal returns (uint32) {\\n        IEscrow(_loanTerms.escrow).lockCollateral(\\n            _loanTerms.nftCollateralWrapper,\\n            _loanTerms.nftCollateralContract,\\n            _loanTerms.nftCollateralId,\\n            _borrower\\n        );\\n\\n        uint32 loanId = _createLoanNoNftTransfer(_loanTerms, _borrower);\\n\\n        return loanId;\\n    }\\n\\n    /**\\n     * @dev Transfer principal from lender to the borrower and\\n     * registers the new loan through the loan coordinator.\\n     *\\n     * @param _loanTerms - Struct containing the loan's settings\\n     */\\n    function _createLoanNoNftTransfer(LoanTerms memory _loanTerms, address _borrower) internal returns (uint32 loanId) {\\n        // Issue an ERC721 promissory note to the lender that gives them the\\n        // right to either the principal-plus-interest or the collateral,\\n        // and an obligation note to the borrower that gives them the\\n        // right to pay back the loan and get the collateral back.\\n        ILoanCoordinator loanCoordinator = ILoanCoordinator(hub.getContract(LOAN_COORDINATOR));\\n        loanId = loanCoordinator.registerLoan();\\n\\n        // Add the loan to storage before moving collateral/principal to follow\\n        // the Checks-Effects-Interactions pattern.\\n        loanIdToLoan[loanId] = _loanTerms;\\n\\n        // Transfer principal from lender to borrower leaving origination fee.\\n        IERC20TransferManager(hub.getContract(ContractKeys.ERC20_TRANSFER_MANAGER)).transfer(\\n            _loanTerms.loanERC20Denomination,\\n            _loanTerms.lender,\\n            _borrower,\\n            _loanTerms.loanPrincipalAmount - _loanTerms.originationFee\\n        );\\n\\n        emit LoanCreated(_loanTerms.nftCollateralContract, _loanTerms.nftCollateralId, _borrower, loanId);\\n\\n        return loanId;\\n    }\\n\\n    /**\\n     * @notice This function is called by a anyone to repay a loan. It can be called at any time after the loan has\\n     * begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off\\n     * early and the loan is pro-rated type, but the complete repayment amount if it is fixed type.\\n     * The the borrower (current owner of the obligation note) will get the collaterl NFT back.\\n     *\\n     * This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the\\n     * contract and hold hostage the NFT's that are still within it.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     */\\n    function _payBackLoan(uint32 _loanId, address _borrower, address _lender, LoanTerms memory _loan) internal {\\n        // Fetch loan details from storage, but store them in memory for the sake of saving gas.\\n\\n        (uint256 adminFee, uint256 payoffAmount) = _payoffAndFee(_loan);\\n\\n        IERC20TransferManager erc20TransferManager = IERC20TransferManager(\\n            hub.getContract(ContractKeys.ERC20_TRANSFER_MANAGER)\\n        );\\n\\n        // Transfer principal-plus-interest-minus-fees from the caller to lender\\n        erc20TransferManager.transfer(_loan.loanERC20Denomination, msg.sender, _lender, payoffAmount);\\n        // Transfer fees from the caller to admins\\n        erc20TransferManager.transfer(_loan.loanERC20Denomination, msg.sender, owner(), adminFee);\\n\\n        // Emit an event with all relevant details from this transaction.\\n        emit LoanRepaid(\\n            _loanId,\\n            _borrower,\\n            _lender,\\n            _loan.loanPrincipalAmount,\\n            _loan.nftCollateralId,\\n            payoffAmount,\\n            adminFee,\\n            _loan.nftCollateralContract,\\n            _loan.loanERC20Denomination\\n        );\\n    }\\n\\n    /**\\n     * @notice This function is called by a anyone to repay a loan. It can be called at any time after the loan has\\n     * begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off\\n     * early and the loan is pro-rated type, but the complete repayment amount if it is fixed type.\\n     * The the borrower (current owner of the obligation note) will get the collaterl NFT back.\\n     *\\n     * This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the\\n     * contract and hold hostage the NFT's that are still within it.\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     */\\n    function _payBackLoanSafe(uint32 _loanId, address _borrower, address _lender, LoanTerms memory _loan) internal {\\n        // Fetch loan details from storage, but store them in memory for the sake of saving gas.\\n\\n        (uint256 adminFee, uint256 payoffAmount) = _payoffAndFee(_loan);\\n\\n        IERC20TransferManager erc20TransferManager = IERC20TransferManager(\\n            hub.getContract(ContractKeys.ERC20_TRANSFER_MANAGER)\\n        );\\n\\n        // Transfer principal-plus-interest-minus-fees from the caller to lender\\n        erc20TransferManager.safeLoanPaybackTransfer(_loan.loanERC20Denomination, msg.sender, _lender, payoffAmount);\\n        // Transfer fees from the caller to admins\\n        erc20TransferManager.safeAdminFeeTransfer(_loan.loanERC20Denomination, msg.sender, owner(), adminFee);\\n\\n        // Emit an event with all relevant details from this transaction.\\n        emit LoanRepaid(\\n            _loanId,\\n            _borrower,\\n            _lender,\\n            _loan.loanPrincipalAmount,\\n            _loan.nftCollateralId,\\n            payoffAmount,\\n            adminFee,\\n            _loan.nftCollateralContract,\\n            _loan.loanERC20Denomination\\n        );\\n    }\\n\\n    /**\\n     * @dev Transfers several types of NFTs using a wrapper that knows how to handle each case.\\n     *\\n     * @param _sender - Current owner of the NFT\\n     * @param _recipient - Recipient of the transfer\\n     */\\n    function _transferNFT(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _sender,\\n        address _recipient\\n    ) internal {\\n        Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).transferNFT.selector,\\n                _sender,\\n                _recipient,\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"NFT not successfully transferred\\\"\\n        );\\n    }\\n\\n    function _isOwner(\\n        address _nftCollateralWrapper,\\n        address _nftCollateralContract,\\n        uint256 _nftCollateralId,\\n        address _owner\\n    ) internal returns (bool) {\\n        bytes memory result = Address.functionDelegateCall(\\n            _nftCollateralWrapper,\\n            abi.encodeWithSelector(\\n                INftWrapper(_nftCollateralWrapper).isOwner.selector,\\n                _owner,\\n                _nftCollateralContract,\\n                _nftCollateralId\\n            ),\\n            \\\"Ownership check failed\\\"\\n        );\\n        return abi.decode(result, (bool));\\n    }\\n\\n    /**\\n     * @notice A convenience function with shared functionality between `payBackLoan` and `liquidateOverdueLoan`.\\n     *\\n     * @param _borrower - The receiver of the collateral nft. The borrower when `payBackLoan` or the lender when\\n     * `liquidateOverdueLoan`.\\n     * @param _loanTerms - The main Loan Terms struct. This data is saved upon loan creation on loanIdToLoan.\\n     */\\n    function _resolveLoanCollateralPayback(address _borrower, LoanTerms memory _loanTerms) internal {\\n        address collateralContract = _loanTerms.nftCollateralContract;\\n        uint256 collateralId = _loanTerms.nftCollateralId;\\n\\n        address escrow = _loanTerms.escrow;\\n        if (PersonalEscrowFactory(hub.getContract(ContractKeys.PERSONAL_ESCROW_FACTORY)).isPersonalEscrow(escrow)) {\\n            // borrower has a personal escrow, and the collateral is in it\\n            IPersonalEscrow(escrow).unlockAndKeepCollateral(collateralContract, collateralId);\\n        } else {\\n            IEscrow(escrow).unlockCollateral(\\n                _loanTerms.nftCollateralWrapper,\\n                collateralContract,\\n                collateralId,\\n                _borrower\\n            );\\n        }\\n\\n        // invariant check here if collateral landed where it should have\\n    }\\n\\n    /**\\n     * @notice A convenience function with shared functionality between `payBackLoan` and `liquidateOverdueLoan`.\\n     *\\n     * @param _loanTerms - The main Loan Terms struct. This data is saved upon loan creation on loanIdToLoan.\\n     */\\n    function _resolveLoanCollateralLiquidate(address _lender, LoanTerms memory _loanTerms) internal {\\n        // Transfer collateral from this contract to the lender, since the lender is seizing collateral for an overdue\\n        // loan\\n        address collateralContract = _loanTerms.nftCollateralContract;\\n        uint256 collateralId = _loanTerms.nftCollateralId;\\n        IEscrow(_loanTerms.escrow).unlockCollateral(\\n            _loanTerms.nftCollateralWrapper,\\n            collateralContract,\\n            collateralId,\\n            _lender\\n        );\\n    }\\n\\n    function _checkDelegationAndUndelegate(uint32 _loanId) internal {\\n        IDelegateCashPlugin delegateCashPlugin = IDelegateCashPlugin(hub.getContract(ContractKeys.DELEGATE_PLUGIN));\\n        if (delegateCashPlugin.isCollateralDelegated(_loanId)) {\\n            delegateCashPlugin.undelegateERC721(_loanId);\\n        }\\n    }\\n\\n    /**\\n     * @notice Resolving the loan without transferring the nft to provide a base for the bundle\\n     * break up of the bundled loans\\n     *\\n     * @param _loanId  A unique identifier for this particular loan, sourced from the Loan Coordinator.\\n     * @param _loanCoordinator - The loan coordinator used when creating the loan.\\n     */\\n    function _resolveLoanState(uint32 _loanId, ILoanCoordinator _loanCoordinator, bool _repaid) internal {\\n        // Mark loan as liquidated before doing any external transfers to follow the Checks-Effects-Interactions design\\n        // pattern\\n        loanRepaidOrLiquidated[_loanId] = true;\\n\\n        // Destroy the lender's promissory note for this loan and borrower obligation receipt\\n        _loanCoordinator.resolveLoan(_loanId, _repaid);\\n    }\\n\\n    /**\\n     * @notice This function can be called by admins to change the permitted status of an ERC20 currency. This includes\\n     * both adding an ERC20 currency to the permitted list and removing it.\\n     *\\n     * @param _erc20 - The address of the ERC20 currency whose permit list status changed.\\n     * @param _permit - The new status of whether the currency is permitted or not.\\n     */\\n    function _setERC20Permit(address _erc20, bool _permit) internal {\\n        if (_erc20 == address(0)) {\\n            revert ERC20ZeroAddress();\\n        }\\n        erc20Permits[_erc20] = _permit;\\n\\n        emit ERC20Permit(_erc20, _permit);\\n    }\\n\\n    /**\\n     * @dev Performs some validation checks over loan parameters\\n     *\\n     */\\n    function _loanSanityChecks(LoanData.Offer memory _offer, address _nftWrapper) internal view {\\n        if (!getERC20Permit(_offer.loanERC20Denomination)) {\\n            revert CurrencyDenominationNotPermitted();\\n        }\\n        if (_nftWrapper == address(0)) {\\n            revert NFTCollateralContractNotPermitted();\\n        }\\n        if (uint256(_offer.loanDuration) > maximumLoanDuration) {\\n            revert LoanDurationExceedsMaximum();\\n        }\\n        if (uint256(_offer.loanDuration) == 0) {\\n            revert LoanDurationCannotBeZero();\\n        }\\n        if (_offer.loanPrincipalAmount == 0) {\\n            revert ZeroPrincipal();\\n        }\\n    }\\n\\n    /**\\n     * @dev reads some variable values of a loan for payback functions, created to reduce code repetition\\n     */\\n    function _getPartiesAndData(\\n        uint32 _loanId\\n    )\\n        internal\\n        view\\n        returns (address borrower, address lender, LoanTerms memory loan, ILoanCoordinator loanCoordinator)\\n    {\\n        loanCoordinator = ILoanCoordinator(hub.getContract(LOAN_COORDINATOR));\\n        ILoanCoordinator.Loan memory loanCoordinatorData = loanCoordinator.getLoanData(_loanId);\\n        uint256 smartNftId = loanCoordinatorData.smartNftId;\\n        // Fetch loan details from storage, but store them in memory for the sake of saving gas.\\n        loan = loanIdToLoan[_loanId];\\n        if (loan.borrower != address(0)) {\\n            borrower = loan.borrower;\\n        } else {\\n            // Fetch current owner of loan obligation note.\\n            borrower = IERC721(loanCoordinator.obligationReceiptToken()).ownerOf(smartNftId);\\n        }\\n\\n        if (loan.lender != address(0)) {\\n            lender = loan.lender;\\n        } else {\\n            // Fetch current owner of loan promissory note.\\n            lender = IERC721(loanCoordinator.promissoryNoteToken()).ownerOf(smartNftId);\\n        }\\n    }\\n\\n    /**\\n     * @dev Calculates the payoff amount and admin fee\\n     */\\n    function _payoffAndFee(LoanTerms memory _loanTerms) internal view virtual returns (uint256, uint256);\\n\\n    /**\\n     * @dev Checks that the collateral is a supported contracts and returns what wrapper to use for the loan's NFT\\n     * collateral contract.\\n     *\\n     * @param _nftCollateralContract - The address of the the NFT collateral contract.\\n     *\\n     * @return Address of the NftWrapper to use for the loan's NFT collateral.\\n     */\\n    function _getWrapper(address _nftCollateralContract) internal view returns (address) {\\n        return IPermittedNFTs(hub.getContract(ContractKeys.PERMITTED_NFTS)).getNFTWrapper(_nftCollateralContract);\\n    }\\n\\n    function _getOwnOfferType() internal view returns (bytes32) {\\n        return ILoanCoordinator(hub.getContract(LOAN_COORDINATOR)).getTypeOfLoanContract(address(this));\\n    }\\n\\n    function getERC20TransferManagerAddress() public view returns (address) {\\n        return hub.getContract(ContractKeys.ERC20_TRANSFER_MANAGER);\\n    }\\n}\\n\",\"keccak256\":\"0x6408389ade637ab2e36309d4d757e4dab305607b3fa6ec0a296cfaed08aa3420\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/LoanChecksAndCalculations.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {ILoanBase} from \\\"./ILoanBase.sol\\\";\\nimport {LoanData} from \\\"./LoanData.sol\\\";\\nimport {ILoanCoordinator} from \\\"../../interfaces/ILoanCoordinator.sol\\\";\\nimport {INftfiHub} from \\\"../../interfaces/INftfiHub.sol\\\";\\n\\nimport {IERC721} from \\\"@openzeppelin/contracts/token/ERC721/IERC721.sol\\\";\\n\\n/**\\n * @title  LoanChecksAndCalculations\\n * @author NFTfi\\n * @notice Helper library for LoanBase\\n */\\nlibrary LoanChecksAndCalculations {\\n    uint16 private constant HUNDRED_PERCENT = 10000;\\n\\n    /**\\n     * @dev Function that performs some validation checks before trying to repay a loan\\n     *\\n     * @param _loanId - The id of the loan being repaid\\n     */\\n    function payBackChecks(uint32 _loanId, INftfiHub _hub) external view {\\n        checkLoanIdValidity(_loanId, _hub);\\n        // Sanity check that payBackLoan() and liquidateOverdueLoan() have never been called on this loanId.\\n        // Depending on how the rest of the code turns out, this check may be unnecessary.\\n        // solhint-disable-next-line custom-errors\\n        require(!ILoanBase(address(this)).loanRepaidOrLiquidated(_loanId), \\\"Loan already repaid/liquidated\\\");\\n        // Fetch loan details from storage, but store them in memory for the sake of saving gas.\\n\\n        LoanData.LoanTerms memory lt = ILoanBase(address(this)).getLoanTerms(_loanId);\\n        // When a loan exceeds the loan term, it is expired. At this stage the Lender can call Liquidate Loan to resolve\\n        // the loan.\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= (uint256(lt.loanStartTime) + uint256(lt.loanDuration)), \\\"Loan is expired\\\");\\n    }\\n\\n    function checkLoanIdValidity(uint32 _loanId, INftfiHub _hub) public view {\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            ILoanCoordinator(_hub.getContract(ILoanBase(address(this)).LOAN_COORDINATOR())).isValidLoanId(\\n                _loanId,\\n                address(this)\\n            ),\\n            \\\"invalid loanId\\\"\\n        );\\n    }\\n\\n    /**\\n     * @dev Performs some validation checks before trying to renegotiate a loan.\\n     * Needed to avoid stack too deep.\\n     *\\n     * @param _loan - The main Loan Terms struct.\\n     * @param _loanId - The unique identifier for the loan to be renegotiated\\n     * @param _newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param _newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param _lenderNonce - The nonce referred to here is not the same as an Ethereum account's nonce. We are\\n     * referring instead to nonces that are used by both the lender and the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @return Borrower and Lender addresses\\n     */\\n    function renegotiationChecks(\\n        LoanData.LoanTerms memory _loan,\\n        uint32 _loanId,\\n        uint32 _newLoanDuration,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _lenderNonce,\\n        INftfiHub _hub\\n    ) external view returns (address, address) {\\n        checkLoanIdValidity(_loanId, _hub);\\n        ILoanCoordinator loanCoordinator = ILoanCoordinator(\\n            _hub.getContract(ILoanBase(address(this)).LOAN_COORDINATOR())\\n        );\\n        uint256 smartNftId = loanCoordinator.getLoanData(_loanId).smartNftId;\\n\\n        address borrower;\\n\\n        if (_loan.borrower != address(0)) {\\n            borrower = _loan.borrower;\\n        } else {\\n            borrower = IERC721(loanCoordinator.obligationReceiptToken()).ownerOf(smartNftId);\\n        }\\n\\n        // solhint-disable-next-line custom-errors\\n        require(msg.sender == borrower, \\\"Only borrower can initiate\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= (uint256(_loan.loanStartTime) + _newLoanDuration), \\\"New duration already expired\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            uint256(_newLoanDuration) <= ILoanBase(address(this)).maximumLoanDuration(),\\n            \\\"New duration exceeds maximum loan duration\\\"\\n        );\\n        // solhint-disable-next-line custom-errors\\n        require(!ILoanBase(address(this)).loanRepaidOrLiquidated(_loanId), \\\"Loan already repaid/liquidated\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            _newMaximumRepaymentAmount >= _loan.loanPrincipalAmount,\\n            \\\"Negative interest rate loans are not allowed.\\\"\\n        );\\n\\n        // Fetch current owner of loan promissory note.\\n\\n        address lender;\\n        if (_loan.lender != address(0)) {\\n            lender = _loan.lender;\\n        } else {\\n            lender = IERC721(loanCoordinator.promissoryNoteToken()).ownerOf(smartNftId);\\n        }\\n\\n        // solhint-disable-next-line custom-errors\\n        require(\\n            !ILoanBase(address(this)).getWhetherRenegotiationNonceHasBeenUsedForUser(lender, _lenderNonce),\\n            \\\"Lender nonce invalid\\\"\\n        );\\n\\n        return (borrower, lender);\\n    }\\n\\n    /**\\n     * @notice A convenience function computing the adminFee taken from a specified quantity of interest.\\n     *\\n     * @param _interestDue - The amount of interest due, measured in the smallest quantity of the ERC20 currency being\\n     * used to pay the interest.\\n     * @param _adminFeeInBasisPoints - The percent (measured in basis points) of the interest earned that will be taken\\n     * as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an\\n     * attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest\\n     * earned.\\n     *\\n     * @return The quantity of ERC20 currency (measured in smalled units of that ERC20 currency) that is due as an admin\\n     * fee.\\n     */\\n    function computeAdminFee(uint256 _interestDue, uint256 _adminFeeInBasisPoints) external pure returns (uint256) {\\n        return (_interestDue * _adminFeeInBasisPoints) / HUNDRED_PERCENT;\\n    }\\n}\\n\",\"keccak256\":\"0x06a60c1d336793407881d1aca891b4e49226f6e9a311c70c244b80e36e3d448a\",\"license\":\"BUSL-1.1\"},\"contracts/loans/loanTypes/LoanData.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title  LoanData\\n * @author NFTfi\\n * @notice An interface containg the main Loan struct shared by Direct Loans types.\\n */\\ninterface LoanData {\\n    /* ********** */\\n    /* DATA TYPES */\\n    /* ********** */\\n\\n    /**\\n     * @notice The main Loan Terms struct. This data is saved upon loan creation.\\n     *\\n     * @param loanERC20Denomination - The address of the ERC20 contract of the currency being used as principal/interest\\n     * for this loan.\\n     * @param loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param maximumRepaymentAmount - The maximum amount of money that the borrower would be required to retrieve their\\n     * collateral, measured in the smallest units of the ERC20 currency used for the loan.\\n     * @param nftCollateralContract - The address of the the NFT collateral contract.\\n     * @param nftCollateralWrapper - The NFTfi wrapper of the NFT collateral contract.\\n     * @param nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param loanStartTime - The block.timestamp when the loan first began (measured in seconds).\\n     * @param loanDuration - The amount of time (measured in seconds) that can elapse before the lender can liquidate\\n     * the loan and seize the underlying collateral NFT.\\n     * @param loanAdminFee - The percent (measured in basis points) of the interest earned that will be\\n     * taken as a fee by the contract admins when the loan is repaid. The fee is stored in the loan struct to prevent an\\n     * attack where the contract admins could adjust the fee right before a loan is repaid, and take all of the interest\\n     * earned.\\n     * @param originationFee - The amount of tokens which will stay in lender's wallet as origination fee\\n     * @param borrower\\n     * @param lender\\n     * @param escrow - address of the escrow contract the collateral is stored in\\n     * @param isProRata - indicates if a loan is pro-rata or not\\n     */\\n\\n    struct LoanTerms {\\n        uint256 loanPrincipalAmount;\\n        uint256 maximumRepaymentAmount;\\n        uint256 nftCollateralId;\\n        address loanERC20Denomination;\\n        uint32 loanDuration;\\n        uint16 loanInterestRateForDurationInBasisPoints;\\n        uint16 loanAdminFeeInBasisPoints;\\n        uint256 originationFee;\\n        address nftCollateralWrapper;\\n        uint64 loanStartTime;\\n        address nftCollateralContract;\\n        address borrower;\\n        address lender;\\n        address escrow;\\n        bool isProRata;\\n    }\\n\\n    /**\\n     * @notice The offer made by the lender. Used as parameter on both acceptOffer (initiated by the borrower)\\n     *\\n     * @param loanERC20Denomination - The address of the ERC20 contract of the currency being used as principal/interest\\n     * for this loan.\\n     * @param loanPrincipalAmount - The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * @param maximumRepaymentAmount - The maximum amount of money that the borrower would be required to retrieve their\\n     * collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always\\n     * have to pay this amount to retrieve their collateral, regardless of whether they repay early.\\n     * @param nftCollateralContract - The address of the ERC721 contract of the NFT collateral.\\n     * @param nftCollateralId - The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * @param loanDuration - The amount of time (measured in seconds) that can elapse before the lender can liquidate\\n     * the loan and seize the underlying collateral NFT.\\n     * @param isProRata - indicates if a loan is pro-rata or not\\n     * @param originationFee - amount which will stay in lender's wallet\\n     */\\n    struct Offer {\\n        uint256 loanPrincipalAmount;\\n        uint256 maximumRepaymentAmount;\\n        uint256 nftCollateralId;\\n        address nftCollateralContract;\\n        uint32 loanDuration;\\n        address loanERC20Denomination;\\n        bool isProRata;\\n        uint256 originationFee;\\n    }\\n\\n    /**\\n     * @notice Signature related params. Used as parameter on both acceptOffer (containing borrower signature)\\n     *\\n     * @param signer - The address of the signer. The borrower for `acceptOffer`\\n     * @param nonce - The nonce referred here is not the same as an Ethereum account's nonce.\\n     * We are referring instead to a nonce that is used by the lender or the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonce can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per\\u00a0user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * @param expiry - Date when the signature expires\\n     * @param signature - The ECDSA signature of the borrower or the lender, obtained off-chain ahead of time, signing\\n     * the following combination of parameters:\\n     * - Lender:\\n     *   - Offer.loanERC20Denomination\\n     *   - Offer.loanPrincipalAmount\\n     *   - Offer.maximumRepaymentAmount\\n     *   - Offer.nftCollateralContract\\n     *   - Offer.nftCollateralId\\n     *   - Offer.loanDuration\\n     *   - Offer.isProRata\\n     *   - Signature.signer,\\n     *   - Signature.nonce,\\n     *   - Signature.expiry,\\n     *   - address of the loan type contract\\n     *   - chainId\\n     */\\n    struct Signature {\\n        uint256 nonce;\\n        uint256 expiry;\\n        address signer;\\n        bytes signature;\\n    }\\n\\n    /**\\n     * inclusive min and max Id ranges for collection offers on collections,\\n     * like ArtBlocks, where multiple collections are defined on one contract differentiated by id-ranges\\n     */\\n    struct CollectionIdRange {\\n        uint256 minId;\\n        uint256 maxId;\\n    }\\n}\\n\",\"keccak256\":\"0x9c67fc99d5c6c4adbab438823a798c7751c6421470a5f11744f0630effb32145\",\"license\":\"BUSL-1.1\"},\"contracts/smartNft/SmartNft.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {ERC721} from \\\"@openzeppelin/contracts/token/ERC721/ERC721.sol\\\";\\nimport {AccessControl} from \\\"@openzeppelin/contracts/access/AccessControl.sol\\\";\\nimport {Address} from \\\"@openzeppelin/contracts/utils/Address.sol\\\";\\nimport {Strings} from \\\"@openzeppelin/contracts/utils/Strings.sol\\\";\\n\\nimport {INftfiHub} from \\\"../interfaces/INftfiHub.sol\\\";\\n\\n/**\\n * @title SmartNft\\n * @author NFTfi\\n * @dev An ERC721 token which represents a very basic implementation of the NFTfi V2 SmartNFT.\\n */\\ncontract SmartNft is ERC721, AccessControl {\\n    using Address for address;\\n    using Strings for uint256;\\n\\n    /**\\n     * @dev This struct contains data needed to find the loan linked to a SmartNft.\\n     */\\n    struct Loan {\\n        address loanCoordinator;\\n        uint256 loanId;\\n    }\\n\\n    /* ******* */\\n    /* STORAGE */\\n    /* ******* */\\n\\n    bytes32 public constant LOAN_COORDINATOR_ROLE = keccak256(\\\"LOAN_COORDINATOR_ROLE\\\");\\n    bytes32 public constant BASE_URI_ROLE = keccak256(\\\"BASE_URI_ROLE\\\");\\n\\n    // solhint-disable-next-line immutable-vars-naming\\n    INftfiHub public immutable hub;\\n\\n    // smartNftId => Loan\\n    mapping(uint256 => Loan) public loans;\\n\\n    string public baseURI;\\n\\n    /**\\n     * @dev Grants the contract the default admin role to `_admin`.\\n     * Grants LOAN_COORDINATOR_ROLE to `_loanCoordinator`.\\n     *\\n     * @param _admin - Account to set as the admin of roles\\n     * @param _nftfiHub - Address of the NftfiHub contract\\n     * @param _loanCoordinator - Initial loan coordinator\\n     * @param _name - Name for the SmarNFT\\n     * @param _symbol - Symbol for the SmarNFT\\n     * @param _customBaseURI - Base URI for the SmarNFT\\n     */\\n    constructor(\\n        address _admin,\\n        address _nftfiHub,\\n        address _loanCoordinator,\\n        string memory _name,\\n        string memory _symbol,\\n        string memory _customBaseURI\\n    ) ERC721(_name, _symbol) {\\n        _setupRole(DEFAULT_ADMIN_ROLE, _admin);\\n        _setupRole(BASE_URI_ROLE, _admin);\\n        _setupRole(LOAN_COORDINATOR_ROLE, _loanCoordinator);\\n        _setBaseURI(_customBaseURI);\\n        hub = INftfiHub(_nftfiHub);\\n    }\\n\\n    /**\\n     * @dev Grants LOAN_COORDINATOR_ROLE to `_account`.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have ``role``'s admin role.\\n     */\\n    function setLoanCoordinator(address _account) external {\\n        grantRole(LOAN_COORDINATOR_ROLE, _account);\\n    }\\n\\n    /**\\n     * @dev Mints a new token with `_tokenId` and assigne to `_to`.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have `LOAN_COORDINATOR_ROLE` role.\\n     *\\n     * @param _to The address reciving the SmartNft\\n     * @param _tokenId The id of the new SmartNft\\n     * @param _data Up to the first 32 bytes contains an integer which represents the loanId linked to the SmartNft\\n     */\\n    function mint(address _to, uint256 _tokenId, bytes calldata _data) external onlyRole(LOAN_COORDINATOR_ROLE) {\\n        // solhint-disable-next-line custom-errors\\n        require(_data.length > 0, \\\"data must contain loanId\\\");\\n        uint256 loanId = abi.decode(_data, (uint256));\\n        loans[_tokenId] = Loan({loanCoordinator: msg.sender, loanId: loanId});\\n        _safeMint(_to, _tokenId, _data);\\n    }\\n\\n    /**\\n     * @dev Burns `_tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - the caller must have `LOAN_COORDINATOR_ROLE` role.\\n     */\\n    function burn(uint256 _tokenId) external onlyRole(LOAN_COORDINATOR_ROLE) {\\n        _burn(_tokenId);\\n    }\\n\\n    /**\\n     * @dev Sets baseURI.\\n     * @param _customBaseURI - Base URI for the SmarNFT\\n     */\\n    function setBaseURI(string memory _customBaseURI) external onlyRole(BASE_URI_ROLE) {\\n        _setBaseURI(_customBaseURI);\\n    }\\n\\n    function exists(uint256 _tokenId) external view returns (bool) {\\n        return _exists(_tokenId);\\n    }\\n\\n    /**\\n     * @dev See {IERC165-supportsInterface}.\\n     */\\n    function supportsInterface(bytes4 _interfaceId) public view virtual override(ERC721, AccessControl) returns (bool) {\\n        return super.supportsInterface(_interfaceId);\\n    }\\n\\n    /**\\n     * @dev Sets baseURI.\\n     */\\n    function _setBaseURI(string memory _customBaseURI) internal virtual {\\n        baseURI = bytes(_customBaseURI).length > 0\\n            ? string(abi.encodePacked(_customBaseURI, _getChainID().toString(), \\\"/\\\"))\\n            : \\\"\\\";\\n    }\\n\\n    /** @dev Base URI for computing {tokenURI}. If set, the resulting URI for each\\n     * token will be the concatenation of the `baseURI` and the `tokenId`.\\n     */\\n    function _baseURI() internal view virtual override returns (string memory) {\\n        return baseURI;\\n    }\\n\\n    /**\\n     * @dev This function gets the current chain ID.\\n     */\\n    function _getChainID() internal view returns (uint256) {\\n        uint256 id;\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            id := chainid()\\n        }\\n        return id;\\n    }\\n}\\n\",\"keccak256\":\"0x7753f4958529eace66b519f0c7691253d7f530173af1c7c55ebaf8edb5f90479\",\"license\":\"BUSL-1.1\"},\"contracts/utils/ContractKeyUtils.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title ContractKeyUtils\\n * @author NFTfi\\n * @dev Common library for contract key utils\\n */\\nlibrary ContractKeyUtils {\\n    /**\\n     * @notice Returns the bytes32 representation of a string\\n     * @param _key the string key\\n     * @return id bytes32 representation\\n     */\\n    function getIdFromStringKey(string memory _key) public pure returns (bytes32 id) {\\n        // solhint-disable-next-line custom-errors\\n        require(bytes(_key).length <= 32, \\\"invalid key\\\");\\n\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            id := mload(add(_key, 32))\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x132d85863f84cf1aa7061ea3ef35a6eafdcc56c6be22efe4370d98939e3cd744\",\"license\":\"BUSL-1.1\"},\"contracts/utils/ContractKeys.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\n/**\\n * @title ContractKeys\\n * @author NFTfi\\n * @dev Common library for contract keys\\n */\\nlibrary ContractKeys {\\n    bytes32 public constant PERMITTED_ERC20S = bytes32(\\\"PERMITTED_ERC20S\\\");\\n    bytes32 public constant PERMITTED_NFTS = bytes32(\\\"PERMITTED_NFTS\\\");\\n    bytes32 public constant NFT_TYPE_REGISTRY = bytes32(\\\"NFT_TYPE_REGISTRY\\\");\\n    bytes32 public constant LOAN_COORDINATOR = bytes32(\\\"LOAN_COORDINATOR\\\");\\n    bytes32 public constant PERMITTED_SNFT_RECEIVER = bytes32(\\\"PERMITTED_SNFT_RECEIVER\\\");\\n    bytes32 public constant ESCROW = bytes32(\\\"ESCROW\\\");\\n    bytes32 public constant ERC20_TRANSFER_MANAGER = bytes32(\\\"ERC20_TRANSFER_MANAGER\\\");\\n    bytes32 public constant PERSONAL_ESCROW_FACTORY = bytes32(\\\"PERSONAL_ESCROW_FACTORY\\\");\\n    bytes32 public constant DELEGATE_PLUGIN = bytes32(\\\"DELEGATE_PLUGIN\\\");\\n}\\n\",\"keccak256\":\"0xf1902acf71f608772e0c4139a16701b2643c6f5314ad07bb622f09616e02e4eb\",\"license\":\"BUSL-1.1\"},\"contracts/utils/NFTfiSigningUtils.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {LoanData} from \\\"../loans/loanTypes/LoanData.sol\\\";\\nimport {SignatureChecker, ECDSA} from \\\"@openzeppelin/contracts/utils/cryptography/SignatureChecker.sol\\\";\\n\\n/**\\n * @title  NFTfiSigningUtils\\n * @author NFTfi\\n * @notice Helper contract for NFTfi. This contract manages verifying signatures from off-chain NFTfi orders.\\n * Based on the version of this same contract used on NFTfi V1\\n */\\nlibrary NFTfiSigningUtils {\\n    /* ********* */\\n    /* FUNCTIONS */\\n    /* ********* */\\n\\n    /**\\n     * @dev This function gets the current chain ID.\\n     */\\n    function getChainID() internal view returns (uint256) {\\n        uint256 id;\\n        // solhint-disable-next-line no-inline-assembly\\n        assembly {\\n            id := chainid()\\n        }\\n        return id;\\n    }\\n\\n    /**\\n     * @notice This function is when the borrower accepts a lender's offer, to validate the lender's signature that the\\n     * lender provided off-chain to verify that it did indeed made such offer.\\n     *\\n     * @param _offer - The offer struct containing:\\n     * - loanERC20Denomination: The address of the ERC20 contract of the currency being used as principal/interest\\n     * for this loan.\\n     * - loanPrincipalAmount: The original sum of money transferred from lender to borrower at the beginning of\\n     * the loan, measured in loanERC20Denomination's smallest units.\\n     * - maximumRepaymentAmount: The maximum amount of money that the borrower would be required to retrieve their\\n     * collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have\\n     * to pay this amount to retrieve their collateral, regardless of whether they repay early.\\n     * - nftCollateralContract: The address of the ERC721 contract of the NFT collateral.\\n     * - nftCollateralId: The ID within the NFTCollateralContract for the NFT being used as collateral for this\\n     * loan. The NFT is stored within this contract during the duration of the loan.\\n     * - loanDuration: The amount of time (measured in seconds) that can elapse before the lender can liquidate the\\n     * loan and seize the underlying collateral NFT.\\n     * - loanInterestRateForDurationInBasisPoints: This is the interest rate (measured in basis points, e.g.\\n     * hundreths of a percent) for the loan, that must be repaid pro-rata by the borrower at the conclusion of the loan\\n     * or risk seizure of their nft collateral. Note if the type of the loan is fixed then this value  is not used and\\n     * is irrelevant so it should be set to 0.\\n     * - isProRata: indicates if a loan is pro-rated or fixed\\n     * @param _signature - The signature structure containing:\\n     * - signer: The address of the signer. The borrower for `acceptOffer`\\n     * - nonce: The nonce referred here is not the same as an Ethereum account's nonce.\\n     * We are referring instead to a nonce that is used by the lender or the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonce can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per\\u00a0user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     *   - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     *   - Second, it allows a user to cancel an off-chain order by calling\\n     * NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from\\n     * using the user's off-chain order that contains that nonce.\\n     * - expiry: Date when the signature expires\\n     * - signature: The ECDSA signature of the lender, obtained off-chain ahead of time, signing the following\\n     * @param _offerType type of the offer registered in the coordinator\\n     * combination of parameters:\\n     *   - offer.loanERC20Denomination\\n     *   - offer.loanPrincipalAmount\\n     *   - offer.maximumRepaymentAmount\\n     *   - offer.nftCollateralContract\\n     *   - offer.nftCollateralId\\n     *   - offer.loanDuration\\n     *   - offer.isProRata\\n     *   - signature.signer,\\n     *   - signature.nonce,\\n     *   - signature.expiry,\\n     *   - _offerType\\n     *   - chainId\\n     */\\n    function isValidLenderSignature(\\n        LoanData.Offer memory _offer,\\n        LoanData.Signature memory _signature,\\n        bytes32 _offerType\\n    ) public view returns (bool) {\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= _signature.expiry, \\\"Lender Signature has expired\\\");\\n        if (_signature.signer == address(0)) {\\n            return false;\\n        } else {\\n            bytes32 message = keccak256(\\n                abi.encodePacked(getEncodedOffer(_offer), getEncodedSignature(_signature), _offerType, getChainID())\\n            );\\n\\n            return\\n                SignatureChecker.isValidSignatureNow(\\n                    _signature.signer,\\n                    ECDSA.toEthSignedMessageHash(message),\\n                    _signature.signature\\n                );\\n        }\\n    }\\n\\n    /**\\n     * @notice This function is called in renegotiateLoan() to validate the lender's signature that the lender provided\\n     * off-chain to verify that they did indeed want to agree to this loan renegotiation according to these terms.\\n     *\\n     * @param _loanId - The unique identifier for the loan to be renegotiated\\n     * @param _newLoanDuration - The new amount of time (measured in seconds) that can elapse before the lender can\\n     * liquidate the loan and seize the underlying collateral NFT.\\n     * @param _isProRata - indicates if loan is pro-rata or fixed\\n     * @param _newMaximumRepaymentAmount - The new maximum amount of money that the borrower would be required to\\n     * retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The\\n     * borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay\\n     * early.\\n     * @param _renegotiationFee Agreed upon fee in ether that borrower pays for the lender for the renegitiation\\n     * @param _signature - The signature structure containing:\\n     * - signer: The address of the signer. The borrower for `acceptOffer`\\n     * - nonce: The nonce referred here is not the same as an Ethereum account's nonce.\\n     * We are referring instead to a nonce that is used by the lender or the borrower when they are first signing\\n     * off-chain NFTfi orders. These nonce can be any uint256 value that the user has not previously used to sign an\\n     * off-chain order. Each nonce can be used at most once per\\u00a0user within NFTfi, regardless of whether they are the\\n     * lender or the borrower in that situation. This serves two purposes:\\n     * - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once.\\n     * - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment()\\n     * , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains\\n     * that nonce.\\n     * - expiry - The date when the renegotiation offer expires\\n     * - lenderSignature - The ECDSA signature of the lender, obtained off-chain ahead of time, signing the\\n     * following combination of parameters:\\n     * - _loanId\\n     * - _newLoanDuration\\n     * - _isProRata\\n     * - _newMaximumRepaymentAmount\\n     * - _lender\\n     * - _lenderNonce\\n     * - _expiry\\n     * - address of this contract\\n     * - chainId\\n     */\\n    function isValidLenderRenegotiationSignature(\\n        uint256 _loanId,\\n        uint32 _newLoanDuration,\\n        bool _isProRata,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _renegotiationFee,\\n        LoanData.Signature memory _signature\\n    ) external view returns (bool) {\\n        return\\n            isValidLenderRenegotiationSignature(\\n                _loanId,\\n                _newLoanDuration,\\n                _isProRata,\\n                _newMaximumRepaymentAmount,\\n                _renegotiationFee,\\n                _signature,\\n                address(this)\\n            );\\n    }\\n\\n    /**\\n     * @dev This function overload the previous function to allow the caller to specify the address of the contract\\n     *\\n     */\\n    function isValidLenderRenegotiationSignature(\\n        uint256 _loanId,\\n        uint32 _newLoanDuration,\\n        bool _isProRata,\\n        uint256 _newMaximumRepaymentAmount,\\n        uint256 _renegotiationFee,\\n        LoanData.Signature memory _signature,\\n        address _loanContract\\n    ) public view returns (bool) {\\n        // solhint-disable-next-line custom-errors\\n        require(block.timestamp <= _signature.expiry, \\\"Renegotiation Signature expired\\\");\\n        // solhint-disable-next-line custom-errors\\n        require(_loanContract != address(0), \\\"Loan is zero address\\\");\\n        if (_signature.signer == address(0)) {\\n            return false;\\n        } else {\\n            bytes32 message = keccak256(\\n                abi.encodePacked(\\n                    _loanId,\\n                    _newLoanDuration,\\n                    _isProRata,\\n                    _newMaximumRepaymentAmount,\\n                    _renegotiationFee,\\n                    getEncodedSignature(_signature),\\n                    _loanContract,\\n                    getChainID()\\n                )\\n            );\\n\\n            return\\n                SignatureChecker.isValidSignatureNow(\\n                    _signature.signer,\\n                    ECDSA.toEthSignedMessageHash(message),\\n                    _signature.signature\\n                );\\n        }\\n    }\\n\\n    /**\\n     * @dev We need this to avoid stack too deep errors.\\n     */\\n    function getEncodedOffer(LoanData.Offer memory _offer) internal pure returns (bytes memory) {\\n        return\\n            abi.encodePacked(\\n                _offer.loanERC20Denomination,\\n                _offer.loanPrincipalAmount,\\n                _offer.maximumRepaymentAmount,\\n                _offer.nftCollateralContract,\\n                _offer.nftCollateralId,\\n                _offer.loanDuration,\\n                _offer.isProRata,\\n                _offer.originationFee\\n            );\\n    }\\n\\n    /**\\n     * @dev We need this to avoid stack too deep errors.\\n     */\\n    function getEncodedSignature(LoanData.Signature memory _signature) internal pure returns (bytes memory) {\\n        return abi.encodePacked(_signature.signer, _signature.nonce, _signature.expiry);\\n    }\\n}\\n\",\"keccak256\":\"0x7a6c1326a117139579747d4e7abc947f0cf8f12dd05ec0d1d04930334efb1fca\",\"license\":\"BUSL-1.1\"},\"contracts/utils/NftReceiver.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\npragma solidity 0.8.19;\\n\\nimport {IERC1155Receiver, IERC165} from \\\"@openzeppelin/contracts/token/ERC1155/IERC1155Receiver.sol\\\";\\nimport {ERC721Holder, IERC721Receiver} from \\\"@openzeppelin/contracts/token/ERC721/utils/ERC721Holder.sol\\\";\\n\\n/**\\n * @title NftReceiver\\n * @author NFTfi\\n * @dev Base contract with capabilities for receiving ERC1155 and ERC721 tokens\\n */\\nabstract contract NftReceiver is IERC1155Receiver, ERC721Holder {\\n    /**\\n     *  @dev Handles the receipt of a single ERC1155 token type. This function is called at the end of a\\n     * `safeTransferFrom` after the balance has been updated.\\n     * @return `bytes4(keccak256(\\\"onERC1155Received(address,address,uint256,uint256,bytes)\\\"))` if allowed\\n     */\\n    function onERC1155Received(\\n        address,\\n        address,\\n        uint256,\\n        uint256,\\n        bytes calldata\\n    ) external virtual override returns (bytes4) {\\n        return this.onERC1155Received.selector;\\n    }\\n\\n    /**\\n     *  @dev Handles the receipt of a multiple ERC1155 token types. This function is called at the end of a\\n     * `safeBatchTransferFrom` after the balances have been updated.\\n     *  @return `bytes4(keccak256(\\\"onERC1155BatchReceived(address,address,uint256[],uint256[],bytes)\\\"))` if allowed\\n     */\\n    function onERC1155BatchReceived(\\n        address,\\n        address,\\n        uint256[] calldata,\\n        uint256[] calldata,\\n        bytes calldata\\n    ) external virtual override returns (bytes4) {\\n        // solhint-disable-next-line custom-errors\\n        revert(\\\"ERC1155 batch not supported\\\");\\n    }\\n\\n    /**\\n     * @dev Checks whether this contract implements the interface defined by `interfaceId`.\\n     * @param _interfaceId Id of the interface\\n     * @return true if this contract implements the interface\\n     */\\n    function supportsInterface(bytes4 _interfaceId) public view virtual override returns (bool) {\\n        return\\n            _interfaceId == type(IERC1155Receiver).interfaceId ||\\n            _interfaceId == type(IERC721Receiver).interfaceId ||\\n            _interfaceId == type(IERC165).interfaceId;\\n    }\\n}\\n\",\"keccak256\":\"0x95fc127460e3df3c8be279f2aa44050b5a4ff7ca2a151f36e95ee687c5daf979\",\"license\":\"BUSL-1.1\"},\"contracts/utils/Ownable.sol\":{\"content\":\"// SPDX-License-Identifier: BUSL-1.1\\n\\npragma solidity 0.8.19;\\n\\nimport {Context} from \\\"@openzeppelin/contracts/utils/Context.sol\\\";\\n\\n/**\\n * @dev Contract module which provides a basic access control mechanism, where\\n * there is an account (an owner) that can be granted exclusive access to\\n * specific functions.\\n *\\n * By default, the owner account will be the one that deploys the contract. This\\n * can later be changed with {transferOwnership}.\\n *\\n * This module is used through inheritance. It will make available the modifier\\n * `onlyOwner`, which can be applied to your functions to restrict their use to\\n * the owner.\\n *\\n * Modified version from openzeppelin/contracts/access/Ownable.sol that allows to\\n * initialize the owner using a parameter in the constructor\\n */\\nabstract contract Ownable is Context {\\n    address private _owner;\\n\\n    address private _ownerCandidate;\\n\\n    event OwnershipTransferred(address indexed previousOwner, address indexed newOwner);\\n\\n    /**\\n     * @dev Throws if called by any account other than the owner.\\n     */\\n    modifier onlyOwner() {\\n        // solhint-disable-next-line custom-errors\\n        require(owner() == _msgSender(), \\\"Ownable: caller is not the owner\\\");\\n        _;\\n    }\\n\\n    /**\\n     * @dev Initializes the contract setting the deployer as the initial owner.\\n     */\\n    constructor(address _initialOwner) {\\n        _setOwner(_initialOwner);\\n    }\\n\\n    /**\\n     * @dev Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`).\\n     * Can only be called by the current owner.\\n     */\\n    function requestTransferOwnership(address _newOwnerCandidate) public virtual onlyOwner {\\n        // solhint-disable-next-line custom-errors\\n        require(_newOwnerCandidate != address(0), \\\"Ownable: new owner is the zero address\\\");\\n        _ownerCandidate = _newOwnerCandidate;\\n    }\\n\\n    function acceptTransferOwnership() public virtual {\\n        // solhint-disable-next-line custom-errors\\n        require(_ownerCandidate == _msgSender(), \\\"Ownable: not owner candidate\\\");\\n        _setOwner(_ownerCandidate);\\n        delete _ownerCandidate;\\n    }\\n\\n    function cancelTransferOwnership() public virtual onlyOwner {\\n        delete _ownerCandidate;\\n    }\\n\\n    function rejectTransferOwnership() public virtual {\\n        // solhint-disable-next-line custom-errors\\n        require(_ownerCandidate == _msgSender(), \\\"Ownable: not owner candidate\\\");\\n        delete _ownerCandidate;\\n    }\\n\\n    /**\\n     * @dev Returns the address of the current owner.\\n     */\\n    function owner() public view virtual returns (address) {\\n        return _owner;\\n    }\\n\\n    /**\\n     * @dev Sets the owner.\\n     */\\n    function _setOwner(address _newOwner) internal {\\n        address oldOwner = _owner;\\n        _owner = _newOwner;\\n        emit OwnershipTransferred(oldOwner, _newOwner);\\n    }\\n}\\n\",\"keccak256\":\"0x4f1dc29ae64fcd354c09865ae56d8a3612541ebfc9db9b87b7af6f18ca36cf65\",\"license\":\"BUSL-1.1\"}},\"version\":1}",
  "bytecode": "0x60c0604052630784ce006003556004805461ffff19166101f41790553480156200002857600080fd5b5060405162005735380380620057358339810160408190526200004b916200027f565b60405163f99a8ffb60e01b815260206004820152601060248201526f2627a0a72fa1a7a7a92224a720aa27a960811b604482015283908390732ffF031e525a20fcF8944aC7Cf3Bdcc3b19a6D779063f99a8ffb90606401602060405180830381865af4158015620000c0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190620000e6919062000379565b838380620000f48162000175565b50506001805460ff60a01b191681556002556001600160a01b03831660a052608082905260005b81518110156200016757620001548282815181106200013e576200013e62000393565b60200260200101516001620001c560201b60201c565b6200015f81620003a9565b90506200011b565b5050505050505050620003d1565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b6001600160a01b038216620001ed57604051636e8ab17b60e11b815260040160405180910390fd5b6001600160a01b038216600081815260086020908152604091829020805460ff191685151590811790915591519182527ff100355be652ecc881568750e6a98c0713e4316f75d5314ebc9039e0acb52f24910160405180910390a25050565b80516001600160a01b03811681146200026457600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b6000806000606084860312156200029557600080fd5b620002a0846200024c565b92506020620002b18186016200024c565b60408601519093506001600160401b0380821115620002cf57600080fd5b818701915087601f830112620002e457600080fd5b815181811115620002f957620002f962000269565b8060051b604051601f19603f8301168101818110858211171562000321576200032162000269565b60405291825284820192508381018501918a8311156200034057600080fd5b938501935b82851015620003695762000359856200024c565b8452938501939285019262000345565b8096505050505050509250925092565b6000602082840312156200038c57600080fd5b5051919050565b634e487b7160e01b600052603260045260246000fd5b600060018201620003ca57634e487b7160e01b600052601160045260246000fd5b5060010190565b60805160a051615265620004d060003960008181610481015281816107a60152818161093101528181610a9d01528181610bc201528181610dc701528181610ebe0152818161166f01528181611a0701528181611b3101528181611c8601528181611eee01528181612321015281816126270152818161284401528181612a9201528181612f0901528181613368015281816135d20152818161383d01528181613aaa01528181613ccb01528181613fe601528181614273015261453c0152600081816105290152818161090801528181611b0801528181611ec501528181612ee00152818161381701528181613fbd015261424001526152656000f3fe608060405234801561001057600080fd5b506004361061020b5760003560e01c80636ed93dd01161012a57806392fede00116100bd578063ad9d4f641161008c578063bce42e4211610071578063bce42e4214610620578063e7b0292914610633578063eda928ab1461066c57600080fd5b8063ad9d4f64146105fa578063b31ec1d41461060d57600080fd5b806392fede00146105be5780639d6fa618146105c6578063a4441a6f146105d9578063ab3b1280146105e757600080fd5b80637b371107116100f95780637b371107146105715780638456cb5914610579578063872873be146105815780638da5cb5b146105ad57600080fd5b80636ed93dd01461050857806377cfa991146105245780637836baf11461054b57806379b640401461055e57600080fd5b80632b218022116101a257806347948d921161017157806347948d92146104b357806353857cc3146104c65780635c975abb146104ee5780635f992fdd1461050057600080fd5b80632b21802214610469578063365a86fc1461047c5780633df4c0c4146104a35780633f4ba83a146104ab57600080fd5b806318585b6b116101de57806318585b6b14610401578063192b355d1461042c5780631a861ad4146104435780631c6caf411461045657600080fd5b80630316abd2146102105780630717f3aa146103a65780630a76e196146103d9578063110bc820146103ee575b600080fd5b61039061021e3660046146f9565b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c08101919091525063ffffffff90811660009081526005602081815260409283902083516101e0810185528154815260018201549281019290925260028101549382019390935260038301546001600160a01b038082166060840152600160a01b8083049096166080840152600160c01b820461ffff90811660a0850152600160d01b90920490911660c0830152600484015460e08301529183015480831661010083015284900467ffffffffffffffff166101208201526006830154821661014082015260078301548216610160820152600883015482166101808201526009909201549081166101a08301529190910460ff1615156101c082015290565b60405161039d9190614716565b60405180910390f35b6103c96103b43660046146f9565b60066020526000908152604090205460ff1681565b604051901515815260200161039d565b6103ec6103e7366004614910565b61067f565b005b6103ec6103fc3660046146f9565b610896565b61041461040f366004614990565b610a5b565b6040516001600160a01b03909116815260200161039d565b61043560035481565b60405190815260200161039d565b6103ec6104513660046149ad565b610c3c565b6103ec6104643660046149c6565b610cb7565b6103ec6104773660046146f9565b610d9c565b6104147f000000000000000000000000000000000000000000000000000000000000000081565b610414610e8d565b6103ec610f36565b6103ec6104c13660046149ad565b610f9a565b6104d96104d4366004614ab2565b611067565b60405163ffffffff909116815260200161039d565b600154600160a01b900460ff166103c9565b6103ec6110c9565b61051161271081565b60405161ffff909116815260200161039d565b6104357f000000000000000000000000000000000000000000000000000000000000000081565b6103ec610559366004614b7a565b611135565b6103ec61056c366004614c4b565b61119d565b6103ec61128f565b6103ec6112fe565b6103c961058f366004614990565b6001600160a01b031660009081526008602052604090205460ff1690565b6000546001600160a01b0316610414565b6103ec611360565b6103ec6105d4366004614990565b6113ba565b6004546105119061ffff1681565b6104356105f53660046146f9565b6114b2565b6103ec610608366004614d03565b6115f7565b6103ec61061b3660046146f9565b61162b565b6103ec61062e3660046146f9565b611892565b6103c9610641366004614d9f565b6001600160a01b03919091166000908152600760209081526040808320938352929052205460ff1690565b6103ec61067a3660046146f9565b611c5b565b6000546001600160a01b031633146106de5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6040517ff99a8ffb000000000000000000000000000000000000000000000000000000008152600090732ffF031e525a20fcF8944aC7Cf3Bdcc3b19a6D779063f99a8ffb90610731908890600401614e1b565b602060405180830381865af415801561074e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107729190614e2e565b604051631c2d8fb360e31b81526d5045524d49545445445f4e46545360901b60048201529091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa1580156107ed573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108119190614e47565b6001600160a01b0316631a3dd0a5836040518263ffffffff1660e01b815260040161083e91815260200190565b602060405180830381865afa15801561085b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061087f9190614e47565b905061088e8186863087611d1d565b505050505050565b61089e611dde565b63ffffffff81166000908152600560205260409020600801546001600160a01b03163381146108f9576040517f28aaeab500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190614e47565b6040517ffc03091500000000000000000000000000000000000000000000000000000000815263ffffffff851660048201526001600160a01b0384811660248301529192509082169063fc03091590604401600060405180830381600087803b158015610a1057600080fd5b505af1158015610a24573d6000803e3d6000fd5b5050505063ffffffff8316600090815260056020526040902060080180546001600160a01b03191690555050600160025550565b50565b604051631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f5259000000000000000000600482015260009081906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015610ae4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b089190614e47565b6040517f827bd1450000000000000000000000000000000000000000000000000000000081526001600160a01b038581166004830152919091169063827bd14590602401602060405180830381865afa158015610b69573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b8d9190614e47565b90506001600160a01b03811615610ba45792915050565b604051631c2d8fb360e31b815265455343524f5760d01b60048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610c11573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c359190614e47565b9392505050565b33600090815260076020908152604080832084845290915290205460ff1615610c91576040517f756688fe00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b33600090815260076020908152604080832093835292905220805460ff19166001179055565b6000546001600160a01b03163314610d115760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b61271061ffff82161115610d51576040517f50012f3c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6004805461ffff191661ffff83169081179091556040519081527f03017365bbe16943b524030df07e7689168ab63e854d27417498e6f9dc584dab906020015b60405180910390a150565b610da4611dde565b60405163364d0abb60e11b815263ffffffff821660048201526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166024820152737609BaBeD95fbf29410915a0E0e74635037bf1eF90636c9a15769060440160006040518083038186803b158015610e2357600080fd5b505af4158015610e37573d6000803e3d6000fd5b50505050600080600080610e4a85611e3c565b9350935093509350610e5e858585856122d7565b6001610e6b86838361253d565b610e7585846125de565b610e7e8661280c565b5050505050610a586001600255565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610f0d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f319190614e47565b905090565b6000546001600160a01b03163314610f905760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b610f986129ba565b565b6000546001600160a01b03163314610ff45760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b63ffffffff811115611032576040517fe6f08f2000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60038190556040518181527f64f65a4a1a932867ad599da36210fc47c698b3abb2413cfdfd36bf59697a69cb90602001610d91565b6000611071612a0f565b611079611dde565b60006110888460600151612a69565b90506110948482612b8a565b61109d84612ce5565b6110b66110af85856040015184612d62565b8585612ed1565b9150506110c36001600255565b92915050565b6001546001600160a01b031633146111235760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e6469646174650000000060448201526064016106d5565b600180546001600160a01b0319169055565b6000546001600160a01b0316331461118f5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6111998282613146565b5050565b6000546001600160a01b031633146111f75760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b8051825114611232576040517f1dbe8b0000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b825181101561128a5761127a83828151811061125357611253614e64565b602002602001015183838151811061126d5761126d614e64565b6020026020010151613146565b61128381614e90565b9050611235565b505050565b6001546001600160a01b031633146112e95760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e6469646174650000000060448201526064016106d5565b600154611123906001600160a01b03166131e5565b6000546001600160a01b031633146113585760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b610f98613235565b6000546001600160a01b031633146111235760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6000546001600160a01b031633146114145760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6001600160a01b0381166114905760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f646472657373000000000000000000000000000000000000000000000000000060648201526084016106d5565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b63ffffffff818116600090815260056020818152604080842081516101e0810183528154815260018201549381019390935260028101549183019190915260038101546001600160a01b038082166060850152600160a01b8083049097166080850152600160c01b820461ffff90811660a0860152600160d01b90920490911660c0840152600482015460e08401529281015480841661010084015285900467ffffffffffffffff1661012083018190526006820154841661014084015260078201548416610160840152600882015484166101808401526009909101549283166101a08301529390910460ff1615156101c0820152909182906115b69042614ea9565b905060006115de8360000151846020015184866080015163ffffffff16876101c00151613278565b83519091506115ee908290614ebc565b95945050505050565b6115ff612a0f565b611607611dde565b61161788888888888888886132fc565b6116216001600255565b5050505050505050565b611633611dde565b6040517fb7fa1f6200000000000000000000000000000000000000000000000000000000815263ffffffff821660048201526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166024820152737609BaBeD95fbf29410915a0E0e74635037bf1eF9063b7fa1f629060440160006040518083038186803b1580156116cb57600080fd5b505af41580156116df573d6000803e3d6000fd5b5050505063ffffffff811660009081526006602052604090205460ff1615611733576040517f7b6b5a0200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008060008061174285611e3c565b93509350935093506000826080015163ffffffff1683610120015167ffffffffffffffff166117719190614ebc565b90508042116117ac576040517f8efc8ff200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b336001600160a01b038516146117ee576040517f786b308a00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60006117fb87848361253d565b6118058585613a03565b61180e8761280c565b8351604080860151610140870151825193845260208401919091529082018490524260608301526001600160a01b039081166080830152808716919088169063ffffffff8a16907f4fac0ff43299a330bce57d0579985305af580acf256a6d7977083ede81be13269060a00160405180910390a4505050505050610a586001600255565b61189a611dde565b63ffffffff81811660009081526005602081815260409283902083516101e0810185528154815260018201549281019290925260028101549382019390935260038301546001600160a01b038082166060840152600160a01b8083049096166080840152600160c01b820461ffff90811660a0850152600160d01b90920490911660c0830152600484015460e08301529183015480831661010083015284900467ffffffffffffffff1661012082015260068301548216610140820152600783015482166101608201819052600884015483166101808301526009909301549182166101a082015292900460ff1615156101c08301523381146119c9576040517f918a328e00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6119d28361280c565b604051631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f525900000000000000000060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611a56573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a7a9190614e47565b6101a0830151604051630e84bcbd60e21b81526001600160a01b039182166004820152911690633a12f2f490602401602060405180830381865afa158015611ac6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611aea9190614ecf565b15611af957611af98383613a89565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611b80573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ba49190614e47565b6040517f1b982cf100000000000000000000000000000000000000000000000000000000815263ffffffff861660048201526001600160a01b03848116602483015291925090821690631b982cf190604401600060405180830381600087803b158015611c1057600080fd5b505af1158015611c24573d6000803e3d6000fd5b50505063ffffffff8516600090815260056020526040902060070180546001600160a01b031916905550610a589250611e35915050565b611c63611dde565b60405163364d0abb60e11b815263ffffffff821660048201526001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166024820152737609BaBeD95fbf29410915a0E0e74635037bf1eF90636c9a15769060440160006040518083038186803b158015611ce257600080fd5b505af4158015611cf6573d6000803e3d6000fd5b50505050600080600080611d0985611e3c565b9350935093509350610e5e85858585613c81565b604080516001600160a01b03848116602483015283811660448301528616606482015260848082018690528251808303909101815260a49091018252602080820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fb03066710000000000000000000000000000000000000000000000000000000017905282518084019093528083527f4e4654206e6f74207375636365737366756c6c79207472616e736665727265649083015261088e91879190613dee565b6002805403611e2f5760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0060448201526064016106d5565b60028055565b6001600255565b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c081018290528190604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611f3d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f619190614e47565b6040517fe6c5a54100000000000000000000000000000000000000000000000000000000815263ffffffff871660048201529091506000906001600160a01b0383169063e6c5a54190602401606060405180830381865afa158015611fca573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fee9190614eec565b60208181015163ffffffff8981166000908152600580855260409182902082516101e0810184528154815260018201549681019690965260028101549286019290925260038201546001600160a01b038082166060880152600160a01b8083049095166080880152600160c01b820461ffff90811660a0890152600160d01b90920490911660c0870152600483015460e08701529082015480821661010087015267ffffffffffffffff90849004811661012087015260068301548216610140870152600783015482166101608701819052600884015483166101808801526009909301549182166101a087015292900460ff1615156101c08501529296509293509190911690156121075783610160015195506121da565b826001600160a01b0316638208e76c6040518163ffffffff1660e01b8152600401602060405180830381865afa158015612145573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121699190614e47565b6001600160a01b0316636352211e826040518263ffffffff1660e01b815260040161219691815260200190565b602060405180830381865afa1580156121b3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121d79190614e47565b95505b6101808401516001600160a01b0316156121fb5783610180015194506122ce565b826001600160a01b0316634fbe68a06040518163ffffffff1660e01b8152600401602060405180830381865afa158015612239573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061225d9190614e47565b6001600160a01b0316636352211e826040518263ffffffff1660e01b815260040161228a91815260200190565b602060405180830381865afa1580156122a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122cb9190614e47565b94505b50509193509193565b6000806122e383613e66565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b600482015291935091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015612368573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061238c9190614e47565b60608501516040517ff18d03cc0000000000000000000000000000000000000000000000000000000081526001600160a01b03918216600482015233602482015287821660448201526064810185905291925082169063f18d03cc90608401600060405180830381600087803b15801561240557600080fd5b505af1158015612419573d6000803e3d6000fd5b50505050806001600160a01b031663f18d03cc8560600151336124446000546001600160a01b031690565b60405160e085901b6001600160e01b03191681526001600160a01b0393841660048201529183166024830152909116604482015260648101869052608401600060405180830381600087803b15801561249c57600080fd5b505af11580156124b0573d6000803e3d6000fd5b505085516040808801516101408901516060808b0151845195865260208601939093529284018890529183018890526001600160a01b039182166080840152811660a083015280891693508916915063ffffffff8a16907f6ee3573bd905753c83bc1aaca3c15bfa36391db95b778bd825eb010645a7ee459060c00160405180910390a450505050505050565b63ffffffff831660008181526006602052604090819020805460ff19166001179055517fa4d0845d000000000000000000000000000000000000000000000000000000008152600481019190915281151560248201526001600160a01b0383169063a4d0845d90604401600060405180830381600087803b1580156125c157600080fd5b505af11580156125d5573d6000803e3d6000fd5b50505050505050565b6101408101516040808301516101a08401519151631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f525900000000000000000060048201529091907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612676573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061269a9190614e47565b604051630e84bcbd60e21b81526001600160a01b0383811660048301529190911690633a12f2f490602401602060405180830381865afa1580156126e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906127069190614ecf565b1561278b576040517fe620f5bf0000000000000000000000000000000000000000000000000000000081526001600160a01b0384811660048301526024820184905282169063e620f5bf90604401600060405180830381600087803b15801561276e57600080fd5b505af1158015612782573d6000803e3d6000fd5b50505050612805565b6101008401516040516336e2549760e01b81526001600160a01b0391821660048201528482166024820152604481018490528682166064820152908216906336e2549790608401600060405180830381600087803b1580156127ec57600080fd5b505af1158015612800573d6000803e3d6000fd5b505050505b5050505050565b604051631c2d8fb360e31b81527f44454c45474154455f504c5547494e000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612893573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128b79190614e47565b6040517f5350c01200000000000000000000000000000000000000000000000000000000815263ffffffff841660048201529091506001600160a01b03821690635350c01290602401602060405180830381865afa15801561291d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129419190614ecf565b15611199576040517fadec0fa100000000000000000000000000000000000000000000000000000000815263ffffffff831660048201526001600160a01b0382169063adec0fa190602401600060405180830381600087803b1580156129a657600080fd5b505af115801561088e573d6000803e3d6000fd5b6129c2613f55565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b600154600160a01b900460ff1615610f985760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a207061757365640000000000000000000000000000000060448201526064016106d5565b604051631c2d8fb360e31b81526d5045524d49545445445f4e46545360901b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612ae1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b059190614e47565b6040517fb8c8aff80000000000000000000000000000000000000000000000000000000081526001600160a01b038481166004830152919091169063b8c8aff890602401602060405180830381865afa158015612b66573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110c39190614e47565b60a08201516001600160a01b031660009081526008602052604090205460ff16612be0576040517f77edb77a00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b038116612c20576040517f4499a26b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600354826080015163ffffffff161115612c66576040517f38e266e600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b816080015163ffffffff16600003612caa576040517ff883f39d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8151600003611199576040517f2cfac27c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b805160208201511015612d24576040517f5169219900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b805160e082015110610a58576040517f32298ad700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c0810191909152604051806101e001604052808560000151815260200185602001518152602001856040015181526020018560a001516001600160a01b03168152602001856080015163ffffffff168152602001600061ffff168152602001600460009054906101000a900461ffff1661ffff1681526020018560e001518152602001836001600160a01b031681526020014267ffffffffffffffff16815260200185606001516001600160a01b03168152602001336001600160a01b03168152602001846001600160a01b03168152602001612eb033610a5b565b6001600160a01b031681526020018560c00151151581525090509392505050565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612f58573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f7c9190614e47565b604083810151845191517f38b193a40000000000000000000000000000000000000000000000000000000081526001600160a01b039182166004820152602481019290925291909116906338b193a490604401600060405180830381600087803b158015612fe957600080fd5b505af1158015612ffd573d6000803e3d6000fd5b50505050600061300b613fae565b6040517f2ff526a00000000000000000000000000000000000000000000000000000000081529091507330FBa6cE5499EC0A3400BCD3c3c70dAB29A95C1690632ff526a09061306290879087908690600401614faa565b602060405180830381865af415801561307f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906130a39190614ecf565b6130d9576040517f6d2a03cf00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60006130e586336140dc565b905083604001516001600160a01b0316336001600160a01b03168263ffffffff167f4d3634f72248e203ec6eab4996f443daca55feea347f82ff609b2d0f5bbaae5a896040516131359190614716565b60405180910390a495945050505050565b6001600160a01b038216613186576040517fdd1562f600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b038216600081815260086020908152604091829020805460ff191685151590811790915591519182527ff100355be652ecc881568750e6a98c0713e4316f75d5314ebc9039e0acb52f24910160405180910390a25050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b61323d612a0f565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586129f23390565b600081613290576132898686614ea9565b90506115ee565b600061329d87878561417c565b6132a7908861503d565b90506000612710856132b9888561503d565b6132c39190615054565b6132cd9190615054565b9050866132da828a614ebc565b11156132f3576132ea8888614ea9565b925050506115ee565b91506115ee9050565b63ffffffff881660009081526005602052604080822090517fb5ec52630000000000000000000000000000000000000000000000000000000081529091908190737609BaBeD95fbf29410915a0E0e74635037bf1eF9063b5ec5263906133909086908f908f908f908e907f000000000000000000000000000000000000000000000000000000000000000090600401615076565b6040805180830381865af41580156133ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133d091906151a7565b91509150600160076000836001600160a01b03166001600160a01b03168152602001908152602001600020600089815260200190815260200160002060006101000a81548160ff0219169083151502179055507330FBa6cE5499EC0A3400BCD3c3c70dAB29A95C16632d9ad49c8c8c888d8d60405180608001604052808f81526020018e8152602001896001600160a01b031681526020018c8152506040518763ffffffff1660e01b815260040161348d969594939291906151d6565b602060405180830381865af41580156134aa573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134ce9190614ecf565b613504576040517fe83dc84b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008815613781576003840154604051632ad659af60e01b8152600481018b9052600160d01b90910461ffff166024820152737609BaBeD95fbf29410915a0E0e74635037bf1eF90632ad659af90604401602060405180830381865af4158015613572573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906135969190614e2e565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b60048201529091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015613619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061363d9190614e47565b9050806001600160a01b031663f18d03cc8660030160009054906101000a90046001600160a01b03168686868f6136749190614ea9565b6040516001600160e01b031960e087901b1681526001600160a01b0394851660048201529284166024840152921660448201526064810191909152608401600060405180830381600087803b1580156136cc57600080fd5b505af11580156136e0573d6000803e3d6000fd5b50505060038601546001600160a01b03808416925063f18d03cc91168661370f6000546001600160a01b031690565b60405160e085901b6001600160e01b03191681526001600160a01b0393841660048201529183166024830152909116604482015260648101859052608401600060405180830381600087803b15801561376757600080fd5b505af115801561377b573d6000803e3d6000fd5b50505050505b6003840180547fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff16600160a01b63ffffffff8e16810291909117909155600185018b905560098501805460ff60a01b191688151590920291909117905560078401546001600160a01b03161580613803575060088401546001600160a01b0316155b1561398a57604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa15801561388c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906138b09190614e47565b6040517f7ccb6d9900000000000000000000000000000000000000000000000000000000815263ffffffff8e1660048201526001600160a01b039190911690637ccb6d9990602401600060405180830381600087803b15801561391257600080fd5b505af1158015613926573d6000803e3d6000fd5b5050505060078401546001600160a01b031661395a576007840180546001600160a01b0319166001600160a01b0385161790555b60088401546001600160a01b031661398a576008840180546001600160a01b0319166001600160a01b0384161790555b6040805163ffffffff8d81168252602082018d90529181018b90526060810183905287151560808201526001600160a01b038085169290861691908f16907f291a1a8e93746b6fd49f5deed62f4b7066cfd154e501d745bb52d247378ad2ef9060a00160405180910390a4505050505050505050505050565b6101408101516040808301516101a084015161010085015192516336e2549760e01b81526001600160a01b0393841660048201528385166024820152604481018390528684166064820152919216906336e2549790608401600060405180830381600087803b158015613a7557600080fd5b505af1158015611621573d6000803e3d6000fd5b604051631c2d8fb360e31b815265455343524f5760d01b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015613af9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613b1d9190614e47565b6101a083015161010084015161014085015160408087015190517f498524230000000000000000000000000000000000000000000000000000000081526001600160a01b0393841660048201529183166024830152604482015281841660648201529293501690634985242390608401600060405180830381600087803b158015613ba757600080fd5b505af1158015613bbb573d6000803e3d6000fd5b5050506101008301516101408401516040808601516101a08701519151637b49f5bf60e01b81526001600160a01b03948516600482015292841660248401526044830152821660648201529083169150637b49f5bf90608401600060405180830381600087803b158015613c2e57600080fd5b505af1158015613c42573d6000803e3d6000fd5b50505063ffffffff909316600090815260056020526040902060090180546001600160a01b039092166001600160a01b03199092169190911790555050565b600080613c8d83613e66565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b600482015291935091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015613d12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613d369190614e47565b60608501516040517f131fc1cf0000000000000000000000000000000000000000000000000000000081526001600160a01b03918216600482015233602482015287821660448201526064810185905291925082169063131fc1cf90608401600060405180830381600087803b158015613daf57600080fd5b505af1158015613dc3573d6000803e3d6000fd5b50505050806001600160a01b031663b3a424bd8560600151336124446000546001600160a01b031690565b6060600080856001600160a01b031685604051613e0b919061521f565b600060405180830381855af49150503d8060008114613e46576040519150601f19603f3d011682016040523d82523d6000602084013e613e4b565b606091505b5091509150613e5c868383876141b8565b9695505050505050565b6000806000613ea98460000151856020015186610120015167ffffffffffffffff1642613e939190614ea9565b876080015163ffffffff16886101c00151613278565b60c0850151604051632ad659af60e01b81526004810183905261ffff9091166024820152909150737609BaBeD95fbf29410915a0E0e74635037bf1eF90632ad659af90604401602060405180830381865af4158015613f0c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613f309190614e2e565b925082818560000151613f439190614ebc565b613f4d9190614ea9565b915050915091565b600154600160a01b900460ff16610f985760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f742070617573656400000000000000000000000060448201526064016106d5565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015614035573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906140599190614e47565b6040517f78a7fa670000000000000000000000000000000000000000000000000000000081523060048201526001600160a01b0391909116906378a7fa6790602401602060405180830381865afa1580156140b8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f319190614e2e565b6101a08201516101008301516101408401516040808601519051637b49f5bf60e01b81526001600160a01b0393841660048201529183166024830152604482015283821660648201526000929190911690637b49f5bf90608401600060405180830381600087803b15801561415057600080fd5b505af1158015614164573d6000803e3d6000fd5b5050505060006141748484614231565b949350505050565b60008161418b57506000610c35565b60006141978585614ea9565b9050846141a66127108361503d565b6141b09190615054565b915050610c35565b60608315614227578251600003614220576001600160a01b0385163b6142205760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e747261637400000060448201526064016106d5565b5081614174565b61417483836146ad565b604051631c2d8fb360e31b81527f0000000000000000000000000000000000000000000000000000000000000000600482015260009081906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa1580156142ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906142de9190614e47565b9050806001600160a01b031663aaf5f5646040518163ffffffff1660e01b81526004016020604051808303816000875af1158015614320573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190614344919061523b565b63ffffffff81811660009081526005602081815260409283902089518155908901516001820155888301516002820155606089015160038201805460808c015160a08d015160c08e01516001600160a01b039586167fffffffffffffffff00000000000000000000000000000000000000000000000090941693909317600160a01b929099168202989098177fffffffff00000000ffffffffffffffffffffffffffffffffffffffffffffffff16600160c01b61ffff998a16027fffffffff0000ffffffffffffffffffffffffffffffffffffffffffffffffffff1617600160d01b989092169790970217905560e08a01516004808401919091556101008b015193830180546101208d01519584166001600160e01b03199091161767ffffffffffffffff9095168702949094179093556101408a01516006830180546001600160a01b03199081169284169290921790556101608b015160078401805483169184169190911790556101808b01516008840180549092169083161790556101a08a0151600990920180546101c08c01519383167fffffffffffffffffffffff00000000000000000000000000000000000000000090911617921515909502919091179093559051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b918101919091529193507f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015614583573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906145a79190614e47565b6001600160a01b031663f18d03cc8560600151866101800151868860e0015189600001516145d59190614ea9565b6040516001600160e01b031960e087901b1681526001600160a01b0394851660048201529284166024840152921660448201526064810191909152608401600060405180830381600087803b15801561462d57600080fd5b505af1158015614641573d6000803e3d6000fd5b50505050826001600160a01b031684604001518561014001516001600160a01b03167fc4c3eef84cea74c07370cf16b6bb43ebf62dd3fd5773a91c8350ff00d316134d8560405161469e919063ffffffff91909116815260200190565b60405180910390a45092915050565b8151156146bd5781518083602001fd5b8060405162461bcd60e51b81526004016106d59190614e1b565b63ffffffff81168114610a5857600080fd5b80356146f4816146d7565b919050565b60006020828403121561470b57600080fd5b8135610c35816146d7565b60006101e082019050825182526020830151602083015260408301516040830152606083015161475160608401826001600160a01b03169052565b506080830151614769608084018263ffffffff169052565b5060a083015161477f60a084018261ffff169052565b5060c083015161479560c084018261ffff169052565b5060e083015160e0830152610100808401516147bb828501826001600160a01b03169052565b50506101208381015167ffffffffffffffff1690830152610140808401516001600160a01b039081169184019190915261016080850151821690840152610180808501518216908401526101a080850151909116908301526101c0928301511515929091019190915290565b634e487b7160e01b600052604160045260246000fd5b604051610100810167ffffffffffffffff8111828210171561486157614861614827565b60405290565b604051601f8201601f1916810167ffffffffffffffff8111828210171561489057614890614827565b604052919050565b600067ffffffffffffffff8311156148b2576148b2614827565b6148c5601f8401601f1916602001614867565b90508281528383830111156148d957600080fd5b828260208301376000602084830101529392505050565b6001600160a01b0381168114610a5857600080fd5b80356146f4816148f0565b6000806000806080858703121561492657600080fd5b843567ffffffffffffffff81111561493d57600080fd5b8501601f8101871361494e57600080fd5b61495d87823560208401614898565b945050602085013561496e816148f0565b9250604085013591506060850135614985816148f0565b939692955090935050565b6000602082840312156149a257600080fd5b8135610c35816148f0565b6000602082840312156149bf57600080fd5b5035919050565b6000602082840312156149d857600080fd5b813561ffff81168114610c3557600080fd5b8015158114610a5857600080fd5b80356146f4816149ea565b600082601f830112614a1457600080fd5b610c3583833560208501614898565b600060808284031215614a3557600080fd5b6040516080810167ffffffffffffffff8282108183111715614a5957614a59614827565b81604052829350843583526020850135602084015260408501359150614a7e826148f0565b8160408401526060850135915080821115614a9857600080fd5b50614aa585828601614a03565b6060830152505092915050565b600080828403610120811215614ac757600080fd5b61010080821215614ad757600080fd5b614adf61483d565b91508435825260208501356020830152604085013560408301526060850135614b07816148f0565b6060830152614b18608086016146e9565b6080830152614b2960a08601614905565b60a0830152614b3a60c086016149f8565b60c083015260e0858101359083015290925083013567ffffffffffffffff811115614b6457600080fd5b614b7085828601614a23565b9150509250929050565b60008060408385031215614b8d57600080fd5b8235614b98816148f0565b91506020830135614ba8816149ea565b809150509250929050565b600067ffffffffffffffff821115614bcd57614bcd614827565b5060051b60200190565b600082601f830112614be857600080fd5b81356020614bfd614bf883614bb3565b614867565b82815260059290921b84018101918181019086841115614c1c57600080fd5b8286015b84811015614c40578035614c33816149ea565b8352918301918301614c20565b509695505050505050565b60008060408385031215614c5e57600080fd5b823567ffffffffffffffff80821115614c7657600080fd5b818501915085601f830112614c8a57600080fd5b81356020614c9a614bf883614bb3565b82815260059290921b84018101918181019089841115614cb957600080fd5b948201945b83861015614ce0578535614cd1816148f0565b82529482019490820190614cbe565b96505086013592505080821115614cf657600080fd5b50614b7085828601614bd7565b600080600080600080600080610100898b031215614d2057600080fd5b8835614d2b816146d7565b97506020890135614d3b816146d7565b965060408901359550606089013594506080890135935060a0890135925060c0890135614d67816149ea565b915060e089013567ffffffffffffffff811115614d8357600080fd5b614d8f8b828c01614a03565b9150509295985092959890939650565b60008060408385031215614db257600080fd5b8235614dbd816148f0565b946020939093013593505050565b60005b83811015614de6578181015183820152602001614dce565b50506000910152565b60008151808452614e07816020860160208601614dcb565b601f01601f19169290920160200192915050565b602081526000610c356020830184614def565b600060208284031215614e4057600080fd5b5051919050565b600060208284031215614e5957600080fd5b8151610c35816148f0565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201614ea257614ea2614e7a565b5060010190565b818103818111156110c3576110c3614e7a565b808201808211156110c3576110c3614e7a565b600060208284031215614ee157600080fd5b8151610c35816149ea565b600060608284031215614efe57600080fd5b6040516060810167ffffffffffffffff8282108183111715614f2257614f22614827565b8160405284519150614f33826148f0565b9082526020840151908082168214614f4a57600080fd5b506020820152604083015160048110614f6257600080fd5b60408201529392505050565b80518252602081015160208301526001600160a01b03604082015116604083015260006060820151608060608501526141746080850182614def565b600061014085518352602086015160208401526040860151604084015260608601516001600160a01b03808216606086015263ffffffff60808901511660808601528060a08901511660a0860152505060c086015161500d60c085018215159052565b5060e086015160e08401528061010084015261502b81840186614f6e565b91505082610120830152949350505050565b80820281158282048414176110c3576110c3614e7a565b60008261507157634e487b7160e01b600052601260045260246000fd5b500490565b86548152600187015460208201526002870154604082015260038701546001600160a01b0380821660608401526102808301919060a082901c63ffffffff16608085015261ffff60c083901c811660a08601526150de60c08601828560d01c1661ffff169052565b5060048a015460e085015260058a01548181166001600160a01b0390811661010087015267ffffffffffffffff60a092831c1661012087015260068c0154811661014087015260078c0154811661016087015260088c0154811661018087015260098c0154928316166101a086015281901c60ff1615156101c085015290505063ffffffff87166101e083015263ffffffff8616610200830152846102208301528361024083015261519c6102608301846001600160a01b03169052565b979650505050505050565b600080604083850312156151ba57600080fd5b82516151c5816148f0565b6020840151909250614ba8816148f0565b600063ffffffff8089168352808816602084015250851515604083015284606083015283608083015260c060a083015261521360c0830184614f6e565b98975050505050505050565b60008251615231818460208701614dcb565b9190910192915050565b60006020828403121561524d57600080fd5b8151610c35816146d756fea164736f6c6343000813000a",
  "deployedBytecode": "0x608060405234801561001057600080fd5b506004361061020b5760003560e01c80636ed93dd01161012a57806392fede00116100bd578063ad9d4f641161008c578063bce42e4211610071578063bce42e4214610620578063e7b0292914610633578063eda928ab1461066c57600080fd5b8063ad9d4f64146105fa578063b31ec1d41461060d57600080fd5b806392fede00146105be5780639d6fa618146105c6578063a4441a6f146105d9578063ab3b1280146105e757600080fd5b80637b371107116100f95780637b371107146105715780638456cb5914610579578063872873be146105815780638da5cb5b146105ad57600080fd5b80636ed93dd01461050857806377cfa991146105245780637836baf11461054b57806379b640401461055e57600080fd5b80632b218022116101a257806347948d921161017157806347948d92146104b357806353857cc3146104c65780635c975abb146104ee5780635f992fdd1461050057600080fd5b80632b21802214610469578063365a86fc1461047c5780633df4c0c4146104a35780633f4ba83a146104ab57600080fd5b806318585b6b116101de57806318585b6b14610401578063192b355d1461042c5780631a861ad4146104435780631c6caf411461045657600080fd5b80630316abd2146102105780630717f3aa146103a65780630a76e196146103d9578063110bc820146103ee575b600080fd5b61039061021e3660046146f9565b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c08101919091525063ffffffff90811660009081526005602081815260409283902083516101e0810185528154815260018201549281019290925260028101549382019390935260038301546001600160a01b038082166060840152600160a01b8083049096166080840152600160c01b820461ffff90811660a0850152600160d01b90920490911660c0830152600484015460e08301529183015480831661010083015284900467ffffffffffffffff166101208201526006830154821661014082015260078301548216610160820152600883015482166101808201526009909201549081166101a08301529190910460ff1615156101c082015290565b60405161039d9190614716565b60405180910390f35b6103c96103b43660046146f9565b60066020526000908152604090205460ff1681565b604051901515815260200161039d565b6103ec6103e7366004614910565b61067f565b005b6103ec6103fc3660046146f9565b610896565b61041461040f366004614990565b610a5b565b6040516001600160a01b03909116815260200161039d565b61043560035481565b60405190815260200161039d565b6103ec6104513660046149ad565b610c3c565b6103ec6104643660046149c6565b610cb7565b6103ec6104773660046146f9565b610d9c565b6104147f000000000000000000000000000000000000000000000000000000000000000081565b610414610e8d565b6103ec610f36565b6103ec6104c13660046149ad565b610f9a565b6104d96104d4366004614ab2565b611067565b60405163ffffffff909116815260200161039d565b600154600160a01b900460ff166103c9565b6103ec6110c9565b61051161271081565b60405161ffff909116815260200161039d565b6104357f000000000000000000000000000000000000000000000000000000000000000081565b6103ec610559366004614b7a565b611135565b6103ec61056c366004614c4b565b61119d565b6103ec61128f565b6103ec6112fe565b6103c961058f366004614990565b6001600160a01b031660009081526008602052604090205460ff1690565b6000546001600160a01b0316610414565b6103ec611360565b6103ec6105d4366004614990565b6113ba565b6004546105119061ffff1681565b6104356105f53660046146f9565b6114b2565b6103ec610608366004614d03565b6115f7565b6103ec61061b3660046146f9565b61162b565b6103ec61062e3660046146f9565b611892565b6103c9610641366004614d9f565b6001600160a01b03919091166000908152600760209081526040808320938352929052205460ff1690565b6103ec61067a3660046146f9565b611c5b565b6000546001600160a01b031633146106de5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064015b60405180910390fd5b6040517ff99a8ffb00000000000000000000000000000000000000000000000000000000815260009073__$b0ae3f603fa3e13f3b829da0b88d39db57$__9063f99a8ffb90610731908890600401614e1b565b602060405180830381865af415801561074e573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906107729190614e2e565b604051631c2d8fb360e31b81526d5045524d49545445445f4e46545360901b60048201529091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa1580156107ed573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108119190614e47565b6001600160a01b0316631a3dd0a5836040518263ffffffff1660e01b815260040161083e91815260200190565b602060405180830381865afa15801561085b573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061087f9190614e47565b905061088e8186863087611d1d565b505050505050565b61089e611dde565b63ffffffff81166000908152600560205260409020600801546001600160a01b03163381146108f9576040517f28aaeab500000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610980573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906109a49190614e47565b6040517ffc03091500000000000000000000000000000000000000000000000000000000815263ffffffff851660048201526001600160a01b0384811660248301529192509082169063fc03091590604401600060405180830381600087803b158015610a1057600080fd5b505af1158015610a24573d6000803e3d6000fd5b5050505063ffffffff8316600090815260056020526040902060080180546001600160a01b03191690555050600160025550565b50565b604051631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f5259000000000000000000600482015260009081906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015610ae4573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b089190614e47565b6040517f827bd1450000000000000000000000000000000000000000000000000000000081526001600160a01b038581166004830152919091169063827bd14590602401602060405180830381865afa158015610b69573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b8d9190614e47565b90506001600160a01b03811615610ba45792915050565b604051631c2d8fb360e31b815265455343524f5760d01b60048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610c11573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c359190614e47565b9392505050565b33600090815260076020908152604080832084845290915290205460ff1615610c91576040517f756688fe00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b33600090815260076020908152604080832093835292905220805460ff19166001179055565b6000546001600160a01b03163314610d115760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b61271061ffff82161115610d51576040517f50012f3c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6004805461ffff191661ffff83169081179091556040519081527f03017365bbe16943b524030df07e7689168ab63e854d27417498e6f9dc584dab906020015b60405180910390a150565b610da4611dde565b60405163364d0abb60e11b815263ffffffff821660048201526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016602482015273__$7fe1a5040b0347abce432a11768ba31a4f$__90636c9a15769060440160006040518083038186803b158015610e2357600080fd5b505af4158015610e37573d6000803e3d6000fd5b50505050600080600080610e4a85611e3c565b9350935093509350610e5e858585856122d7565b6001610e6b86838361253d565b610e7585846125de565b610e7e8661280c565b5050505050610a586001600255565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015610f0d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f319190614e47565b905090565b6000546001600160a01b03163314610f905760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b610f986129ba565b565b6000546001600160a01b03163314610ff45760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b63ffffffff811115611032576040517fe6f08f2000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60038190556040518181527f64f65a4a1a932867ad599da36210fc47c698b3abb2413cfdfd36bf59697a69cb90602001610d91565b6000611071612a0f565b611079611dde565b60006110888460600151612a69565b90506110948482612b8a565b61109d84612ce5565b6110b66110af85856040015184612d62565b8585612ed1565b9150506110c36001600255565b92915050565b6001546001600160a01b031633146111235760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e6469646174650000000060448201526064016106d5565b600180546001600160a01b0319169055565b6000546001600160a01b0316331461118f5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6111998282613146565b5050565b6000546001600160a01b031633146111f75760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b8051825114611232576040517f1dbe8b0000000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60005b825181101561128a5761127a83828151811061125357611253614e64565b602002602001015183838151811061126d5761126d614e64565b6020026020010151613146565b61128381614e90565b9050611235565b505050565b6001546001600160a01b031633146112e95760405162461bcd60e51b815260206004820152601c60248201527f4f776e61626c653a206e6f74206f776e65722063616e6469646174650000000060448201526064016106d5565b600154611123906001600160a01b03166131e5565b6000546001600160a01b031633146113585760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b610f98613235565b6000546001600160a01b031633146111235760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6000546001600160a01b031633146114145760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016106d5565b6001600160a01b0381166114905760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201527f646472657373000000000000000000000000000000000000000000000000000060648201526084016106d5565b600180546001600160a01b0319166001600160a01b0392909216919091179055565b63ffffffff818116600090815260056020818152604080842081516101e0810183528154815260018201549381019390935260028101549183019190915260038101546001600160a01b038082166060850152600160a01b8083049097166080850152600160c01b820461ffff90811660a0860152600160d01b90920490911660c0840152600482015460e08401529281015480841661010084015285900467ffffffffffffffff1661012083018190526006820154841661014084015260078201548416610160840152600882015484166101808401526009909101549283166101a08301529390910460ff1615156101c0820152909182906115b69042614ea9565b905060006115de8360000151846020015184866080015163ffffffff16876101c00151613278565b83519091506115ee908290614ebc565b95945050505050565b6115ff612a0f565b611607611dde565b61161788888888888888886132fc565b6116216001600255565b5050505050505050565b611633611dde565b6040517fb7fa1f6200000000000000000000000000000000000000000000000000000000815263ffffffff821660048201526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016602482015273__$7fe1a5040b0347abce432a11768ba31a4f$__9063b7fa1f629060440160006040518083038186803b1580156116cb57600080fd5b505af41580156116df573d6000803e3d6000fd5b5050505063ffffffff811660009081526006602052604090205460ff1615611733576040517f7b6b5a0200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008060008061174285611e3c565b93509350935093506000826080015163ffffffff1683610120015167ffffffffffffffff166117719190614ebc565b90508042116117ac576040517f8efc8ff200000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b336001600160a01b038516146117ee576040517f786b308a00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60006117fb87848361253d565b6118058585613a03565b61180e8761280c565b8351604080860151610140870151825193845260208401919091529082018490524260608301526001600160a01b039081166080830152808716919088169063ffffffff8a16907f4fac0ff43299a330bce57d0579985305af580acf256a6d7977083ede81be13269060a00160405180910390a4505050505050610a586001600255565b61189a611dde565b63ffffffff81811660009081526005602081815260409283902083516101e0810185528154815260018201549281019290925260028101549382019390935260038301546001600160a01b038082166060840152600160a01b8083049096166080840152600160c01b820461ffff90811660a0850152600160d01b90920490911660c0830152600484015460e08301529183015480831661010083015284900467ffffffffffffffff1661012082015260068301548216610140820152600783015482166101608201819052600884015483166101808301526009909301549182166101a082015292900460ff1615156101c08301523381146119c9576040517f918a328e00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6119d28361280c565b604051631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f525900000000000000000060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611a56573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611a7a9190614e47565b6101a0830151604051630e84bcbd60e21b81526001600160a01b039182166004820152911690633a12f2f490602401602060405180830381865afa158015611ac6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611aea9190614ecf565b15611af957611af98383613a89565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611b80573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611ba49190614e47565b6040517f1b982cf100000000000000000000000000000000000000000000000000000000815263ffffffff861660048201526001600160a01b03848116602483015291925090821690631b982cf190604401600060405180830381600087803b158015611c1057600080fd5b505af1158015611c24573d6000803e3d6000fd5b50505063ffffffff8516600090815260056020526040902060070180546001600160a01b031916905550610a589250611e35915050565b611c63611dde565b60405163364d0abb60e11b815263ffffffff821660048201526001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016602482015273__$7fe1a5040b0347abce432a11768ba31a4f$__90636c9a15769060440160006040518083038186803b158015611ce257600080fd5b505af4158015611cf6573d6000803e3d6000fd5b50505050600080600080611d0985611e3c565b9350935093509350610e5e85858585613c81565b604080516001600160a01b03848116602483015283811660448301528616606482015260848082018690528251808303909101815260a49091018252602080820180517bffffffffffffffffffffffffffffffffffffffffffffffffffffffff167fb03066710000000000000000000000000000000000000000000000000000000017905282518084019093528083527f4e4654206e6f74207375636365737366756c6c79207472616e736665727265649083015261088e91879190613dee565b6002805403611e2f5760405162461bcd60e51b815260206004820152601f60248201527f5265656e7472616e637947756172643a207265656e7472616e742063616c6c0060448201526064016106d5565b60028055565b6001600255565b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c081018290528190604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015611f3d573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611f619190614e47565b6040517fe6c5a54100000000000000000000000000000000000000000000000000000000815263ffffffff871660048201529091506000906001600160a01b0383169063e6c5a54190602401606060405180830381865afa158015611fca573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611fee9190614eec565b60208181015163ffffffff8981166000908152600580855260409182902082516101e0810184528154815260018201549681019690965260028101549286019290925260038201546001600160a01b038082166060880152600160a01b8083049095166080880152600160c01b820461ffff90811660a0890152600160d01b90920490911660c0870152600483015460e08701529082015480821661010087015267ffffffffffffffff90849004811661012087015260068301548216610140870152600783015482166101608701819052600884015483166101808801526009909301549182166101a087015292900460ff1615156101c08501529296509293509190911690156121075783610160015195506121da565b826001600160a01b0316638208e76c6040518163ffffffff1660e01b8152600401602060405180830381865afa158015612145573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121699190614e47565b6001600160a01b0316636352211e826040518263ffffffff1660e01b815260040161219691815260200190565b602060405180830381865afa1580156121b3573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906121d79190614e47565b95505b6101808401516001600160a01b0316156121fb5783610180015194506122ce565b826001600160a01b0316634fbe68a06040518163ffffffff1660e01b8152600401602060405180830381865afa158015612239573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061225d9190614e47565b6001600160a01b0316636352211e826040518263ffffffff1660e01b815260040161228a91815260200190565b602060405180830381865afa1580156122a7573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906122cb9190614e47565b94505b50509193509193565b6000806122e383613e66565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b600482015291935091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015612368573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061238c9190614e47565b60608501516040517ff18d03cc0000000000000000000000000000000000000000000000000000000081526001600160a01b03918216600482015233602482015287821660448201526064810185905291925082169063f18d03cc90608401600060405180830381600087803b15801561240557600080fd5b505af1158015612419573d6000803e3d6000fd5b50505050806001600160a01b031663f18d03cc8560600151336124446000546001600160a01b031690565b60405160e085901b6001600160e01b03191681526001600160a01b0393841660048201529183166024830152909116604482015260648101869052608401600060405180830381600087803b15801561249c57600080fd5b505af11580156124b0573d6000803e3d6000fd5b505085516040808801516101408901516060808b0151845195865260208601939093529284018890529183018890526001600160a01b039182166080840152811660a083015280891693508916915063ffffffff8a16907f6ee3573bd905753c83bc1aaca3c15bfa36391db95b778bd825eb010645a7ee459060c00160405180910390a450505050505050565b63ffffffff831660008181526006602052604090819020805460ff19166001179055517fa4d0845d000000000000000000000000000000000000000000000000000000008152600481019190915281151560248201526001600160a01b0383169063a4d0845d90604401600060405180830381600087803b1580156125c157600080fd5b505af11580156125d5573d6000803e3d6000fd5b50505050505050565b6101408101516040808301516101a08401519151631c2d8fb360e31b81527f504552534f4e414c5f455343524f575f464143544f525900000000000000000060048201529091907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612676573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061269a9190614e47565b604051630e84bcbd60e21b81526001600160a01b0383811660048301529190911690633a12f2f490602401602060405180830381865afa1580156126e2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906127069190614ecf565b1561278b576040517fe620f5bf0000000000000000000000000000000000000000000000000000000081526001600160a01b0384811660048301526024820184905282169063e620f5bf90604401600060405180830381600087803b15801561276e57600080fd5b505af1158015612782573d6000803e3d6000fd5b50505050612805565b6101008401516040516336e2549760e01b81526001600160a01b0391821660048201528482166024820152604481018490528682166064820152908216906336e2549790608401600060405180830381600087803b1580156127ec57600080fd5b505af1158015612800573d6000803e3d6000fd5b505050505b5050505050565b604051631c2d8fb360e31b81527f44454c45474154455f504c5547494e000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612893573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906128b79190614e47565b6040517f5350c01200000000000000000000000000000000000000000000000000000000815263ffffffff841660048201529091506001600160a01b03821690635350c01290602401602060405180830381865afa15801561291d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906129419190614ecf565b15611199576040517fadec0fa100000000000000000000000000000000000000000000000000000000815263ffffffff831660048201526001600160a01b0382169063adec0fa190602401600060405180830381600087803b1580156129a657600080fd5b505af115801561088e573d6000803e3d6000fd5b6129c2613f55565b6001805460ff60a01b191690557f5db9ee0a495bf2e6ff9c91a7834c1ba4fdd244a5e8aa4e537bd38aeae4b073aa335b6040516001600160a01b03909116815260200160405180910390a1565b600154600160a01b900460ff1615610f985760405162461bcd60e51b815260206004820152601060248201527f5061757361626c653a207061757365640000000000000000000000000000000060448201526064016106d5565b604051631c2d8fb360e31b81526d5045524d49545445445f4e46545360901b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612ae1573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b059190614e47565b6040517fb8c8aff80000000000000000000000000000000000000000000000000000000081526001600160a01b038481166004830152919091169063b8c8aff890602401602060405180830381865afa158015612b66573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906110c39190614e47565b60a08201516001600160a01b031660009081526008602052604090205460ff16612be0576040517f77edb77a00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b038116612c20576040517f4499a26b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b600354826080015163ffffffff161115612c66576040517f38e266e600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b816080015163ffffffff16600003612caa576040517ff883f39d00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b8151600003611199576040517f2cfac27c00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b805160208201511015612d24576040517f5169219900000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b805160e082015110610a58576040517f32298ad700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b604080516101e081018252600080825260208201819052918101829052606081018290526080810182905260a0810182905260c0810182905260e08101829052610100810182905261012081018290526101408101829052610160810182905261018081018290526101a081018290526101c0810191909152604051806101e001604052808560000151815260200185602001518152602001856040015181526020018560a001516001600160a01b03168152602001856080015163ffffffff168152602001600061ffff168152602001600460009054906101000a900461ffff1661ffff1681526020018560e001518152602001836001600160a01b031681526020014267ffffffffffffffff16815260200185606001516001600160a01b03168152602001336001600160a01b03168152602001846001600160a01b03168152602001612eb033610a5b565b6001600160a01b031681526020018560c00151151581525090509392505050565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015612f58573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612f7c9190614e47565b604083810151845191517f38b193a40000000000000000000000000000000000000000000000000000000081526001600160a01b039182166004820152602481019290925291909116906338b193a490604401600060405180830381600087803b158015612fe957600080fd5b505af1158015612ffd573d6000803e3d6000fd5b50505050600061300b613fae565b6040517f2ff526a000000000000000000000000000000000000000000000000000000000815290915073__$07730b9b91c2b41a419f99961f709e7858$__90632ff526a09061306290879087908690600401614faa565b602060405180830381865af415801561307f573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906130a39190614ecf565b6130d9576040517f6d2a03cf00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60006130e586336140dc565b905083604001516001600160a01b0316336001600160a01b03168263ffffffff167f4d3634f72248e203ec6eab4996f443daca55feea347f82ff609b2d0f5bbaae5a896040516131359190614716565b60405180910390a495945050505050565b6001600160a01b038216613186576040517fdd1562f600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b6001600160a01b038216600081815260086020908152604091829020805460ff191685151590811790915591519182527ff100355be652ecc881568750e6a98c0713e4316f75d5314ebc9039e0acb52f24910160405180910390a25050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b61323d612a0f565b6001805460ff60a01b1916600160a01b1790557f62e78cea01bee320cd4e420270b5ea74000d11b0c9f74754ebdbfc544b05a2586129f23390565b600081613290576132898686614ea9565b90506115ee565b600061329d87878561417c565b6132a7908861503d565b90506000612710856132b9888561503d565b6132c39190615054565b6132cd9190615054565b9050866132da828a614ebc565b11156132f3576132ea8888614ea9565b925050506115ee565b91506115ee9050565b63ffffffff881660009081526005602052604080822090517fb5ec5263000000000000000000000000000000000000000000000000000000008152909190819073__$7fe1a5040b0347abce432a11768ba31a4f$__9063b5ec5263906133909086908f908f908f908e907f000000000000000000000000000000000000000000000000000000000000000090600401615076565b6040805180830381865af41580156133ac573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906133d091906151a7565b91509150600160076000836001600160a01b03166001600160a01b03168152602001908152602001600020600089815260200190815260200160002060006101000a81548160ff02191690831515021790555073__$07730b9b91c2b41a419f99961f709e7858$__632d9ad49c8c8c888d8d60405180608001604052808f81526020018e8152602001896001600160a01b031681526020018c8152506040518763ffffffff1660e01b815260040161348d969594939291906151d6565b602060405180830381865af41580156134aa573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906134ce9190614ecf565b613504576040517fe83dc84b00000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60008815613781576003840154604051632ad659af60e01b8152600481018b9052600160d01b90910461ffff16602482015273__$7fe1a5040b0347abce432a11768ba31a4f$__90632ad659af90604401602060405180830381865af4158015613572573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906135969190614e2e565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b60048201529091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015613619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061363d9190614e47565b9050806001600160a01b031663f18d03cc8660030160009054906101000a90046001600160a01b03168686868f6136749190614ea9565b6040516001600160e01b031960e087901b1681526001600160a01b0394851660048201529284166024840152921660448201526064810191909152608401600060405180830381600087803b1580156136cc57600080fd5b505af11580156136e0573d6000803e3d6000fd5b50505060038601546001600160a01b03808416925063f18d03cc91168661370f6000546001600160a01b031690565b60405160e085901b6001600160e01b03191681526001600160a01b0393841660048201529183166024830152909116604482015260648101859052608401600060405180830381600087803b15801561376757600080fd5b505af115801561377b573d6000803e3d6000fd5b50505050505b6003840180547fffffffffffffffff00000000ffffffffffffffffffffffffffffffffffffffff16600160a01b63ffffffff8e16810291909117909155600185018b905560098501805460ff60a01b191688151590920291909117905560078401546001600160a01b03161580613803575060088401546001600160a01b0316155b1561398a57604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201527f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa15801561388c573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906138b09190614e47565b6040517f7ccb6d9900000000000000000000000000000000000000000000000000000000815263ffffffff8e1660048201526001600160a01b039190911690637ccb6d9990602401600060405180830381600087803b15801561391257600080fd5b505af1158015613926573d6000803e3d6000fd5b5050505060078401546001600160a01b031661395a576007840180546001600160a01b0319166001600160a01b0385161790555b60088401546001600160a01b031661398a576008840180546001600160a01b0319166001600160a01b0384161790555b6040805163ffffffff8d81168252602082018d90529181018b90526060810183905287151560808201526001600160a01b038085169290861691908f16907f291a1a8e93746b6fd49f5deed62f4b7066cfd154e501d745bb52d247378ad2ef9060a00160405180910390a4505050505050505050505050565b6101408101516040808301516101a084015161010085015192516336e2549760e01b81526001600160a01b0393841660048201528385166024820152604481018390528684166064820152919216906336e2549790608401600060405180830381600087803b158015613a7557600080fd5b505af1158015611621573d6000803e3d6000fd5b604051631c2d8fb360e31b815265455343524f5760d01b60048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015613af9573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613b1d9190614e47565b6101a083015161010084015161014085015160408087015190517f498524230000000000000000000000000000000000000000000000000000000081526001600160a01b0393841660048201529183166024830152604482015281841660648201529293501690634985242390608401600060405180830381600087803b158015613ba757600080fd5b505af1158015613bbb573d6000803e3d6000fd5b5050506101008301516101408401516040808601516101a08701519151637b49f5bf60e01b81526001600160a01b03948516600482015292841660248401526044830152821660648201529083169150637b49f5bf90608401600060405180830381600087803b158015613c2e57600080fd5b505af1158015613c42573d6000803e3d6000fd5b50505063ffffffff909316600090815260056020526040902060090180546001600160a01b039092166001600160a01b03199092169190911790555050565b600080613c8d83613e66565b604051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b600482015291935091506000906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015613d12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613d369190614e47565b60608501516040517f131fc1cf0000000000000000000000000000000000000000000000000000000081526001600160a01b03918216600482015233602482015287821660448201526064810185905291925082169063131fc1cf90608401600060405180830381600087803b158015613daf57600080fd5b505af1158015613dc3573d6000803e3d6000fd5b50505050806001600160a01b031663b3a424bd8560600151336124446000546001600160a01b031690565b6060600080856001600160a01b031685604051613e0b919061521f565b600060405180830381855af49150503d8060008114613e46576040519150601f19603f3d011682016040523d82523d6000602084013e613e4b565b606091505b5091509150613e5c868383876141b8565b9695505050505050565b6000806000613ea98460000151856020015186610120015167ffffffffffffffff1642613e939190614ea9565b876080015163ffffffff16886101c00151613278565b60c0850151604051632ad659af60e01b81526004810183905261ffff909116602482015290915073__$7fe1a5040b0347abce432a11768ba31a4f$__90632ad659af90604401602060405180830381865af4158015613f0c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190613f309190614e2e565b925082818560000151613f439190614ebc565b613f4d9190614ea9565b915050915091565b600154600160a01b900460ff16610f985760405162461bcd60e51b815260206004820152601460248201527f5061757361626c653a206e6f742070617573656400000000000000000000000060448201526064016106d5565b604051631c2d8fb360e31b81527f000000000000000000000000000000000000000000000000000000000000000060048201526000907f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03169063e16c7d9890602401602060405180830381865afa158015614035573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906140599190614e47565b6040517f78a7fa670000000000000000000000000000000000000000000000000000000081523060048201526001600160a01b0391909116906378a7fa6790602401602060405180830381865afa1580156140b8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f319190614e2e565b6101a08201516101008301516101408401516040808601519051637b49f5bf60e01b81526001600160a01b0393841660048201529183166024830152604482015283821660648201526000929190911690637b49f5bf90608401600060405180830381600087803b15801561415057600080fd5b505af1158015614164573d6000803e3d6000fd5b5050505060006141748484614231565b949350505050565b60008161418b57506000610c35565b60006141978585614ea9565b9050846141a66127108361503d565b6141b09190615054565b915050610c35565b60608315614227578251600003614220576001600160a01b0385163b6142205760405162461bcd60e51b815260206004820152601d60248201527f416464726573733a2063616c6c20746f206e6f6e2d636f6e747261637400000060448201526064016106d5565b5081614174565b61417483836146ad565b604051631c2d8fb360e31b81527f0000000000000000000000000000000000000000000000000000000000000000600482015260009081906001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa1580156142ba573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906142de9190614e47565b9050806001600160a01b031663aaf5f5646040518163ffffffff1660e01b81526004016020604051808303816000875af1158015614320573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190614344919061523b565b63ffffffff81811660009081526005602081815260409283902089518155908901516001820155888301516002820155606089015160038201805460808c015160a08d015160c08e01516001600160a01b039586167fffffffffffffffff00000000000000000000000000000000000000000000000090941693909317600160a01b929099168202989098177fffffffff00000000ffffffffffffffffffffffffffffffffffffffffffffffff16600160c01b61ffff998a16027fffffffff0000ffffffffffffffffffffffffffffffffffffffffffffffffffff1617600160d01b989092169790970217905560e08a01516004808401919091556101008b015193830180546101208d01519584166001600160e01b03199091161767ffffffffffffffff9095168702949094179093556101408a01516006830180546001600160a01b03199081169284169290921790556101608b015160078401805483169184169190911790556101808b01516008840180549092169083161790556101a08a0151600990920180546101c08c01519383167fffffffffffffffffffffff00000000000000000000000000000000000000000090911617921515909502919091179093559051631c2d8fb360e31b81527522a92199182faa2920a729a322a92fa6a0a720a3a2a960511b918101919091529193507f0000000000000000000000000000000000000000000000000000000000000000169063e16c7d9890602401602060405180830381865afa158015614583573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906145a79190614e47565b6001600160a01b031663f18d03cc8560600151866101800151868860e0015189600001516145d59190614ea9565b6040516001600160e01b031960e087901b1681526001600160a01b0394851660048201529284166024840152921660448201526064810191909152608401600060405180830381600087803b15801561462d57600080fd5b505af1158015614641573d6000803e3d6000fd5b50505050826001600160a01b031684604001518561014001516001600160a01b03167fc4c3eef84cea74c07370cf16b6bb43ebf62dd3fd5773a91c8350ff00d316134d8560405161469e919063ffffffff91909116815260200190565b60405180910390a45092915050565b8151156146bd5781518083602001fd5b8060405162461bcd60e51b81526004016106d59190614e1b565b63ffffffff81168114610a5857600080fd5b80356146f4816146d7565b919050565b60006020828403121561470b57600080fd5b8135610c35816146d7565b60006101e082019050825182526020830151602083015260408301516040830152606083015161475160608401826001600160a01b03169052565b506080830151614769608084018263ffffffff169052565b5060a083015161477f60a084018261ffff169052565b5060c083015161479560c084018261ffff169052565b5060e083015160e0830152610100808401516147bb828501826001600160a01b03169052565b50506101208381015167ffffffffffffffff1690830152610140808401516001600160a01b039081169184019190915261016080850151821690840152610180808501518216908401526101a080850151909116908301526101c0928301511515929091019190915290565b634e487b7160e01b600052604160045260246000fd5b604051610100810167ffffffffffffffff8111828210171561486157614861614827565b60405290565b604051601f8201601f1916810167ffffffffffffffff8111828210171561489057614890614827565b604052919050565b600067ffffffffffffffff8311156148b2576148b2614827565b6148c5601f8401601f1916602001614867565b90508281528383830111156148d957600080fd5b828260208301376000602084830101529392505050565b6001600160a01b0381168114610a5857600080fd5b80356146f4816148f0565b6000806000806080858703121561492657600080fd5b843567ffffffffffffffff81111561493d57600080fd5b8501601f8101871361494e57600080fd5b61495d87823560208401614898565b945050602085013561496e816148f0565b9250604085013591506060850135614985816148f0565b939692955090935050565b6000602082840312156149a257600080fd5b8135610c35816148f0565b6000602082840312156149bf57600080fd5b5035919050565b6000602082840312156149d857600080fd5b813561ffff81168114610c3557600080fd5b8015158114610a5857600080fd5b80356146f4816149ea565b600082601f830112614a1457600080fd5b610c3583833560208501614898565b600060808284031215614a3557600080fd5b6040516080810167ffffffffffffffff8282108183111715614a5957614a59614827565b81604052829350843583526020850135602084015260408501359150614a7e826148f0565b8160408401526060850135915080821115614a9857600080fd5b50614aa585828601614a03565b6060830152505092915050565b600080828403610120811215614ac757600080fd5b61010080821215614ad757600080fd5b614adf61483d565b91508435825260208501356020830152604085013560408301526060850135614b07816148f0565b6060830152614b18608086016146e9565b6080830152614b2960a08601614905565b60a0830152614b3a60c086016149f8565b60c083015260e0858101359083015290925083013567ffffffffffffffff811115614b6457600080fd5b614b7085828601614a23565b9150509250929050565b60008060408385031215614b8d57600080fd5b8235614b98816148f0565b91506020830135614ba8816149ea565b809150509250929050565b600067ffffffffffffffff821115614bcd57614bcd614827565b5060051b60200190565b600082601f830112614be857600080fd5b81356020614bfd614bf883614bb3565b614867565b82815260059290921b84018101918181019086841115614c1c57600080fd5b8286015b84811015614c40578035614c33816149ea565b8352918301918301614c20565b509695505050505050565b60008060408385031215614c5e57600080fd5b823567ffffffffffffffff80821115614c7657600080fd5b818501915085601f830112614c8a57600080fd5b81356020614c9a614bf883614bb3565b82815260059290921b84018101918181019089841115614cb957600080fd5b948201945b83861015614ce0578535614cd1816148f0565b82529482019490820190614cbe565b96505086013592505080821115614cf657600080fd5b50614b7085828601614bd7565b600080600080600080600080610100898b031215614d2057600080fd5b8835614d2b816146d7565b97506020890135614d3b816146d7565b965060408901359550606089013594506080890135935060a0890135925060c0890135614d67816149ea565b915060e089013567ffffffffffffffff811115614d8357600080fd5b614d8f8b828c01614a03565b9150509295985092959890939650565b60008060408385031215614db257600080fd5b8235614dbd816148f0565b946020939093013593505050565b60005b83811015614de6578181015183820152602001614dce565b50506000910152565b60008151808452614e07816020860160208601614dcb565b601f01601f19169290920160200192915050565b602081526000610c356020830184614def565b600060208284031215614e4057600080fd5b5051919050565b600060208284031215614e5957600080fd5b8151610c35816148f0565b634e487b7160e01b600052603260045260246000fd5b634e487b7160e01b600052601160045260246000fd5b600060018201614ea257614ea2614e7a565b5060010190565b818103818111156110c3576110c3614e7a565b808201808211156110c3576110c3614e7a565b600060208284031215614ee157600080fd5b8151610c35816149ea565b600060608284031215614efe57600080fd5b6040516060810167ffffffffffffffff8282108183111715614f2257614f22614827565b8160405284519150614f33826148f0565b9082526020840151908082168214614f4a57600080fd5b506020820152604083015160048110614f6257600080fd5b60408201529392505050565b80518252602081015160208301526001600160a01b03604082015116604083015260006060820151608060608501526141746080850182614def565b600061014085518352602086015160208401526040860151604084015260608601516001600160a01b03808216606086015263ffffffff60808901511660808601528060a08901511660a0860152505060c086015161500d60c085018215159052565b5060e086015160e08401528061010084015261502b81840186614f6e565b91505082610120830152949350505050565b80820281158282048414176110c3576110c3614e7a565b60008261507157634e487b7160e01b600052601260045260246000fd5b500490565b86548152600187015460208201526002870154604082015260038701546001600160a01b0380821660608401526102808301919060a082901c63ffffffff16608085015261ffff60c083901c811660a08601526150de60c08601828560d01c1661ffff169052565b5060048a015460e085015260058a01548181166001600160a01b0390811661010087015267ffffffffffffffff60a092831c1661012087015260068c0154811661014087015260078c0154811661016087015260088c0154811661018087015260098c0154928316166101a086015281901c60ff1615156101c085015290505063ffffffff87166101e083015263ffffffff8616610200830152846102208301528361024083015261519c6102608301846001600160a01b03169052565b979650505050505050565b600080604083850312156151ba57600080fd5b82516151c5816148f0565b6020840151909250614ba8816148f0565b600063ffffffff8089168352808816602084015250851515604083015284606083015283608083015260c060a083015261521360c0830184614f6e565b98975050505050505050565b60008251615231818460208701614dcb565b9190910192915050565b60006020828403121561524d57600080fd5b8151610c35816146d756fea164736f6c6343000813000a",
  "libraries": {
    "NFTfiSigningUtils": "0x30FBa6cE5499EC0A3400BCD3c3c70dAB29A95C16",
    "LoanChecksAndCalculations": "0x7609BaBeD95fbf29410915a0E0e74635037bf1eF",
    "ContractKeys": "0xC0d0DC0e7fE5A7438db4A9cf1Faa04b2A1bF78D6",
    "ContractKeyUtils": "0x2ffF031e525a20fcF8944aC7Cf3Bdcc3b19a6D77"
  },
  "devdoc": {
    "author": "NFTfi",
    "events": {
      "AdminFeeUpdated(uint16)": {
        "params": {
          "newAdminFee": "- The new admin fee measured in basis points. This is a percent of the interest paid upon a loan's completion that go to the contract admins."
        }
      },
      "ERC20Permit(address,bool)": {
        "params": {
          "erc20Contract": "- Address of the ERC20 contract.",
          "isPermitted": "- Signals ERC20 permit."
        }
      },
      "LoanLiquidated(uint32,address,address,uint256,uint256,uint256,uint256,address)": {
        "params": {
          "borrower": "- The address of the borrower.",
          "lender": "- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.",
          "loanId": "- A unique identifier for this particular loan, sourced from the Loan Coordinator.",
          "loanLiquidationDate": "- The unix time (measured in seconds) that liquidation occurred.",
          "loanMaturityDate": "- The unix time (measured in seconds) that the loan became due and was eligible for liquidation.",
          "loanPrincipalAmount": "- The original sum of money transferred from lender to borrower at the beginning of the loan, measured in loanERC20Denomination's smallest units.",
          "nftCollateralContract": "- The ERC721 contract of the NFT collateral",
          "nftCollateralId": "- The ID within the NFTCollateralContract for the NFT being used as collateral for this loan. The NFT is stored within this contract during the duration of the loan."
        }
      },
      "LoanRenegotiated(uint32,address,address,uint32,uint256,uint256,uint256,bool)": {
        "params": {
          "isProRata": "- indicates if a renegotiated loan is pro-rata or fixed",
          "loanId": "- The unique identifier for the loan to be renegotiated",
          "newLoanDuration": "- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.",
          "newMaximumRepaymentAmount": "- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early.",
          "renegotiationAdminFee": "renegotiationFee admin portion based on determined by adminFeeInBasisPoints",
          "renegotiationFee": "Agreed upon fee in loan denomination that borrower pays for the lender for the renegotiation, has to be paid with an ERC20 transfer loanERC20Denomination token, uses transfer from, frontend will have to prompt an erc20 approve for this from the borrower to the lender"
        }
      },
      "LoanRepaid(uint32,address,address,uint256,uint256,uint256,uint256,address,address)": {
        "params": {
          "adminFee": "The amount of interest paid to the contract admins, measured in the smalled units of loanERC20Denomination and determined by adminFeeInBasisPoints. This amount never exceeds the amount of interest earned.",
          "amountPaidToLender": "The amount of ERC20 that the borrower paid to the lender, measured in the smalled units of loanERC20Denomination.",
          "borrower": "- The address of the borrower.",
          "lender": "- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.",
          "loanERC20Denomination": "- The ERC20 contract of the currency being used as principal/interest for this loan.",
          "loanId": "- A unique identifier for this particular loan, sourced from the Loan Coordinator.",
          "loanPrincipalAmount": "- The original sum of money transferred from lender to borrower at the beginning of the loan, measured in loanERC20Denomination's smallest units.",
          "nftCollateralContract": "- The ERC721 contract of the NFT collateral",
          "nftCollateralId": "- The ID within the NFTCollateralContract for the NFT being used as collateral for this loan. The NFT is stored within this contract during the duration of the loan."
        }
      },
      "LoanStarted(uint32,address,address,(uint256,uint256,uint256,address,uint32,uint16,uint16,uint256,address,uint64,address,address,address,address,bool))": {
        "params": {
          "borrower": "- The address of the borrower.",
          "lender": "- The address of the lender. The lender can change their address by transferring the NFTfi ERC721 token that they received when the loan began.",
          "loanId": "- A unique identifier for this particular loan, sourced from the Loan Coordinator."
        }
      },
      "MaximumLoanDurationUpdated(uint256)": {
        "params": {
          "newMaximumLoanDuration": "- The new maximum duration."
        }
      },
      "Paused(address)": {
        "details": "Emitted when the pause is triggered by `account`."
      },
      "Unpaused(address)": {
        "details": "Emitted when the pause is lifted by `account`."
      }
    },
    "kind": "dev",
    "methods": {
      "acceptOffer((uint256,uint256,uint256,address,uint32,address,bool,uint256),(uint256,uint256,address,bytes))": {
        "params": {
          "_offer": "- The offer made by the lender.",
          "_signature": "- The components of the lender's signature."
        },
        "returns": {
          "_0": "The ID of the created loan."
        }
      },
      "cancelRefinancingCommitment(uint256)": {
        "params": {
          "_nonce": "- User nonce"
        }
      },
      "constructor": {
        "details": "Sets `hub` and permitted erc20-s",
        "params": {
          "_admin": "- Initial admin of this contract.",
          "_nftfiHub": "- NFTfiHub address",
          "_permittedErc20s": "- list of permitted ERC20 token contract addresses"
        }
      },
      "drainNFT(string,address,uint256,address)": {
        "params": {
          "_receiver": "- receiver of the token",
          "_tokenAddress": "- address of the token contract for the token to be sent out",
          "_tokenId": "- id token to be sent out"
        }
      },
      "getERC20Permit(address)": {
        "params": {
          "_erc20": "- The address of the erc20 contract."
        },
        "returns": {
          "_0": "Returns whether the erc20 is permitted"
        }
      },
      "getPayoffAmount(uint32)": {
        "params": {
          "_loanId": "A unique identifier for this particular loan, sourced from the Loan Coordinator."
        },
        "returns": {
          "_0": "The amount of the specified ERC20 currency required to pay back this loan, measured in the smallest unit of the specified ERC20 currency."
        }
      },
      "getWhetherRenegotiationNonceHasBeenUsedForUser(address,uint256)": {
        "params": {
          "_nonce": "- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.",
          "_user": "- The address of the user. This function works for both lenders and borrowers alike."
        },
        "returns": {
          "_0": "A bool representing whether or not this nonce has been used for this user."
        }
      },
      "liquidateOverdueLoan(uint32)": {
        "params": {
          "_loanId": "A unique identifier for this particular loan, sourced from the Loan Coordinator."
        }
      },
      "mintObligationReceipt(uint32)": {
        "params": {
          "_loanId": "- The unique identifier for the loan."
        }
      },
      "mintPromissoryNote(uint32)": {
        "params": {
          "_loanId": "- The unique identifier for the loan."
        }
      },
      "owner()": {
        "details": "Returns the address of the current owner."
      },
      "pause()": {
        "details": "Triggers stopped state. Requirements: - Only the owner can call this method. - The contract must not be paused."
      },
      "paused()": {
        "details": "Returns true if the contract is paused, and false otherwise."
      },
      "payBackLoan(uint32)": {
        "params": {
          "_loanId": "A unique identifier for this particular loan, sourced from the Loan Coordinator."
        }
      },
      "payBackLoanSafe(uint32)": {
        "params": {
          "_loanId": "A unique identifier for this particular loan, sourced from the Loan Coordinator."
        }
      },
      "renegotiateLoan(uint32,uint32,uint256,uint256,uint256,uint256,bool,bytes)": {
        "details": "makes possible to change loan duration and max repayment amount, loan duration even can be extended if loan was expired but not liquidated.",
        "params": {
          "_expiry": "- The date when the renegotiation offer expires",
          "_isProRata": "- indicates if a renegotiated loan is pro-rata or fixed",
          "_lenderNonce": "- The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes: - First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. - Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment() , which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce.",
          "_lenderSignature": "- The ECDSA signature of the lender, obtained off-chain ahead of time, signing the following combination of parameters: - _loanId - _newLoanDuration - _isProRata - _newMaximumRepaymentAmount - _renegotiationFee - _lender - _nonce - _expiry - address of this contract - chainId",
          "_loanId": "- The unique identifier for the loan to be renegotiated",
          "_newLoanDuration": "- The new amount of time (measured in seconds) that can elapse before the lender can liquidate the loan and seize the underlying collateral NFT.",
          "_newMaximumRepaymentAmount": "- The new maximum amount of money that the borrower would be required to retrieve their collateral, measured in the smallest units of the ERC20 currency used for the loan. The borrower will always have to pay this amount to retrieve their collateral, regardless of whether they repay early.",
          "_renegotiationFee": "Agreed upon fee in ether that borrower pays for the lender for the renegitiation"
        }
      },
      "requestTransferOwnership(address)": {
        "details": "Requests transferring ownership of the contract to a new account (`_newOwnerCandidate`). Can only be called by the current owner."
      },
      "setERC20Permit(address,bool)": {
        "params": {
          "_erc20": "- The address of the ERC20 currency whose permit list status changed.",
          "_permit": "- The new status of whether the currency is permitted or not."
        }
      },
      "setERC20Permits(address[],bool[])": {
        "params": {
          "_erc20s": "- The addresses of the ERC20 currencies whose permit list status changed.",
          "_permits": "- The new statuses of whether the currency is permitted or not."
        }
      },
      "unpause()": {
        "details": "Returns to normal state. Requirements: - Only the owner can call this method. - The contract must be paused."
      },
      "updateAdminFee(uint16)": {
        "params": {
          "_newAdminFeeInBasisPoints": "- The new admin fee measured in basis points. This is a percent of the interest paid upon a loan's completion that go to the contract admins."
        }
      },
      "updateMaximumLoanDuration(uint256)": {
        "params": {
          "_newMaximumLoanDuration": "- The new maximum loan duration, measured in seconds."
        }
      }
    },
    "title": "AssetOfferLoan",
    "version": 1
  },
  "userdoc": {
    "events": {
      "AdminFeeUpdated(uint16)": {
        "notice": "This event is fired whenever the admins change the percent of interest rates earned that they charge as a fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points."
      },
      "ERC20Permit(address,bool)": {
        "notice": "This event is fired whenever the admin sets a ERC20 permit."
      },
      "LoanLiquidated(uint32,address,address,uint256,uint256,uint256,uint256,address)": {
        "notice": "This event is fired whenever a lender liquidates an outstanding loan that is owned to them that has exceeded its duration. The lender receives the underlying NFT collateral, and the borrower no longer needs to repay the loan principal-plus-interest."
      },
      "LoanRenegotiated(uint32,address,address,uint32,uint256,uint256,uint256,bool)": {
        "notice": "This event is fired when some of the terms of a loan are being renegotiated."
      },
      "LoanRepaid(uint32,address,address,uint256,uint256,uint256,uint256,address,address)": {
        "notice": "This event is fired whenever a borrower successfully repays their loan, paying principal-plus-interest-minus-fee to the lender in loanERC20Denomination, paying fee to owner in loanERC20Denomination, and receiving their NFT collateral back."
      },
      "LoanStarted(uint32,address,address,(uint256,uint256,uint256,address,uint32,uint16,uint16,uint256,address,uint64,address,address,address,address,bool))": {
        "notice": "This event is fired whenever a borrower begins a loan by calling NFTfi.beginLoan(), which can only occur after both the lender and borrower have approved their ERC721 and ERC20 contracts to use NFTfi, and when they both have signed off-chain messages that agree on the terms of the loan."
      },
      "MaximumLoanDurationUpdated(uint256)": {
        "notice": "This event is fired whenever the admins change the maximum duration of any loan started for this loan type."
      }
    },
    "kind": "user",
    "methods": {
      "acceptOffer((uint256,uint256,uint256,address,uint32,address,bool,uint256),(uint256,uint256,address,bytes))": {
        "notice": "This function is called by the borrower when accepting a lender's offer to begin a loan."
      },
      "adminFeeInBasisPoints()": {
        "notice": "The percentage of interest earned by lenders on this platform that is taken by the contract admin's as a fee, measured in basis points (hundredths of a percent). The max allowed value is 10000."
      },
      "cancelRefinancingCommitment(uint256)": {
        "notice": "This function can be called by either a lender or a borrower to cancel all off-chain orders that they have signed that contain this nonce. If the off-chain orders were created correctly, there should only be one off-chain order that contains this nonce at all. The nonce referred to here is not the same as an Ethereum account's nonce. We are referring instead to nonces that are used by both the lender and the borrower when they are first signing off-chain NFTfi orders. These nonces can be any uint256 value that the user has not previously used to sign an off-chain order. Each nonce can be used at most once per user within NFTfi, regardless of whether they are the lender or the borrower in that situation. This serves two purposes. First, it prevents replay attacks where an attacker would submit a user's off-chain order more than once. Second, it allows a user to cancel an off-chain order by calling NFTfi.cancelLoanCommitment(), which marks the nonce as used and prevents any future loan from using the user's off-chain order that contains that nonce."
      },
      "drainNFT(string,address,uint256,address)": {
        "notice": "used by the owner account to be able to drain stuck NFTs"
      },
      "getERC20Permit(address)": {
        "notice": "This function can be called by anyone to get the permit associated with the erc20 contract."
      },
      "getPayoffAmount(uint32)": {
        "notice": "This function can be used to view the current quantity of the ERC20 currency used in the specified loan required by the borrower to repay their loan, measured in the smallest unit of the ERC20 currency. Note that since interest accrues every second, once a borrower calls repayLoan(), the amount will have increased slightly."
      },
      "getWhetherRenegotiationNonceHasBeenUsedForUser(address,uint256)": {
        "notice": "This function can be used to view whether a particular nonce for a particular user has already been used, either from a successful loan or a cancelled off-chain order."
      },
      "liquidateOverdueLoan(uint32)": {
        "notice": "This function is called by a lender once a loan has finished its duration and the borrower still has not repaid. The lender can call this function to seize the underlying NFT collateral, although the lender gives up all rights to the principal-plus-collateral by doing so. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it."
      },
      "loanRepaidOrLiquidated(uint32)": {
        "notice": "A mapping tracking whether a loan has either been repaid or liquidated. This prevents an attacker trying to repay or liquidate the same loan twice."
      },
      "maximumLoanDuration()": {
        "notice": "The maximum duration of any loan started for this loan type, measured in seconds. This is both a sanity-check for borrowers and an upper limit on how long admins will have to support v1 of this contract if they eventually deprecate it, as well as a check to ensure that the loan duration never exceeds the space alotted for it in the loan struct."
      },
      "mintObligationReceipt(uint32)": {
        "notice": "Mints the obligation receipt for the borrower"
      },
      "mintPromissoryNote(uint32)": {
        "notice": "Mints the promissory note for the lender"
      },
      "payBackLoan(uint32)": {
        "notice": "This function is called by a anyone to repay a loan. It can be called at any time after the loan has begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off early and the loan is pro-rated type, but the complete repayment amount if it is fixed type. The the borrower (current owner of the obligation note) will get the collaterl NFT back. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it."
      },
      "payBackLoanSafe(uint32)": {
        "notice": "This function is called by a anyone to repay a loan. It can be called at any time after the loan has begun and before loan expiry.. The caller will pay a pro-rata portion of their interest if the loan is paid off early and the loan is pro-rated type, but the complete repayment amount if it is fixed type. The the borrower (current owner of the obligation note) will get the collaterl NFT back. This function is purposefully not pausable in order to prevent an attack where the contract admin's pause the contract and hold hostage the NFT's that are still within it."
      },
      "setERC20Permit(address,bool)": {
        "notice": "This function can be called by admins to change the permitted status of an ERC20 currency. This includes both adding an ERC20 currency to the permitted list and removing it."
      },
      "setERC20Permits(address[],bool[])": {
        "notice": "This function can be called by admins to change the permitted status of a batch of ERC20 currency. This includes both adding an ERC20 currency to the permitted list and removing it."
      },
      "updateAdminFee(uint16)": {
        "notice": "This function can be called by admins to change the percent of interest rates earned that they charge as a fee. Note that newAdminFee can never exceed 10,000, since the fee is measured in basis points."
      },
      "updateMaximumLoanDuration(uint256)": {
        "notice": "This function can be called by admins to change the maximumLoanDuration. Note that they can never change maximumLoanDuration to be greater than UINT32_MAX, since that's the maximum space alotted for the duration in the loan struct."
      }
    },
    "notice": "Main contract for NFTfi Loans Type. This contract manages the ability to create NFT-backed peer-to-peer loans of type Fixed (agreed to be a fixed-repayment loan) where the borrower pays the maximumRepaymentAmount regardless of whether they repay early or not. There are two ways to commence an NFT-backed loan: a. The borrower accepts a lender's offer by calling `acceptOffer`.   1. the borrower calls nftContract.approveAll(NFTfi), approving the NFTfi contract to move their NFT's on their behalf.   2. the lender calls erc20Contract.approve(NFTfi), allowing NFTfi to move the lender's ERC20 tokens on their behalf.   3. the lender signs an off-chain message, proposing its offer terms.   4. the borrower calls `acceptOffer` to accept these terms and enter into the loan. The NFT is stored in the contract, the borrower receives the loan principal in the specified ERC20 currency, the lender can mint an NFTfi promissory note (in ERC721 form) that represents the rights to either the principal-plus-interest, or the underlying NFT collateral if the borrower does not pay back in time, and the borrower can mint an obligation receipt (in ERC721 form) that gives them the right to pay back the loan and get the collateral back. The lender can freely transfer and trade this ERC721 promissory note as they wish, with the knowledge that transferring the ERC721 promissory note tranfers the rights to principal-plus-interest and/or collateral, and that they will no longer have a claim on the loan. The ERC721 promissory note itself represents that claim. The borrower can freely transfer and trade this ERC721 obligation receipt as they wish, with the knowledge that transferring the ERC721 obligation receipt tranfers the rights right to pay back the loan and get the collateral back. A loan may end in one of two ways: - First, a borrower may call NFTfi.payBackLoan() and pay back the loan plus interest at any time, in which case they receive their NFT back in the same transaction. - Second, if the loan's duration has passed and the loan has not been paid back yet, a lender can call NFTfi.liquidateOverdueLoan(), in which case they receive the underlying NFT collateral and forfeit the rights to the principal-plus-interest, which the borrower now keeps.",
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 25956,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "_owner",
        "offset": 0,
        "slot": "0",
        "type": "t_address"
      },
      {
        "astId": 25958,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "_ownerCandidate",
        "offset": 0,
        "slot": "1",
        "type": "t_address"
      },
      {
        "astId": 844,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "_paused",
        "offset": 20,
        "slot": "1",
        "type": "t_bool"
      },
      {
        "astId": 945,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "_status",
        "offset": 0,
        "slot": "2",
        "type": "t_uint256"
      },
      {
        "astId": 14513,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "maximumLoanDuration",
        "offset": 0,
        "slot": "3",
        "type": "t_uint256"
      },
      {
        "astId": 14518,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "adminFeeInBasisPoints",
        "offset": 0,
        "slot": "4",
        "type": "t_uint16"
      },
      {
        "astId": 14524,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "loanIdToLoan",
        "offset": 0,
        "slot": "5",
        "type": "t_mapping(t_uint32,t_struct(LoanTerms)16728_storage)"
      },
      {
        "astId": 14530,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "loanRepaidOrLiquidated",
        "offset": 0,
        "slot": "6",
        "type": "t_mapping(t_uint32,t_bool)"
      },
      {
        "astId": 14537,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "_renegotiationNonceHasBeenUsedForUser",
        "offset": 0,
        "slot": "7",
        "type": "t_mapping(t_address,t_mapping(t_uint256,t_bool))"
      },
      {
        "astId": 14542,
        "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
        "label": "erc20Permits",
        "offset": 0,
        "slot": "8",
        "type": "t_mapping(t_address,t_bool)"
      }
    ],
    "types": {
      "t_address": {
        "encoding": "inplace",
        "label": "address",
        "numberOfBytes": "20"
      },
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      },
      "t_mapping(t_address,t_bool)": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_address,t_mapping(t_uint256,t_bool))": {
        "encoding": "mapping",
        "key": "t_address",
        "label": "mapping(address => mapping(uint256 => bool))",
        "numberOfBytes": "32",
        "value": "t_mapping(t_uint256,t_bool)"
      },
      "t_mapping(t_uint256,t_bool)": {
        "encoding": "mapping",
        "key": "t_uint256",
        "label": "mapping(uint256 => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_uint32,t_bool)": {
        "encoding": "mapping",
        "key": "t_uint32",
        "label": "mapping(uint32 => bool)",
        "numberOfBytes": "32",
        "value": "t_bool"
      },
      "t_mapping(t_uint32,t_struct(LoanTerms)16728_storage)": {
        "encoding": "mapping",
        "key": "t_uint32",
        "label": "mapping(uint32 => struct LoanData.LoanTerms)",
        "numberOfBytes": "32",
        "value": "t_struct(LoanTerms)16728_storage"
      },
      "t_struct(LoanTerms)16728_storage": {
        "encoding": "inplace",
        "label": "struct LoanData.LoanTerms",
        "members": [
          {
            "astId": 16699,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanPrincipalAmount",
            "offset": 0,
            "slot": "0",
            "type": "t_uint256"
          },
          {
            "astId": 16701,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "maximumRepaymentAmount",
            "offset": 0,
            "slot": "1",
            "type": "t_uint256"
          },
          {
            "astId": 16703,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "nftCollateralId",
            "offset": 0,
            "slot": "2",
            "type": "t_uint256"
          },
          {
            "astId": 16705,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanERC20Denomination",
            "offset": 0,
            "slot": "3",
            "type": "t_address"
          },
          {
            "astId": 16707,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanDuration",
            "offset": 20,
            "slot": "3",
            "type": "t_uint32"
          },
          {
            "astId": 16709,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanInterestRateForDurationInBasisPoints",
            "offset": 24,
            "slot": "3",
            "type": "t_uint16"
          },
          {
            "astId": 16711,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanAdminFeeInBasisPoints",
            "offset": 26,
            "slot": "3",
            "type": "t_uint16"
          },
          {
            "astId": 16713,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "originationFee",
            "offset": 0,
            "slot": "4",
            "type": "t_uint256"
          },
          {
            "astId": 16715,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "nftCollateralWrapper",
            "offset": 0,
            "slot": "5",
            "type": "t_address"
          },
          {
            "astId": 16717,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "loanStartTime",
            "offset": 20,
            "slot": "5",
            "type": "t_uint64"
          },
          {
            "astId": 16719,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "nftCollateralContract",
            "offset": 0,
            "slot": "6",
            "type": "t_address"
          },
          {
            "astId": 16721,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "borrower",
            "offset": 0,
            "slot": "7",
            "type": "t_address"
          },
          {
            "astId": 16723,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "lender",
            "offset": 0,
            "slot": "8",
            "type": "t_address"
          },
          {
            "astId": 16725,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "escrow",
            "offset": 0,
            "slot": "9",
            "type": "t_address"
          },
          {
            "astId": 16727,
            "contract": "contracts/loans/loanTypes/AssetOfferLoan.sol:AssetOfferLoan",
            "label": "isProRata",
            "offset": 20,
            "slot": "9",
            "type": "t_bool"
          }
        ],
        "numberOfBytes": "320"
      },
      "t_uint16": {
        "encoding": "inplace",
        "label": "uint16",
        "numberOfBytes": "2"
      },
      "t_uint256": {
        "encoding": "inplace",
        "label": "uint256",
        "numberOfBytes": "32"
      },
      "t_uint32": {
        "encoding": "inplace",
        "label": "uint32",
        "numberOfBytes": "4"
      },
      "t_uint64": {
        "encoding": "inplace",
        "label": "uint64",
        "numberOfBytes": "8"
      }
    }
  }
}